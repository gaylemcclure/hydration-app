{"ast":null,"code":"/**\r\n * DevExtreme (esm/events/core/events_engine.js)\r\n * Version: 21.2.7\r\n * Build date: Mon Apr 11 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport registerEventCallbacks from \"./event_registrator_callbacks\";\nimport { extend } from \"../../core/utils/extend\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { getWindow, hasWindow } from \"../../core/utils/window\";\nvar window = getWindow();\nimport injector from \"../../core/utils/dependency_injector\";\nimport { isWindow, isFunction, isString } from \"../../core/utils/type\";\nimport Callbacks from \"../../core/utils/callbacks\";\nimport errors from \"../../core/errors\";\nimport WeakMap from \"../../core/polyfills/weak_map\";\nimport hookTouchProps from \"../../events/core/hook_touch_props\";\nimport callOnce from \"../../core/utils/call_once\";\nvar EMPTY_EVENT_NAME = \"dxEmptyEventType\";\nvar NATIVE_EVENTS_TO_SUBSCRIBE = {\n  mouseenter: \"mouseover\",\n  mouseleave: \"mouseout\",\n  pointerenter: \"pointerover\",\n  pointerleave: \"pointerout\"\n};\nvar NATIVE_EVENTS_TO_TRIGGER = {\n  focusin: \"focus\",\n  focusout: \"blur\"\n};\nvar NO_BUBBLE_EVENTS = [\"blur\", \"focus\", \"load\"];\nvar forcePassiveFalseEventNames = [\"touchmove\", \"wheel\", \"mousewheel\", \"touchstart\"];\nvar EVENT_PROPERTIES = [\"target\", \"relatedTarget\", \"delegateTarget\", \"altKey\", \"bubbles\", \"cancelable\", \"changedTouches\", \"ctrlKey\", \"detail\", \"eventPhase\", \"metaKey\", \"shiftKey\", \"view\", \"char\", \"code\", \"charCode\", \"key\", \"keyCode\", \"button\", \"buttons\", \"offsetX\", \"offsetY\", \"pointerId\", \"pointerType\", \"targetTouches\", \"toElement\", \"touches\"];\n\nfunction matchesSafe(target, selector) {\n  return !isWindow(target) && \"#document\" !== target.nodeName && domAdapter.elementMatches(target, selector);\n}\n\nvar elementDataMap = new WeakMap();\nvar guid = 0;\nvar skipEvent;\n\nvar special = function () {\n  var specialData = {};\n  registerEventCallbacks.add(function (eventName, eventObject) {\n    specialData[eventName] = eventObject;\n  });\n  return {\n    getField: function (eventName, field) {\n      return specialData[eventName] && specialData[eventName][field];\n    },\n    callMethod: function (eventName, methodName, context, args) {\n      return specialData[eventName] && specialData[eventName][methodName] && specialData[eventName][methodName].apply(context, args);\n    }\n  };\n}();\n\nvar eventsEngine = injector({\n  on: getHandler(normalizeOnArguments(iterate(function (element, eventName, selector, data, handler) {\n    var handlersController = getHandlersController(element, eventName);\n    handlersController.addHandler(handler, selector, data);\n  }))),\n  one: getHandler(normalizeOnArguments(function (element, eventName, selector, data, handler) {\n    eventsEngine.on(element, eventName, selector, data, function oneTimeHandler() {\n      eventsEngine.off(element, eventName, selector, oneTimeHandler);\n      handler.apply(this, arguments);\n    });\n  })),\n  off: getHandler(normalizeOffArguments(iterate(function (element, eventName, selector, handler) {\n    var handlersController = getHandlersController(element, eventName);\n    handlersController.removeHandler(handler, selector);\n  }))),\n  trigger: getHandler(normalizeTriggerArguments(function (element, event, extraParameters) {\n    var eventName = event.type;\n    var handlersController = getHandlersController(element, event.type);\n    special.callMethod(eventName, \"trigger\", element, [event, extraParameters]);\n    handlersController.callHandlers(event, extraParameters);\n    var noBubble = special.getField(eventName, \"noBubble\") || event.isPropagationStopped() || -1 !== NO_BUBBLE_EVENTS.indexOf(eventName);\n\n    if (!noBubble) {\n      var parents = [];\n      !function getParents(element) {\n        var parent = element.parentNode;\n\n        if (parent) {\n          parents.push(parent);\n          getParents(parent);\n        }\n      }(element);\n      parents.push(window);\n      var i = 0;\n\n      while (parents[i] && !event.isPropagationStopped()) {\n        var parentDataByEvent = getHandlersController(parents[i], event.type);\n        parentDataByEvent.callHandlers(extend(event, {\n          currentTarget: parents[i]\n        }), extraParameters);\n        i++;\n      }\n    }\n\n    if (element.nodeType || isWindow(element)) {\n      special.callMethod(eventName, \"_default\", element, [event, extraParameters]);\n      callNativeMethod(eventName, element);\n    }\n  })),\n  triggerHandler: getHandler(normalizeTriggerArguments(function (element, event, extraParameters) {\n    var handlersController = getHandlersController(element, event.type);\n    handlersController.callHandlers(event, extraParameters);\n  }))\n});\n\nfunction applyForEach(args, method) {\n  var element = args[0];\n\n  if (!element) {\n    return;\n  }\n\n  if (domAdapter.isNode(element) || isWindow(element)) {\n    method.apply(eventsEngine, args);\n  } else if (!isString(element) && \"length\" in element) {\n    var itemArgs = Array.prototype.slice.call(args, 0);\n    Array.prototype.forEach.call(element, function (itemElement) {\n      itemArgs[0] = itemElement;\n      applyForEach(itemArgs, method);\n    });\n  } else {\n    throw errors.Error(\"E0025\");\n  }\n}\n\nfunction getHandler(method) {\n  return function () {\n    applyForEach(arguments, method);\n  };\n}\n\nfunction detectPassiveEventHandlersSupport() {\n  var isSupported = false;\n\n  try {\n    var options = Object.defineProperty({}, \"passive\", {\n      get: function () {\n        isSupported = true;\n        return true;\n      }\n    });\n    window.addEventListener(\"test\", null, options);\n  } catch (e) {}\n\n  return isSupported;\n}\n\nvar passiveEventHandlersSupported = callOnce(detectPassiveEventHandlersSupport);\n\nvar contains = (container, element) => {\n  if (isWindow(container)) {\n    return contains(container.document, element);\n  }\n\n  return container.contains ? container.contains(element) : !!(element.compareDocumentPosition(container) & element.DOCUMENT_POSITION_CONTAINS);\n};\n\nfunction getHandlersController(element, eventName) {\n  var elementData = elementDataMap.get(element);\n  eventName = eventName || \"\";\n  var eventNameParts = eventName.split(\".\");\n  var namespaces = eventNameParts.slice(1);\n  var eventNameIsDefined = !!eventNameParts[0];\n  eventName = eventNameParts[0] || EMPTY_EVENT_NAME;\n\n  if (!elementData) {\n    elementData = {};\n    elementDataMap.set(element, elementData);\n  }\n\n  if (!elementData[eventName]) {\n    elementData[eventName] = {\n      handleObjects: [],\n      nativeHandler: null\n    };\n  }\n\n  var eventData = elementData[eventName];\n  return {\n    addHandler: function (handler, selector, data) {\n      var callHandler = function (e, extraParameters) {\n        var handlerArgs = [e];\n        var target = e.currentTarget;\n        var relatedTarget = e.relatedTarget;\n        var secondaryTargetIsInside;\n        var result;\n\n        if (eventName in NATIVE_EVENTS_TO_SUBSCRIBE) {\n          secondaryTargetIsInside = relatedTarget && target && (relatedTarget === target || contains(target, relatedTarget));\n        }\n\n        if (void 0 !== extraParameters) {\n          handlerArgs.push(extraParameters);\n        }\n\n        special.callMethod(eventName, \"handle\", element, [e, data]);\n\n        if (!secondaryTargetIsInside) {\n          result = handler.apply(target, handlerArgs);\n        }\n\n        if (false === result) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      };\n\n      var handleObject = {\n        handler: handler,\n        wrappedHandler: function (e, extraParameters) {\n          if (skipEvent && e.type === skipEvent) {\n            return;\n          }\n\n          e.data = data;\n          e.delegateTarget = element;\n\n          if (selector) {\n            var currentTarget = e.target;\n\n            while (currentTarget && currentTarget !== element) {\n              if (matchesSafe(currentTarget, selector)) {\n                e.currentTarget = currentTarget;\n                callHandler(e, extraParameters);\n              }\n\n              currentTarget = currentTarget.parentNode;\n            }\n          } else {\n            e.currentTarget = e.delegateTarget || e.target;\n            callHandler(e, extraParameters);\n          }\n        },\n        selector: selector,\n        type: eventName,\n        data: data,\n        namespace: namespaces.join(\".\"),\n        namespaces: namespaces,\n        guid: ++guid\n      };\n      eventData.handleObjects.push(handleObject);\n      var firstHandlerForTheType = 1 === eventData.handleObjects.length;\n      var shouldAddNativeListener = firstHandlerForTheType && eventNameIsDefined;\n      var nativeListenerOptions;\n\n      if (shouldAddNativeListener) {\n        shouldAddNativeListener = !special.callMethod(eventName, \"setup\", element, [data, namespaces, handler]);\n      }\n\n      if (shouldAddNativeListener) {\n        eventData.nativeHandler = getNativeHandler(eventName);\n\n        if (passiveEventHandlersSupported() && forcePassiveFalseEventNames.indexOf(eventName) > -1) {\n          nativeListenerOptions = {\n            passive: false\n          };\n        }\n\n        eventData.removeListener = domAdapter.listen(element, NATIVE_EVENTS_TO_SUBSCRIBE[eventName] || eventName, eventData.nativeHandler, nativeListenerOptions);\n      }\n\n      special.callMethod(eventName, \"add\", element, [handleObject]);\n    },\n    removeHandler: function (handler, selector) {\n      var removeByEventName = function (eventName) {\n        var eventData = elementData[eventName];\n\n        if (!eventData.handleObjects.length) {\n          delete elementData[eventName];\n          return;\n        }\n\n        var removedHandler;\n        eventData.handleObjects = eventData.handleObjects.filter(function (handleObject) {\n          var skip = namespaces.length && !isSubset(handleObject.namespaces, namespaces) || handler && handleObject.handler !== handler || selector && handleObject.selector !== selector;\n\n          if (!skip) {\n            removedHandler = handleObject.handler;\n            special.callMethod(eventName, \"remove\", element, [handleObject]);\n          }\n\n          return skip;\n        });\n        var lastHandlerForTheType = !eventData.handleObjects.length;\n        var shouldRemoveNativeListener = lastHandlerForTheType && eventName !== EMPTY_EVENT_NAME;\n\n        if (shouldRemoveNativeListener) {\n          special.callMethod(eventName, \"teardown\", element, [namespaces, removedHandler]);\n\n          if (eventData.nativeHandler) {\n            eventData.removeListener();\n          }\n\n          delete elementData[eventName];\n        }\n      };\n\n      if (eventNameIsDefined) {\n        removeByEventName(eventName);\n      } else {\n        for (var name in elementData) {\n          removeByEventName(name);\n        }\n      }\n\n      var elementDataIsEmpty = 0 === Object.keys(elementData).length;\n\n      if (elementDataIsEmpty) {\n        elementDataMap.delete(element);\n      }\n    },\n    callHandlers: function (event, extraParameters) {\n      var forceStop = false;\n\n      var handleCallback = function (handleObject) {\n        if (forceStop) {\n          return;\n        }\n\n        if (!namespaces.length || isSubset(handleObject.namespaces, namespaces)) {\n          handleObject.wrappedHandler(event, extraParameters);\n          forceStop = event.isImmediatePropagationStopped();\n        }\n      };\n\n      eventData.handleObjects.forEach(handleCallback);\n\n      if (namespaces.length && elementData[EMPTY_EVENT_NAME]) {\n        elementData[EMPTY_EVENT_NAME].handleObjects.forEach(handleCallback);\n      }\n    }\n  };\n}\n\nfunction getNativeHandler(subscribeName) {\n  return function (event, extraParameters) {\n    var handlersController = getHandlersController(this, subscribeName);\n    event = eventsEngine.Event(event);\n    handlersController.callHandlers(event, extraParameters);\n  };\n}\n\nfunction isSubset(original, checked) {\n  for (var i = 0; i < checked.length; i++) {\n    if (original.indexOf(checked[i]) < 0) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction normalizeOnArguments(callback) {\n  return function (element, eventName, selector, data, handler) {\n    if (!handler) {\n      handler = data;\n      data = void 0;\n    }\n\n    if (\"string\" !== typeof selector) {\n      data = selector;\n      selector = void 0;\n    }\n\n    if (!handler && \"string\" === typeof eventName) {\n      handler = data || selector;\n      selector = void 0;\n      data = void 0;\n    }\n\n    callback(element, eventName, selector, data, handler);\n  };\n}\n\nfunction normalizeOffArguments(callback) {\n  return function (element, eventName, selector, handler) {\n    if (\"function\" === typeof selector) {\n      handler = selector;\n      selector = void 0;\n    }\n\n    callback(element, eventName, selector, handler);\n  };\n}\n\nfunction normalizeTriggerArguments(callback) {\n  return function (element, src, extraParameters) {\n    if (\"string\" === typeof src) {\n      src = {\n        type: src\n      };\n    }\n\n    if (!src.target) {\n      src.target = element;\n    }\n\n    src.currentTarget = element;\n\n    if (!src.delegateTarget) {\n      src.delegateTarget = element;\n    }\n\n    if (!src.type && src.originalEvent) {\n      src.type = src.originalEvent.type;\n    }\n\n    callback(element, src instanceof eventsEngine.Event ? src : eventsEngine.Event(src), extraParameters);\n  };\n}\n\nfunction normalizeEventArguments(callback) {\n  eventsEngine.Event = function (src, config) {\n    if (!(this instanceof eventsEngine.Event)) {\n      return new eventsEngine.Event(src, config);\n    }\n\n    if (!src) {\n      src = {};\n    }\n\n    if (\"string\" === typeof src) {\n      src = {\n        type: src\n      };\n    }\n\n    if (!config) {\n      config = {};\n    }\n\n    callback.call(this, src, config);\n  };\n\n  _extends(eventsEngine.Event.prototype, {\n    _propagationStopped: false,\n    _immediatePropagationStopped: false,\n    _defaultPrevented: false,\n    isPropagationStopped: function () {\n      return !!(this._propagationStopped || this.originalEvent && this.originalEvent.propagationStopped);\n    },\n    stopPropagation: function () {\n      this._propagationStopped = true;\n      this.originalEvent && this.originalEvent.stopPropagation();\n    },\n    isImmediatePropagationStopped: function () {\n      return this._immediatePropagationStopped;\n    },\n    stopImmediatePropagation: function () {\n      this.stopPropagation();\n      this._immediatePropagationStopped = true;\n      this.originalEvent && this.originalEvent.stopImmediatePropagation();\n    },\n    isDefaultPrevented: function () {\n      return !!(this._defaultPrevented || this.originalEvent && this.originalEvent.defaultPrevented);\n    },\n    preventDefault: function () {\n      this._defaultPrevented = true;\n      this.originalEvent && this.originalEvent.preventDefault();\n    }\n  });\n\n  return eventsEngine.Event;\n}\n\nfunction iterate(callback) {\n  var iterateEventNames = function (element, eventName) {\n    if (eventName && eventName.indexOf(\" \") > -1) {\n      var args = Array.prototype.slice.call(arguments, 0);\n      eventName.split(\" \").forEach(function (eventName) {\n        args[1] = eventName;\n        callback.apply(this, args);\n      });\n    } else {\n      callback.apply(this, arguments);\n    }\n  };\n\n  return function (element, eventName) {\n    if (\"object\" === typeof eventName) {\n      var args = Array.prototype.slice.call(arguments, 0);\n\n      for (var name in eventName) {\n        args[1] = name;\n        args[args.length - 1] = eventName[name];\n        iterateEventNames.apply(this, args);\n      }\n    } else {\n      iterateEventNames.apply(this, arguments);\n    }\n  };\n}\n\nfunction callNativeMethod(eventName, element) {\n  var nativeMethodName = NATIVE_EVENTS_TO_TRIGGER[eventName] || eventName;\n\n  if (function (eventName, element) {\n    return \"click\" === eventName && \"a\" === element.localName;\n  }(eventName, element)) {\n    return;\n  }\n\n  if (isFunction(element[nativeMethodName])) {\n    skipEvent = eventName;\n    element[nativeMethodName]();\n    skipEvent = void 0;\n  }\n}\n\nfunction calculateWhich(event) {\n  if (function (event) {\n    return null == event.which && 0 === event.type.indexOf(\"key\");\n  }(event)) {\n    return null != event.charCode ? event.charCode : event.keyCode;\n  }\n\n  if (function (event) {\n    return !event.which && void 0 !== event.button && /^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(event.type);\n  }(event)) {\n    return {\n      1: 1,\n      2: 3,\n      3: 1,\n      4: 2\n    }[event.button];\n  }\n\n  return event.which;\n}\n\nfunction initEvent(EventClass) {\n  if (EventClass) {\n    eventsEngine.Event = EventClass;\n    eventsEngine.Event.prototype = EventClass.prototype;\n  }\n}\n\ninitEvent(normalizeEventArguments(function (src, config) {\n  var _src$view;\n\n  var srcIsEvent = src instanceof eventsEngine.Event || hasWindow() && src instanceof window.Event || (null === (_src$view = src.view) || void 0 === _src$view ? void 0 : _src$view.Event) && src instanceof src.view.Event;\n\n  if (srcIsEvent) {\n    this.originalEvent = src;\n    this.type = src.type;\n    this.currentTarget = void 0;\n\n    if (Object.prototype.hasOwnProperty.call(src, \"isTrusted\")) {\n      this.isTrusted = src.isTrusted;\n    }\n\n    this.timeStamp = src.timeStamp || Date.now();\n  } else {\n    _extends(this, src);\n  }\n\n  addProperty(\"which\", calculateWhich, this);\n\n  if (0 === src.type.indexOf(\"touch\")) {\n    delete config.pageX;\n    delete config.pageY;\n  }\n\n  _extends(this, config);\n\n  this.guid = ++guid;\n}));\n\nfunction addProperty(propName, hook, eventInstance) {\n  Object.defineProperty(eventInstance || eventsEngine.Event.prototype, propName, {\n    enumerable: true,\n    configurable: true,\n    get: function () {\n      return this.originalEvent && hook(this.originalEvent);\n    },\n    set: function (value) {\n      Object.defineProperty(this, propName, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: value\n      });\n    }\n  });\n}\n\nEVENT_PROPERTIES.forEach(prop => addProperty(prop, event => event[prop]));\nhookTouchProps(addProperty);\nvar beforeSetStrategy = Callbacks();\nvar afterSetStrategy = Callbacks();\n\neventsEngine.set = function (engine) {\n  beforeSetStrategy.fire();\n  eventsEngine.inject(engine);\n  initEvent(engine.Event);\n  afterSetStrategy.fire();\n};\n\neventsEngine.subscribeGlobal = function () {\n  applyForEach(arguments, normalizeOnArguments(function () {\n    var args = arguments;\n    eventsEngine.on.apply(this, args);\n    beforeSetStrategy.add(function () {\n      var offArgs = Array.prototype.slice.call(args, 0);\n      offArgs.splice(3, 1);\n      eventsEngine.off.apply(this, offArgs);\n    });\n    afterSetStrategy.add(function () {\n      eventsEngine.on.apply(this, args);\n    });\n  }));\n};\n\neventsEngine.forcePassiveFalseEventNames = forcePassiveFalseEventNames;\neventsEngine.passiveEventHandlersSupported = passiveEventHandlersSupported;\nexport default eventsEngine;","map":{"version":3,"names":["_extends","registerEventCallbacks","extend","domAdapter","getWindow","hasWindow","window","injector","isWindow","isFunction","isString","Callbacks","errors","WeakMap","hookTouchProps","callOnce","EMPTY_EVENT_NAME","NATIVE_EVENTS_TO_SUBSCRIBE","mouseenter","mouseleave","pointerenter","pointerleave","NATIVE_EVENTS_TO_TRIGGER","focusin","focusout","NO_BUBBLE_EVENTS","forcePassiveFalseEventNames","EVENT_PROPERTIES","matchesSafe","target","selector","nodeName","elementMatches","elementDataMap","guid","skipEvent","special","specialData","add","eventName","eventObject","getField","field","callMethod","methodName","context","args","apply","eventsEngine","on","getHandler","normalizeOnArguments","iterate","element","data","handler","handlersController","getHandlersController","addHandler","one","oneTimeHandler","off","arguments","normalizeOffArguments","removeHandler","trigger","normalizeTriggerArguments","event","extraParameters","type","callHandlers","noBubble","isPropagationStopped","indexOf","parents","getParents","parent","parentNode","push","i","parentDataByEvent","currentTarget","nodeType","callNativeMethod","triggerHandler","applyForEach","method","isNode","itemArgs","Array","prototype","slice","call","forEach","itemElement","Error","detectPassiveEventHandlersSupport","isSupported","options","Object","defineProperty","get","addEventListener","e","passiveEventHandlersSupported","contains","container","document","compareDocumentPosition","DOCUMENT_POSITION_CONTAINS","elementData","eventNameParts","split","namespaces","eventNameIsDefined","set","handleObjects","nativeHandler","eventData","callHandler","handlerArgs","relatedTarget","secondaryTargetIsInside","result","preventDefault","stopPropagation","handleObject","wrappedHandler","delegateTarget","namespace","join","firstHandlerForTheType","length","shouldAddNativeListener","nativeListenerOptions","getNativeHandler","passive","removeListener","listen","removeByEventName","removedHandler","filter","skip","isSubset","lastHandlerForTheType","shouldRemoveNativeListener","name","elementDataIsEmpty","keys","delete","forceStop","handleCallback","isImmediatePropagationStopped","subscribeName","Event","original","checked","callback","src","originalEvent","normalizeEventArguments","config","_propagationStopped","_immediatePropagationStopped","_defaultPrevented","propagationStopped","stopImmediatePropagation","isDefaultPrevented","defaultPrevented","iterateEventNames","nativeMethodName","localName","calculateWhich","which","charCode","keyCode","button","test","initEvent","EventClass","_src$view","srcIsEvent","view","hasOwnProperty","isTrusted","timeStamp","Date","now","addProperty","pageX","pageY","propName","hook","eventInstance","enumerable","configurable","value","writable","prop","beforeSetStrategy","afterSetStrategy","engine","fire","inject","subscribeGlobal","offArgs","splice"],"sources":["/Users/gaylemcclure/Dev/water-app/node_modules/devextreme/esm/events/core/events_engine.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/events/core/events_engine.js)\r\n * Version: 21.2.7\r\n * Build date: Mon Apr 11 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport registerEventCallbacks from \"./event_registrator_callbacks\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    getWindow,\r\n    hasWindow\r\n} from \"../../core/utils/window\";\r\nvar window = getWindow();\r\nimport injector from \"../../core/utils/dependency_injector\";\r\nimport {\r\n    isWindow,\r\n    isFunction,\r\n    isString\r\n} from \"../../core/utils/type\";\r\nimport Callbacks from \"../../core/utils/callbacks\";\r\nimport errors from \"../../core/errors\";\r\nimport WeakMap from \"../../core/polyfills/weak_map\";\r\nimport hookTouchProps from \"../../events/core/hook_touch_props\";\r\nimport callOnce from \"../../core/utils/call_once\";\r\nvar EMPTY_EVENT_NAME = \"dxEmptyEventType\";\r\nvar NATIVE_EVENTS_TO_SUBSCRIBE = {\r\n    mouseenter: \"mouseover\",\r\n    mouseleave: \"mouseout\",\r\n    pointerenter: \"pointerover\",\r\n    pointerleave: \"pointerout\"\r\n};\r\nvar NATIVE_EVENTS_TO_TRIGGER = {\r\n    focusin: \"focus\",\r\n    focusout: \"blur\"\r\n};\r\nvar NO_BUBBLE_EVENTS = [\"blur\", \"focus\", \"load\"];\r\nvar forcePassiveFalseEventNames = [\"touchmove\", \"wheel\", \"mousewheel\", \"touchstart\"];\r\nvar EVENT_PROPERTIES = [\"target\", \"relatedTarget\", \"delegateTarget\", \"altKey\", \"bubbles\", \"cancelable\", \"changedTouches\", \"ctrlKey\", \"detail\", \"eventPhase\", \"metaKey\", \"shiftKey\", \"view\", \"char\", \"code\", \"charCode\", \"key\", \"keyCode\", \"button\", \"buttons\", \"offsetX\", \"offsetY\", \"pointerId\", \"pointerType\", \"targetTouches\", \"toElement\", \"touches\"];\r\n\r\nfunction matchesSafe(target, selector) {\r\n    return !isWindow(target) && \"#document\" !== target.nodeName && domAdapter.elementMatches(target, selector)\r\n}\r\nvar elementDataMap = new WeakMap;\r\nvar guid = 0;\r\nvar skipEvent;\r\nvar special = function() {\r\n    var specialData = {};\r\n    registerEventCallbacks.add((function(eventName, eventObject) {\r\n        specialData[eventName] = eventObject\r\n    }));\r\n    return {\r\n        getField: function(eventName, field) {\r\n            return specialData[eventName] && specialData[eventName][field]\r\n        },\r\n        callMethod: function(eventName, methodName, context, args) {\r\n            return specialData[eventName] && specialData[eventName][methodName] && specialData[eventName][methodName].apply(context, args)\r\n        }\r\n    }\r\n}();\r\nvar eventsEngine = injector({\r\n    on: getHandler(normalizeOnArguments(iterate((function(element, eventName, selector, data, handler) {\r\n        var handlersController = getHandlersController(element, eventName);\r\n        handlersController.addHandler(handler, selector, data)\r\n    })))),\r\n    one: getHandler(normalizeOnArguments((function(element, eventName, selector, data, handler) {\r\n        eventsEngine.on(element, eventName, selector, data, (function oneTimeHandler() {\r\n            eventsEngine.off(element, eventName, selector, oneTimeHandler);\r\n            handler.apply(this, arguments)\r\n        }))\r\n    }))),\r\n    off: getHandler(normalizeOffArguments(iterate((function(element, eventName, selector, handler) {\r\n        var handlersController = getHandlersController(element, eventName);\r\n        handlersController.removeHandler(handler, selector)\r\n    })))),\r\n    trigger: getHandler(normalizeTriggerArguments((function(element, event, extraParameters) {\r\n        var eventName = event.type;\r\n        var handlersController = getHandlersController(element, event.type);\r\n        special.callMethod(eventName, \"trigger\", element, [event, extraParameters]);\r\n        handlersController.callHandlers(event, extraParameters);\r\n        var noBubble = special.getField(eventName, \"noBubble\") || event.isPropagationStopped() || -1 !== NO_BUBBLE_EVENTS.indexOf(eventName);\r\n        if (!noBubble) {\r\n            var parents = [];\r\n            ! function getParents(element) {\r\n                var parent = element.parentNode;\r\n                if (parent) {\r\n                    parents.push(parent);\r\n                    getParents(parent)\r\n                }\r\n            }(element);\r\n            parents.push(window);\r\n            var i = 0;\r\n            while (parents[i] && !event.isPropagationStopped()) {\r\n                var parentDataByEvent = getHandlersController(parents[i], event.type);\r\n                parentDataByEvent.callHandlers(extend(event, {\r\n                    currentTarget: parents[i]\r\n                }), extraParameters);\r\n                i++\r\n            }\r\n        }\r\n        if (element.nodeType || isWindow(element)) {\r\n            special.callMethod(eventName, \"_default\", element, [event, extraParameters]);\r\n            callNativeMethod(eventName, element)\r\n        }\r\n    }))),\r\n    triggerHandler: getHandler(normalizeTriggerArguments((function(element, event, extraParameters) {\r\n        var handlersController = getHandlersController(element, event.type);\r\n        handlersController.callHandlers(event, extraParameters)\r\n    })))\r\n});\r\n\r\nfunction applyForEach(args, method) {\r\n    var element = args[0];\r\n    if (!element) {\r\n        return\r\n    }\r\n    if (domAdapter.isNode(element) || isWindow(element)) {\r\n        method.apply(eventsEngine, args)\r\n    } else if (!isString(element) && \"length\" in element) {\r\n        var itemArgs = Array.prototype.slice.call(args, 0);\r\n        Array.prototype.forEach.call(element, (function(itemElement) {\r\n            itemArgs[0] = itemElement;\r\n            applyForEach(itemArgs, method)\r\n        }))\r\n    } else {\r\n        throw errors.Error(\"E0025\")\r\n    }\r\n}\r\n\r\nfunction getHandler(method) {\r\n    return function() {\r\n        applyForEach(arguments, method)\r\n    }\r\n}\r\n\r\nfunction detectPassiveEventHandlersSupport() {\r\n    var isSupported = false;\r\n    try {\r\n        var options = Object.defineProperty({}, \"passive\", {\r\n            get: function() {\r\n                isSupported = true;\r\n                return true\r\n            }\r\n        });\r\n        window.addEventListener(\"test\", null, options)\r\n    } catch (e) {}\r\n    return isSupported\r\n}\r\nvar passiveEventHandlersSupported = callOnce(detectPassiveEventHandlersSupport);\r\nvar contains = (container, element) => {\r\n    if (isWindow(container)) {\r\n        return contains(container.document, element)\r\n    }\r\n    return container.contains ? container.contains(element) : !!(element.compareDocumentPosition(container) & element.DOCUMENT_POSITION_CONTAINS)\r\n};\r\n\r\nfunction getHandlersController(element, eventName) {\r\n    var elementData = elementDataMap.get(element);\r\n    eventName = eventName || \"\";\r\n    var eventNameParts = eventName.split(\".\");\r\n    var namespaces = eventNameParts.slice(1);\r\n    var eventNameIsDefined = !!eventNameParts[0];\r\n    eventName = eventNameParts[0] || EMPTY_EVENT_NAME;\r\n    if (!elementData) {\r\n        elementData = {};\r\n        elementDataMap.set(element, elementData)\r\n    }\r\n    if (!elementData[eventName]) {\r\n        elementData[eventName] = {\r\n            handleObjects: [],\r\n            nativeHandler: null\r\n        }\r\n    }\r\n    var eventData = elementData[eventName];\r\n    return {\r\n        addHandler: function(handler, selector, data) {\r\n            var callHandler = function(e, extraParameters) {\r\n                var handlerArgs = [e];\r\n                var target = e.currentTarget;\r\n                var relatedTarget = e.relatedTarget;\r\n                var secondaryTargetIsInside;\r\n                var result;\r\n                if (eventName in NATIVE_EVENTS_TO_SUBSCRIBE) {\r\n                    secondaryTargetIsInside = relatedTarget && target && (relatedTarget === target || contains(target, relatedTarget))\r\n                }\r\n                if (void 0 !== extraParameters) {\r\n                    handlerArgs.push(extraParameters)\r\n                }\r\n                special.callMethod(eventName, \"handle\", element, [e, data]);\r\n                if (!secondaryTargetIsInside) {\r\n                    result = handler.apply(target, handlerArgs)\r\n                }\r\n                if (false === result) {\r\n                    e.preventDefault();\r\n                    e.stopPropagation()\r\n                }\r\n            };\r\n            var handleObject = {\r\n                handler: handler,\r\n                wrappedHandler: function(e, extraParameters) {\r\n                    if (skipEvent && e.type === skipEvent) {\r\n                        return\r\n                    }\r\n                    e.data = data;\r\n                    e.delegateTarget = element;\r\n                    if (selector) {\r\n                        var currentTarget = e.target;\r\n                        while (currentTarget && currentTarget !== element) {\r\n                            if (matchesSafe(currentTarget, selector)) {\r\n                                e.currentTarget = currentTarget;\r\n                                callHandler(e, extraParameters)\r\n                            }\r\n                            currentTarget = currentTarget.parentNode\r\n                        }\r\n                    } else {\r\n                        e.currentTarget = e.delegateTarget || e.target;\r\n                        callHandler(e, extraParameters)\r\n                    }\r\n                },\r\n                selector: selector,\r\n                type: eventName,\r\n                data: data,\r\n                namespace: namespaces.join(\".\"),\r\n                namespaces: namespaces,\r\n                guid: ++guid\r\n            };\r\n            eventData.handleObjects.push(handleObject);\r\n            var firstHandlerForTheType = 1 === eventData.handleObjects.length;\r\n            var shouldAddNativeListener = firstHandlerForTheType && eventNameIsDefined;\r\n            var nativeListenerOptions;\r\n            if (shouldAddNativeListener) {\r\n                shouldAddNativeListener = !special.callMethod(eventName, \"setup\", element, [data, namespaces, handler])\r\n            }\r\n            if (shouldAddNativeListener) {\r\n                eventData.nativeHandler = getNativeHandler(eventName);\r\n                if (passiveEventHandlersSupported() && forcePassiveFalseEventNames.indexOf(eventName) > -1) {\r\n                    nativeListenerOptions = {\r\n                        passive: false\r\n                    }\r\n                }\r\n                eventData.removeListener = domAdapter.listen(element, NATIVE_EVENTS_TO_SUBSCRIBE[eventName] || eventName, eventData.nativeHandler, nativeListenerOptions)\r\n            }\r\n            special.callMethod(eventName, \"add\", element, [handleObject])\r\n        },\r\n        removeHandler: function(handler, selector) {\r\n            var removeByEventName = function(eventName) {\r\n                var eventData = elementData[eventName];\r\n                if (!eventData.handleObjects.length) {\r\n                    delete elementData[eventName];\r\n                    return\r\n                }\r\n                var removedHandler;\r\n                eventData.handleObjects = eventData.handleObjects.filter((function(handleObject) {\r\n                    var skip = namespaces.length && !isSubset(handleObject.namespaces, namespaces) || handler && handleObject.handler !== handler || selector && handleObject.selector !== selector;\r\n                    if (!skip) {\r\n                        removedHandler = handleObject.handler;\r\n                        special.callMethod(eventName, \"remove\", element, [handleObject])\r\n                    }\r\n                    return skip\r\n                }));\r\n                var lastHandlerForTheType = !eventData.handleObjects.length;\r\n                var shouldRemoveNativeListener = lastHandlerForTheType && eventName !== EMPTY_EVENT_NAME;\r\n                if (shouldRemoveNativeListener) {\r\n                    special.callMethod(eventName, \"teardown\", element, [namespaces, removedHandler]);\r\n                    if (eventData.nativeHandler) {\r\n                        eventData.removeListener()\r\n                    }\r\n                    delete elementData[eventName]\r\n                }\r\n            };\r\n            if (eventNameIsDefined) {\r\n                removeByEventName(eventName)\r\n            } else {\r\n                for (var name in elementData) {\r\n                    removeByEventName(name)\r\n                }\r\n            }\r\n            var elementDataIsEmpty = 0 === Object.keys(elementData).length;\r\n            if (elementDataIsEmpty) {\r\n                elementDataMap.delete(element)\r\n            }\r\n        },\r\n        callHandlers: function(event, extraParameters) {\r\n            var forceStop = false;\r\n            var handleCallback = function(handleObject) {\r\n                if (forceStop) {\r\n                    return\r\n                }\r\n                if (!namespaces.length || isSubset(handleObject.namespaces, namespaces)) {\r\n                    handleObject.wrappedHandler(event, extraParameters);\r\n                    forceStop = event.isImmediatePropagationStopped()\r\n                }\r\n            };\r\n            eventData.handleObjects.forEach(handleCallback);\r\n            if (namespaces.length && elementData[EMPTY_EVENT_NAME]) {\r\n                elementData[EMPTY_EVENT_NAME].handleObjects.forEach(handleCallback)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction getNativeHandler(subscribeName) {\r\n    return function(event, extraParameters) {\r\n        var handlersController = getHandlersController(this, subscribeName);\r\n        event = eventsEngine.Event(event);\r\n        handlersController.callHandlers(event, extraParameters)\r\n    }\r\n}\r\n\r\nfunction isSubset(original, checked) {\r\n    for (var i = 0; i < checked.length; i++) {\r\n        if (original.indexOf(checked[i]) < 0) {\r\n            return false\r\n        }\r\n    }\r\n    return true\r\n}\r\n\r\nfunction normalizeOnArguments(callback) {\r\n    return function(element, eventName, selector, data, handler) {\r\n        if (!handler) {\r\n            handler = data;\r\n            data = void 0\r\n        }\r\n        if (\"string\" !== typeof selector) {\r\n            data = selector;\r\n            selector = void 0\r\n        }\r\n        if (!handler && \"string\" === typeof eventName) {\r\n            handler = data || selector;\r\n            selector = void 0;\r\n            data = void 0\r\n        }\r\n        callback(element, eventName, selector, data, handler)\r\n    }\r\n}\r\n\r\nfunction normalizeOffArguments(callback) {\r\n    return function(element, eventName, selector, handler) {\r\n        if (\"function\" === typeof selector) {\r\n            handler = selector;\r\n            selector = void 0\r\n        }\r\n        callback(element, eventName, selector, handler)\r\n    }\r\n}\r\n\r\nfunction normalizeTriggerArguments(callback) {\r\n    return function(element, src, extraParameters) {\r\n        if (\"string\" === typeof src) {\r\n            src = {\r\n                type: src\r\n            }\r\n        }\r\n        if (!src.target) {\r\n            src.target = element\r\n        }\r\n        src.currentTarget = element;\r\n        if (!src.delegateTarget) {\r\n            src.delegateTarget = element\r\n        }\r\n        if (!src.type && src.originalEvent) {\r\n            src.type = src.originalEvent.type\r\n        }\r\n        callback(element, src instanceof eventsEngine.Event ? src : eventsEngine.Event(src), extraParameters)\r\n    }\r\n}\r\n\r\nfunction normalizeEventArguments(callback) {\r\n    eventsEngine.Event = function(src, config) {\r\n        if (!(this instanceof eventsEngine.Event)) {\r\n            return new eventsEngine.Event(src, config)\r\n        }\r\n        if (!src) {\r\n            src = {}\r\n        }\r\n        if (\"string\" === typeof src) {\r\n            src = {\r\n                type: src\r\n            }\r\n        }\r\n        if (!config) {\r\n            config = {}\r\n        }\r\n        callback.call(this, src, config)\r\n    };\r\n    _extends(eventsEngine.Event.prototype, {\r\n        _propagationStopped: false,\r\n        _immediatePropagationStopped: false,\r\n        _defaultPrevented: false,\r\n        isPropagationStopped: function() {\r\n            return !!(this._propagationStopped || this.originalEvent && this.originalEvent.propagationStopped)\r\n        },\r\n        stopPropagation: function() {\r\n            this._propagationStopped = true;\r\n            this.originalEvent && this.originalEvent.stopPropagation()\r\n        },\r\n        isImmediatePropagationStopped: function() {\r\n            return this._immediatePropagationStopped\r\n        },\r\n        stopImmediatePropagation: function() {\r\n            this.stopPropagation();\r\n            this._immediatePropagationStopped = true;\r\n            this.originalEvent && this.originalEvent.stopImmediatePropagation()\r\n        },\r\n        isDefaultPrevented: function() {\r\n            return !!(this._defaultPrevented || this.originalEvent && this.originalEvent.defaultPrevented)\r\n        },\r\n        preventDefault: function() {\r\n            this._defaultPrevented = true;\r\n            this.originalEvent && this.originalEvent.preventDefault()\r\n        }\r\n    });\r\n    return eventsEngine.Event\r\n}\r\n\r\nfunction iterate(callback) {\r\n    var iterateEventNames = function(element, eventName) {\r\n        if (eventName && eventName.indexOf(\" \") > -1) {\r\n            var args = Array.prototype.slice.call(arguments, 0);\r\n            eventName.split(\" \").forEach((function(eventName) {\r\n                args[1] = eventName;\r\n                callback.apply(this, args)\r\n            }))\r\n        } else {\r\n            callback.apply(this, arguments)\r\n        }\r\n    };\r\n    return function(element, eventName) {\r\n        if (\"object\" === typeof eventName) {\r\n            var args = Array.prototype.slice.call(arguments, 0);\r\n            for (var name in eventName) {\r\n                args[1] = name;\r\n                args[args.length - 1] = eventName[name];\r\n                iterateEventNames.apply(this, args)\r\n            }\r\n        } else {\r\n            iterateEventNames.apply(this, arguments)\r\n        }\r\n    }\r\n}\r\n\r\nfunction callNativeMethod(eventName, element) {\r\n    var nativeMethodName = NATIVE_EVENTS_TO_TRIGGER[eventName] || eventName;\r\n    if (function(eventName, element) {\r\n            return \"click\" === eventName && \"a\" === element.localName\r\n        }(eventName, element)) {\r\n        return\r\n    }\r\n    if (isFunction(element[nativeMethodName])) {\r\n        skipEvent = eventName;\r\n        element[nativeMethodName]();\r\n        skipEvent = void 0\r\n    }\r\n}\r\n\r\nfunction calculateWhich(event) {\r\n    if (function(event) {\r\n            return null == event.which && 0 === event.type.indexOf(\"key\")\r\n        }(event)) {\r\n        return null != event.charCode ? event.charCode : event.keyCode\r\n    }\r\n    if (function(event) {\r\n            return !event.which && void 0 !== event.button && /^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(event.type)\r\n        }(event)) {\r\n        return {\r\n            1: 1,\r\n            2: 3,\r\n            3: 1,\r\n            4: 2\r\n        } [event.button]\r\n    }\r\n    return event.which\r\n}\r\n\r\nfunction initEvent(EventClass) {\r\n    if (EventClass) {\r\n        eventsEngine.Event = EventClass;\r\n        eventsEngine.Event.prototype = EventClass.prototype\r\n    }\r\n}\r\ninitEvent(normalizeEventArguments((function(src, config) {\r\n    var _src$view;\r\n    var srcIsEvent = src instanceof eventsEngine.Event || hasWindow() && src instanceof window.Event || (null === (_src$view = src.view) || void 0 === _src$view ? void 0 : _src$view.Event) && src instanceof src.view.Event;\r\n    if (srcIsEvent) {\r\n        this.originalEvent = src;\r\n        this.type = src.type;\r\n        this.currentTarget = void 0;\r\n        if (Object.prototype.hasOwnProperty.call(src, \"isTrusted\")) {\r\n            this.isTrusted = src.isTrusted\r\n        }\r\n        this.timeStamp = src.timeStamp || Date.now()\r\n    } else {\r\n        _extends(this, src)\r\n    }\r\n    addProperty(\"which\", calculateWhich, this);\r\n    if (0 === src.type.indexOf(\"touch\")) {\r\n        delete config.pageX;\r\n        delete config.pageY\r\n    }\r\n    _extends(this, config);\r\n    this.guid = ++guid\r\n})));\r\n\r\nfunction addProperty(propName, hook, eventInstance) {\r\n    Object.defineProperty(eventInstance || eventsEngine.Event.prototype, propName, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: function() {\r\n            return this.originalEvent && hook(this.originalEvent)\r\n        },\r\n        set: function(value) {\r\n            Object.defineProperty(this, propName, {\r\n                enumerable: true,\r\n                configurable: true,\r\n                writable: true,\r\n                value: value\r\n            })\r\n        }\r\n    })\r\n}\r\nEVENT_PROPERTIES.forEach(prop => addProperty(prop, event => event[prop]));\r\nhookTouchProps(addProperty);\r\nvar beforeSetStrategy = Callbacks();\r\nvar afterSetStrategy = Callbacks();\r\neventsEngine.set = function(engine) {\r\n    beforeSetStrategy.fire();\r\n    eventsEngine.inject(engine);\r\n    initEvent(engine.Event);\r\n    afterSetStrategy.fire()\r\n};\r\neventsEngine.subscribeGlobal = function() {\r\n    applyForEach(arguments, normalizeOnArguments((function() {\r\n        var args = arguments;\r\n        eventsEngine.on.apply(this, args);\r\n        beforeSetStrategy.add((function() {\r\n            var offArgs = Array.prototype.slice.call(args, 0);\r\n            offArgs.splice(3, 1);\r\n            eventsEngine.off.apply(this, offArgs)\r\n        }));\r\n        afterSetStrategy.add((function() {\r\n            eventsEngine.on.apply(this, args)\r\n        }))\r\n    })))\r\n};\r\neventsEngine.forcePassiveFalseEventNames = forcePassiveFalseEventNames;\r\neventsEngine.passiveEventHandlersSupported = passiveEventHandlersSupported;\r\nexport default eventsEngine;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}