{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.base.js)\r\n * Version: 21.2.7\r\n * Build date: Mon Apr 11 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterWidth } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport eventsEngine from \"../../events/core/events_engine\";\nimport { ensureDefined, deferRenderer, noop } from \"../../core/utils/common\";\nimport { findTemplates } from \"../../core/utils/template_manager\";\nimport { getPublicElement } from \"../../core/element\";\nimport domAdapter from \"../../core/dom_adapter\";\nimport { isPlainObject, isFunction, isDefined } from \"../../core/utils/type\";\nimport { when } from \"../../core/utils/deferred\";\nimport { extend } from \"../../core/utils/extend\";\nimport { inArray } from \"../../core/utils/array\";\nimport { each } from \"../../core/utils/iterator\";\nimport Action from \"../../core/action\";\nimport Guid from \"../../core/guid\";\nimport Widget from \"../widget/ui.widget\";\nimport { addNamespace, isCommandKeyPressed } from \"../../events/utils/index\";\nimport pointerEvents from \"../../events/pointer\";\nimport DataHelperMixin from \"../../data_helper\";\nimport CollectionWidgetItem from \"./item\";\nimport { focusable } from \"../widget/selectors\";\nimport messageLocalization from \"../../localization/message\";\nimport holdEvent from \"../../events/hold\";\nimport { compileGetter } from \"../../core/utils/data\";\nimport { name as clickEventName } from \"../../events/click\";\nimport { name as contextMenuEventName } from \"../../events/contextmenu\";\nimport { BindableTemplate } from \"../../core/templates/bindable_template\";\nvar COLLECTION_CLASS = \"dx-collection\";\nvar ITEM_CLASS = \"dx-item\";\nvar CONTENT_CLASS_POSTFIX = \"-content\";\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\nvar ITEM_DATA_KEY = \"dxItemData\";\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\nvar ITEMS_OPTIONS_NAME = \"dxItem\";\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\nvar ANONYMOUS_TEMPLATE_NAME = \"item\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_PAGE_UP = \"pageup\";\nvar FOCUS_PAGE_DOWN = \"pagedown\";\nvar FOCUS_LAST = \"last\";\nvar FOCUS_FIRST = \"first\";\nvar CollectionWidget = Widget.inherit({\n  _activeStateUnit: \".\" + ITEM_CLASS,\n  _supportedKeys: function () {\n    var enter = function (e) {\n      var $itemElement = $(this.option(\"focusedElement\"));\n\n      if (!$itemElement.length) {\n        return;\n      }\n\n      this._itemClickHandler(extend({}, e, {\n        target: $itemElement.get(0),\n        currentTarget: $itemElement.get(0)\n      }));\n    };\n\n    var move = function (location, e) {\n      if (!isCommandKeyPressed(e)) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this._moveFocus(location, e);\n      }\n    };\n\n    return extend(this.callBase(), {\n      space: function (e) {\n        e.preventDefault();\n        enter.call(this, e);\n      },\n      enter: enter,\n      leftArrow: move.bind(this, FOCUS_LEFT),\n      rightArrow: move.bind(this, FOCUS_RIGHT),\n      upArrow: move.bind(this, FOCUS_UP),\n      downArrow: move.bind(this, FOCUS_DOWN),\n      pageUp: move.bind(this, FOCUS_UP),\n      pageDown: move.bind(this, FOCUS_DOWN),\n      home: move.bind(this, FOCUS_FIRST),\n      end: move.bind(this, FOCUS_LAST)\n    });\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), {\n      selectOnFocus: false,\n      loopItemFocus: true,\n      items: [],\n      itemTemplate: \"item\",\n      onItemRendered: null,\n      onItemClick: null,\n      onItemHold: null,\n      itemHoldTimeout: 750,\n      onItemContextMenu: null,\n      onFocusedItemChanged: null,\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      dataSource: null,\n      _itemAttributes: {},\n      itemTemplateProperty: \"template\",\n      focusOnSelectedItem: true,\n      focusedElement: null,\n      displayExpr: void 0,\n      disabledExpr: function (data) {\n        return data ? data.disabled : void 0;\n      },\n      visibleExpr: function (data) {\n        return data ? data.visible : void 0;\n      }\n    });\n  },\n  _init: function () {\n    this._compileDisplayGetter();\n\n    this.callBase();\n\n    this._cleanRenderedItems();\n\n    this._refreshDataSource();\n  },\n  _compileDisplayGetter: function () {\n    var displayExpr = this.option(\"displayExpr\");\n    this._displayGetter = displayExpr ? compileGetter(this.option(\"displayExpr\")) : void 0;\n  },\n  _initTemplates: function () {\n    this._initItemsFromMarkup();\n\n    this._initDefaultItemTemplate();\n\n    this.callBase();\n  },\n  _getAnonymousTemplateName: function () {\n    return ANONYMOUS_TEMPLATE_NAME;\n  },\n  _initDefaultItemTemplate: function () {\n    var fieldsMap = this._getFieldsMap();\n\n    this._templateManager.addDefaultTemplates({\n      item: new BindableTemplate(function ($container, data) {\n        if (isPlainObject(data)) {\n          this._prepareDefaultItemTemplate(data, $container);\n        } else {\n          if (fieldsMap && isFunction(fieldsMap.text)) {\n            data = fieldsMap.text(data);\n          }\n\n          $container.text(String(ensureDefined(data, \"\")));\n        }\n      }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\n    });\n  },\n  _getBindableFields: function () {\n    return [\"text\", \"html\"];\n  },\n  _getFieldsMap: function () {\n    if (this._displayGetter) {\n      return {\n        text: this._displayGetter\n      };\n    }\n  },\n  _prepareDefaultItemTemplate: function (data, $container) {\n    if (isDefined(data.text)) {\n      $container.text(data.text);\n    }\n\n    if (isDefined(data.html)) {\n      $container.html(data.html);\n    }\n  },\n  _initItemsFromMarkup: function () {\n    var rawItems = findTemplates(this.$element(), ITEMS_OPTIONS_NAME);\n\n    if (!rawItems.length || this.option(\"items\").length) {\n      return;\n    }\n\n    var items = rawItems.map(_ref => {\n      var {\n        element: element,\n        options: options\n      } = _ref;\n      var isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\n\n      if (isTemplateRequired) {\n        options.template = this._prepareItemTemplate(element);\n      } else {\n        $(element).remove();\n      }\n\n      return options;\n    });\n    this.option(\"items\", items);\n  },\n  _prepareItemTemplate: function (item) {\n    var templateId = ITEM_TEMPLATE_ID_PREFIX + new Guid();\n    var $template = $(item).detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\n\n    this._saveTemplate(templateId, $template);\n\n    return templateId;\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _cleanRenderedItems: function () {\n    this._renderedItemsCount = 0;\n  },\n  _focusTarget: function () {\n    return this.$element();\n  },\n  _focusInHandler: function (e) {\n    this.callBase.apply(this, arguments);\n\n    if (-1 === inArray(e.target, this._focusTarget())) {\n      return;\n    }\n\n    var $focusedElement = $(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      this._setFocusedItem($focusedElement);\n    } else {\n      var $activeItem = this._getActiveItem();\n\n      if ($activeItem.length) {\n        this.option(\"focusedElement\", getPublicElement($activeItem));\n      }\n    }\n  },\n  _focusOutHandler: function () {\n    this.callBase.apply(this, arguments);\n    var $target = $(this.option(\"focusedElement\"));\n\n    this._updateFocusedItemState($target, false);\n  },\n  _getActiveItem: function (last) {\n    var $focusedElement = $(this.option(\"focusedElement\"));\n\n    if ($focusedElement.length) {\n      return $focusedElement;\n    }\n\n    var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\n\n    var activeElements = this._getActiveElement();\n\n    var lastIndex = activeElements.length - 1;\n\n    if (index < 0) {\n      index = last ? lastIndex : 0;\n    }\n\n    return activeElements.eq(index);\n  },\n  _moveFocus: function (location) {\n    var $items = this._getAvailableItems();\n\n    var $newTarget;\n\n    switch (location) {\n      case FOCUS_PAGE_UP:\n      case FOCUS_UP:\n        $newTarget = this._prevItem($items);\n        break;\n\n      case FOCUS_PAGE_DOWN:\n      case FOCUS_DOWN:\n        $newTarget = this._nextItem($items);\n        break;\n\n      case FOCUS_RIGHT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\n        break;\n\n      case FOCUS_LEFT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\n        break;\n\n      case FOCUS_FIRST:\n        $newTarget = $items.first();\n        break;\n\n      case FOCUS_LAST:\n        $newTarget = $items.last();\n        break;\n\n      default:\n        return false;\n    }\n\n    if (0 !== $newTarget.length) {\n      this.option(\"focusedElement\", getPublicElement($newTarget));\n    }\n  },\n  _getVisibleItems: function ($itemElements) {\n    $itemElements = $itemElements || this._itemElements();\n    return $itemElements.filter(\":visible\");\n  },\n  _getAvailableItems: function ($itemElements) {\n    return this._getVisibleItems($itemElements).not(\".dx-state-disabled\");\n  },\n  _prevItem: function ($items) {\n    var $target = this._getActiveItem();\n\n    var targetIndex = $items.index($target);\n    var $last = $items.last();\n    var $item = $($items[targetIndex - 1]);\n    var loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $last;\n    }\n\n    return $item;\n  },\n  _nextItem: function ($items) {\n    var $target = this._getActiveItem(true);\n\n    var targetIndex = $items.index($target);\n    var $first = $items.first();\n    var $item = $($items[targetIndex + 1]);\n    var loop = this.option(\"loopItemFocus\");\n\n    if (0 === $item.length && loop) {\n      $item = $first;\n    }\n\n    return $item;\n  },\n  _selectFocusedItem: function ($target) {\n    this.selectItem($target);\n  },\n  _updateFocusedItemState: function (target, isFocused, needCleanItemId) {\n    var $target = $(target);\n\n    if ($target.length) {\n      this._refreshActiveDescendant();\n\n      this._refreshItemId($target, needCleanItemId);\n\n      this._toggleFocusClass(isFocused, $target);\n    }\n\n    this._updateParentActiveDescendant();\n  },\n  _refreshActiveDescendant: function ($target) {\n    this.setAria(\"activedescendant\", isDefined(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target);\n  },\n  _refreshItemId: function ($target, needCleanItemId) {\n    if (!needCleanItemId && this.option(\"focusedElement\")) {\n      this.setAria(\"id\", this.getFocusedItemId(), $target);\n    } else {\n      this.setAria(\"id\", null, $target);\n    }\n  },\n  _setFocusedItem: function ($target) {\n    if (!$target || !$target.length) {\n      return;\n    }\n\n    this._updateFocusedItemState($target, true);\n\n    this.onFocusedItemChanged(this.getFocusedItemId());\n\n    if (this.option(\"selectOnFocus\")) {\n      this._selectFocusedItem($target);\n    }\n  },\n  _findItemElementByItem: function (item) {\n    var result = $();\n    var that = this;\n    this.itemElements().each(function () {\n      var $item = $(this);\n\n      if ($item.data(that._itemDataKey()) === item) {\n        result = $item;\n        return false;\n      }\n    });\n    return result;\n  },\n  _getIndexByItem: function (item) {\n    return this.option(\"items\").indexOf(item);\n  },\n  _itemOptionChanged: function (item, property, value, oldValue) {\n    var $item = this._findItemElementByItem(item);\n\n    if (!$item.length) {\n      return;\n    }\n\n    if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\n      this._refreshItem($item, item);\n    }\n\n    var isDisabling = \"disabled\" === property && value;\n\n    if (isDisabling) {\n      this._resetItemFocus($item);\n    }\n  },\n\n  _resetItemFocus($item) {\n    if ($item.is(this.option(\"focusedElement\"))) {\n      this.option(\"focusedElement\", null);\n    }\n  },\n\n  _refreshItem: function ($item) {\n    var itemData = this._getItemData($item);\n\n    var index = $item.data(this._itemIndexKey());\n\n    this._renderItem(this._renderedItemsCount + index, itemData, null, $item);\n  },\n  _updateParentActiveDescendant: noop,\n  _optionChanged: function (args) {\n    if (\"items\" === args.name) {\n      var matches = args.fullName.match(ITEM_PATH_REGEX);\n\n      if (matches && matches.length) {\n        var property = matches[matches.length - 1];\n        var itemPath = args.fullName.replace(\".\" + property, \"\");\n        var item = this.option(itemPath);\n\n        this._itemOptionChanged(item, property, args.value, args.previousValue);\n\n        return;\n      }\n    }\n\n    switch (args.name) {\n      case \"items\":\n      case \"_itemAttributes\":\n      case \"itemTemplateProperty\":\n      case \"useItemTextAsTitle\":\n        this._cleanRenderedItems();\n\n        this._invalidate();\n\n        break;\n\n      case \"dataSource\":\n        this._refreshDataSource();\n\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"noDataText\":\n        this._renderEmptyMessage();\n\n        break;\n\n      case \"itemTemplate\":\n        this._invalidate();\n\n        break;\n\n      case \"onItemRendered\":\n        this._createItemRenderAction();\n\n        break;\n\n      case \"onItemClick\":\n        break;\n\n      case \"onItemHold\":\n      case \"itemHoldTimeout\":\n        this._attachHoldEvent();\n\n        break;\n\n      case \"onItemContextMenu\":\n        this._attachContextMenuEvent();\n\n        break;\n\n      case \"onFocusedItemChanged\":\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n        break;\n\n      case \"selectOnFocus\":\n      case \"loopItemFocus\":\n      case \"focusOnSelectedItem\":\n        break;\n\n      case \"focusedElement\":\n        this._updateFocusedItemState(args.previousValue, false, true);\n\n        this._setFocusedItem($(args.value));\n\n        break;\n\n      case \"displayExpr\":\n        this._compileDisplayGetter();\n\n        this._initDefaultItemTemplate();\n\n        this._invalidate();\n\n        break;\n\n      case \"visibleExpr\":\n      case \"disabledExpr\":\n        this._invalidate();\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  },\n  _invalidate: function () {\n    this.option(\"focusedElement\", null);\n    return this.callBase.apply(this, arguments);\n  },\n  _loadNextPage: function () {\n    var dataSource = this._dataSource;\n\n    this._expectNextPageLoading();\n\n    dataSource.pageIndex(1 + dataSource.pageIndex());\n    return dataSource.load();\n  },\n  _expectNextPageLoading: function () {\n    this._startIndexForAppendedItems = 0;\n  },\n  _expectLastItemLoading: function () {\n    this._startIndexForAppendedItems = -1;\n  },\n  _forgetNextPageLoading: function () {\n    this._startIndexForAppendedItems = null;\n  },\n  _dataSourceChangedHandler: function (newItems) {\n    var items = this.option(\"items\");\n\n    if (this._initialized && items && this._shouldAppendItems()) {\n      this._renderedItemsCount = items.length;\n\n      if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {\n        this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems));\n      }\n\n      this._forgetNextPageLoading();\n\n      this._refreshContent();\n    } else {\n      this.option(\"items\", newItems.slice());\n    }\n  },\n  _refreshContent: function () {\n    this._prepareContent();\n\n    this._renderContent();\n  },\n  _dataSourceLoadErrorHandler: function () {\n    this._forgetNextPageLoading();\n\n    this.option(\"items\", this.option(\"items\"));\n  },\n  _shouldAppendItems: function () {\n    return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend();\n  },\n  _allowDynamicItemsAppend: function () {\n    return false;\n  },\n  _clean: function () {\n    this._cleanFocusState();\n\n    this._cleanItemContainer();\n  },\n  _cleanItemContainer: function () {\n    $(this._itemContainer()).empty();\n  },\n  _dispose: function () {\n    this.callBase();\n    clearTimeout(this._itemFocusTimeout);\n  },\n  _refresh: function () {\n    this._cleanRenderedItems();\n\n    this.callBase.apply(this, arguments);\n  },\n  _itemContainer: function () {\n    return this.$element();\n  },\n  _itemClass: function () {\n    return ITEM_CLASS;\n  },\n  _itemContentClass: function () {\n    return this._itemClass() + CONTENT_CLASS_POSTFIX;\n  },\n  _selectedItemClass: function () {\n    return SELECTED_ITEM_CLASS;\n  },\n  _itemResponseWaitClass: function () {\n    return ITEM_RESPONSE_WAIT_CLASS;\n  },\n  _itemSelector: function () {\n    return \".\" + this._itemClass();\n  },\n  _itemDataKey: function () {\n    return ITEM_DATA_KEY;\n  },\n  _itemIndexKey: function () {\n    return ITEM_INDEX_KEY;\n  },\n  _itemElements: function () {\n    return this._itemContainer().find(this._itemSelector());\n  },\n  _initMarkup: function () {\n    this.callBase();\n    this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\n    this.$element().addClass(COLLECTION_CLASS);\n\n    this._prepareContent();\n  },\n  _prepareContent: deferRenderer(function () {\n    this._renderContentImpl();\n  }),\n  _renderContent: function () {\n    this._fireContentReadyAction();\n  },\n  _render: function () {\n    this.callBase();\n\n    this._attachClickEvent();\n\n    this._attachHoldEvent();\n\n    this._attachContextMenuEvent();\n  },\n  _attachClickEvent: function () {\n    var itemSelector = this._itemSelector();\n\n    var clickEventNamespace = addNamespace(clickEventName, this.NAME);\n    var pointerDownEventNamespace = addNamespace(pointerEvents.down, this.NAME);\n    var that = this;\n    var pointerDownAction = new Action(function (args) {\n      var event = args.event;\n\n      that._itemPointerDownHandler(event);\n    });\n    eventsEngine.off(this._itemContainer(), clickEventNamespace, itemSelector);\n    eventsEngine.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\n    eventsEngine.on(this._itemContainer(), clickEventNamespace, itemSelector, function (e) {\n      this._itemClickHandler(e);\n    }.bind(this));\n    eventsEngine.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, function (e) {\n      pointerDownAction.execute({\n        element: $(e.target),\n        event: e\n      });\n    });\n  },\n  _itemClickHandler: function (e, args, config) {\n    this._itemDXEventHandler(e, \"onItemClick\", args, config);\n  },\n  _itemPointerDownHandler: function (e) {\n    if (!this.option(\"focusStateEnabled\")) {\n      return;\n    }\n\n    this._itemFocusHandler = function () {\n      clearTimeout(this._itemFocusTimeout);\n      this._itemFocusHandler = null;\n\n      if (e.isDefaultPrevented()) {\n        return;\n      }\n\n      var $target = $(e.target);\n      var $closestItem = $target.closest(this._itemElements());\n\n      var $closestFocusable = this._closestFocusable($target);\n\n      if ($closestItem.length && $closestFocusable && -1 !== inArray($closestFocusable.get(0), this._focusTarget())) {\n        this.option(\"focusedElement\", getPublicElement($closestItem));\n      }\n    }.bind(this);\n\n    this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this));\n  },\n  _closestFocusable: function ($target) {\n    if ($target.is(focusable)) {\n      return $target;\n    } else {\n      $target = $target.parent();\n\n      while ($target.length && !domAdapter.isDocument($target.get(0))) {\n        if ($target.is(focusable)) {\n          return $target;\n        }\n\n        $target = $target.parent();\n      }\n    }\n  },\n  _forcePointerDownFocus: function () {\n    this._itemFocusHandler && this._itemFocusHandler();\n  },\n  _updateFocusState: function () {\n    this.callBase.apply(this, arguments);\n\n    this._forcePointerDownFocus();\n  },\n  _attachHoldEvent: function () {\n    var $itemContainer = this._itemContainer();\n\n    var itemSelector = this._itemSelector();\n\n    var eventName = addNamespace(holdEvent.name, this.NAME);\n    eventsEngine.off($itemContainer, eventName, itemSelector);\n    eventsEngine.on($itemContainer, eventName, itemSelector, {\n      timeout: this._getHoldTimeout()\n    }, this._itemHoldHandler.bind(this));\n  },\n  _getHoldTimeout: function () {\n    return this.option(\"itemHoldTimeout\");\n  },\n  _shouldFireHoldEvent: function () {\n    return this.hasActionSubscription(\"onItemHold\");\n  },\n  _itemHoldHandler: function (e) {\n    if (this._shouldFireHoldEvent()) {\n      this._itemDXEventHandler(e, \"onItemHold\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _attachContextMenuEvent: function () {\n    var $itemContainer = this._itemContainer();\n\n    var itemSelector = this._itemSelector();\n\n    var eventName = addNamespace(contextMenuEventName, this.NAME);\n    eventsEngine.off($itemContainer, eventName, itemSelector);\n    eventsEngine.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this));\n  },\n  _shouldFireContextMenuEvent: function () {\n    return this.hasActionSubscription(\"onItemContextMenu\");\n  },\n  _itemContextMenuHandler: function (e) {\n    if (this._shouldFireContextMenuEvent()) {\n      this._itemDXEventHandler(e, \"onItemContextMenu\");\n    } else {\n      e.cancel = true;\n    }\n  },\n  _renderContentImpl: function () {\n    var items = this.option(\"items\") || [];\n\n    if (this._renderedItemsCount) {\n      this._renderItems(items.slice(this._renderedItemsCount));\n    } else {\n      this._renderItems(items);\n    }\n  },\n  _renderItems: function (items) {\n    if (items.length) {\n      each(items, function (index, itemData) {\n        this._renderItem(this._renderedItemsCount + index, itemData);\n      }.bind(this));\n    }\n\n    this._renderEmptyMessage();\n  },\n  _renderItem: function (index, itemData, $container, $itemToReplace) {\n    var _index$item;\n\n    var itemIndex = null !== (_index$item = null === index || void 0 === index ? void 0 : index.item) && void 0 !== _index$item ? _index$item : index;\n    $container = $container || this._itemContainer();\n\n    var $itemFrame = this._renderItemFrame(itemIndex, itemData, $container, $itemToReplace);\n\n    this._setElementData($itemFrame, itemData, itemIndex);\n\n    $itemFrame.attr(this.option(\"_itemAttributes\"));\n\n    this._attachItemClickEvent(itemData, $itemFrame);\n\n    var $itemContent = this._getItemContent($itemFrame);\n\n    var renderContentPromise = this._renderItemContent({\n      index: itemIndex,\n      itemData: itemData,\n      container: getPublicElement($itemContent),\n      contentClass: this._itemContentClass(),\n      defaultTemplateName: this.option(\"itemTemplate\")\n    });\n\n    var that = this;\n    when(renderContentPromise).done(function ($itemContent) {\n      that._postprocessRenderItem({\n        itemElement: $itemFrame,\n        itemContent: $itemContent,\n        itemData: itemData,\n        itemIndex: itemIndex\n      });\n\n      that._executeItemRenderAction(index, itemData, getPublicElement($itemFrame));\n    });\n    return $itemFrame;\n  },\n  _getItemContent: function ($itemFrame) {\n    var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\n    $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\n    return $itemContent;\n  },\n  _attachItemClickEvent: function (itemData, $itemElement) {\n    if (!itemData || !itemData.onClick) {\n      return;\n    }\n\n    eventsEngine.on($itemElement, clickEventName, function (e) {\n      this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\n        event: e\n      });\n    }.bind(this));\n  },\n  _renderItemContent: function (args) {\n    var itemTemplateName = this._getItemTemplateName(args);\n\n    var itemTemplate = this._getTemplate(itemTemplateName);\n\n    this._addItemContentClasses(args);\n\n    var $templateResult = $(this._createItemByTemplate(itemTemplate, args));\n\n    if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\n      return args.container;\n    }\n\n    return this._renderItemContentByNode(args, $templateResult);\n  },\n  _renderItemContentByNode: function (args, $node) {\n    $(args.container).replaceWith($node);\n    args.container = getPublicElement($node);\n\n    this._addItemContentClasses(args);\n\n    return $node;\n  },\n  _addItemContentClasses: function (args) {\n    var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\n    $(args.container).addClass(classes.join(\" \"));\n  },\n  _appendItemToContainer: function ($container, $itemFrame, index) {\n    $itemFrame.appendTo($container);\n  },\n  _renderItemFrame: function (index, itemData, $container, $itemToReplace) {\n    var $itemFrame = $(\"<div>\");\n    new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\n\n    if ($itemToReplace && $itemToReplace.length) {\n      $itemToReplace.replaceWith($itemFrame);\n    } else {\n      this._appendItemToContainer.call(this, $container, $itemFrame, index);\n    }\n\n    if (this.option(\"useItemTextAsTitle\")) {\n      var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\n      $itemFrame.attr(\"title\", displayValue);\n    }\n\n    return $itemFrame;\n  },\n  _itemOptions: function () {\n    var that = this;\n    return {\n      watchMethod: function () {\n        return that.option(\"integrationOptions.watchMethod\");\n      },\n      owner: that,\n      fieldGetter: function (field) {\n        var expr = that.option(field + \"Expr\");\n        var getter = compileGetter(expr);\n        return getter;\n      }\n    };\n  },\n  _postprocessRenderItem: noop,\n  _executeItemRenderAction: function (index, itemData, itemElement) {\n    this._getItemRenderAction()({\n      itemElement: itemElement,\n      itemIndex: index,\n      itemData: itemData\n    });\n  },\n  _setElementData: function (element, data, index) {\n    element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index);\n  },\n  _createItemRenderAction: function () {\n    return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\n      element: this.element(),\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n  },\n  _getItemRenderAction: function () {\n    return this._itemRenderAction || this._createItemRenderAction();\n  },\n  _getItemTemplateName: function (args) {\n    var data = args.itemData;\n    var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\n    var template = data && data[templateProperty];\n    return template || args.defaultTemplateName;\n  },\n  _createItemByTemplate: function (itemTemplate, renderArgs) {\n    return itemTemplate.render({\n      model: renderArgs.itemData,\n      container: renderArgs.container,\n      index: renderArgs.index\n    });\n  },\n  _emptyMessageContainer: function () {\n    return this._itemContainer();\n  },\n  _renderEmptyMessage: function (items) {\n    items = items || this.option(\"items\");\n    var noDataText = this.option(\"noDataText\");\n\n    var hideNoData = !noDataText || items && items.length || this._isDataSourceLoading();\n\n    if (hideNoData && this._$noData) {\n      this._$noData.remove();\n\n      this._$noData = null;\n      this.setAria(\"label\", void 0);\n    }\n\n    if (!hideNoData) {\n      this._$noData = this._$noData || $(\"<div>\").addClass(\"dx-empty-message\");\n\n      this._$noData.appendTo(this._emptyMessageContainer()).html(noDataText);\n\n      this.setAria(\"label\", noDataText);\n    }\n\n    this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData);\n  },\n  _itemDXEventHandler: function (dxEvent, handlerOptionName, actionArgs, actionConfig) {\n    this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {\n      event: dxEvent\n    }), actionConfig);\n  },\n  _itemEventHandler: function (initiator, handlerOptionName, actionArgs, actionConfig) {\n    var action = this._createActionByOption(handlerOptionName, extend({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerByHandler: function (initiator, handler, actionArgs, actionConfig) {\n    var action = this._createAction(handler, extend({\n      validatingTargetName: \"itemElement\"\n    }, actionConfig));\n\n    return this._itemEventHandlerImpl(initiator, action, actionArgs);\n  },\n  _itemEventHandlerImpl: function (initiator, action, actionArgs) {\n    var $itemElement = this._closestItemElement($(initiator));\n\n    var args = extend({}, actionArgs);\n    return action(extend(actionArgs, this._extendActionArgs($itemElement), args));\n  },\n  _extendActionArgs: function ($itemElement) {\n    return {\n      itemElement: getPublicElement($itemElement),\n      itemIndex: this._itemElements().index($itemElement),\n      itemData: this._getItemData($itemElement)\n    };\n  },\n  _closestItemElement: function ($element) {\n    return $($element).closest(this._itemSelector());\n  },\n  _getItemData: function (itemElement) {\n    return $(itemElement).data(this._itemDataKey());\n  },\n  _getSummaryItemsWidth: function (items, includeMargin) {\n    var result = 0;\n\n    if (items) {\n      each(items, function (_, item) {\n        result += getOuterWidth(item, includeMargin || false);\n      });\n    }\n\n    return result;\n  },\n  getFocusedItemId: function () {\n    if (!this._focusedItemId) {\n      this._focusedItemId = \"dx-\" + new Guid();\n    }\n\n    return this._focusedItemId;\n  },\n  itemElements: function () {\n    return this._itemElements();\n  },\n  itemsContainer: function () {\n    return this._itemContainer();\n  }\n}).include(DataHelperMixin);\nCollectionWidget.ItemClass = CollectionWidgetItem;\nexport default CollectionWidget;","map":{"version":3,"names":["getOuterWidth","$","eventsEngine","ensureDefined","deferRenderer","noop","findTemplates","getPublicElement","domAdapter","isPlainObject","isFunction","isDefined","when","extend","inArray","each","Action","Guid","Widget","addNamespace","isCommandKeyPressed","pointerEvents","DataHelperMixin","CollectionWidgetItem","focusable","messageLocalization","holdEvent","compileGetter","name","clickEventName","contextMenuEventName","BindableTemplate","COLLECTION_CLASS","ITEM_CLASS","CONTENT_CLASS_POSTFIX","ITEM_CONTENT_PLACEHOLDER_CLASS","ITEM_DATA_KEY","ITEM_INDEX_KEY","ITEM_TEMPLATE_ID_PREFIX","ITEMS_OPTIONS_NAME","SELECTED_ITEM_CLASS","ITEM_RESPONSE_WAIT_CLASS","EMPTY_COLLECTION","TEMPLATE_WRAPPER_CLASS","ITEM_PATH_REGEX","ANONYMOUS_TEMPLATE_NAME","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_PAGE_UP","FOCUS_PAGE_DOWN","FOCUS_LAST","FOCUS_FIRST","CollectionWidget","inherit","_activeStateUnit","_supportedKeys","enter","e","$itemElement","option","length","_itemClickHandler","target","get","currentTarget","move","location","preventDefault","stopPropagation","_moveFocus","callBase","space","call","leftArrow","bind","rightArrow","upArrow","downArrow","pageUp","pageDown","home","end","_getDefaultOptions","selectOnFocus","loopItemFocus","items","itemTemplate","onItemRendered","onItemClick","onItemHold","itemHoldTimeout","onItemContextMenu","onFocusedItemChanged","noDataText","format","dataSource","_itemAttributes","itemTemplateProperty","focusOnSelectedItem","focusedElement","displayExpr","disabledExpr","data","disabled","visibleExpr","visible","_init","_compileDisplayGetter","_cleanRenderedItems","_refreshDataSource","_displayGetter","_initTemplates","_initItemsFromMarkup","_initDefaultItemTemplate","_getAnonymousTemplateName","fieldsMap","_getFieldsMap","_templateManager","addDefaultTemplates","item","$container","_prepareDefaultItemTemplate","text","String","_getBindableFields","html","rawItems","$element","map","_ref","element","options","isTemplateRequired","test","innerHTML","template","_prepareItemTemplate","remove","templateId","$template","detach","clone","removeAttr","addClass","_saveTemplate","_dataSourceOptions","paginate","_renderedItemsCount","_focusTarget","_focusInHandler","apply","arguments","$focusedElement","_setFocusedItem","$activeItem","_getActiveItem","_focusOutHandler","$target","_updateFocusedItemState","last","index","activeElements","_getActiveElement","lastIndex","eq","$items","_getAvailableItems","$newTarget","_prevItem","_nextItem","first","_getVisibleItems","$itemElements","_itemElements","filter","not","targetIndex","$last","$item","loop","$first","_selectFocusedItem","selectItem","isFocused","needCleanItemId","_refreshActiveDescendant","_refreshItemId","_toggleFocusClass","_updateParentActiveDescendant","setAria","getFocusedItemId","_findItemElementByItem","result","that","itemElements","_itemDataKey","_getIndexByItem","indexOf","_itemOptionChanged","property","value","oldValue","constructor","ItemClass","getInstance","setDataField","_refreshItem","isDisabling","_resetItemFocus","is","itemData","_getItemData","_itemIndexKey","_renderItem","_optionChanged","args","matches","fullName","match","itemPath","replace","previousValue","_invalidate","_renderEmptyMessage","_createItemRenderAction","_attachHoldEvent","_attachContextMenuEvent","_createActionByOption","_loadNextPage","_dataSource","_expectNextPageLoading","pageIndex","load","_startIndexForAppendedItems","_expectLastItemLoading","_forgetNextPageLoading","_dataSourceChangedHandler","newItems","_initialized","_shouldAppendItems","_isLastPage","concat","slice","_refreshContent","_prepareContent","_renderContent","_dataSourceLoadErrorHandler","_allowDynamicItemsAppend","_clean","_cleanFocusState","_cleanItemContainer","_itemContainer","empty","_dispose","clearTimeout","_itemFocusTimeout","_refresh","_itemClass","_itemContentClass","_selectedItemClass","_itemResponseWaitClass","_itemSelector","find","_initMarkup","_renderContentImpl","_fireContentReadyAction","_render","_attachClickEvent","itemSelector","clickEventNamespace","NAME","pointerDownEventNamespace","down","pointerDownAction","event","_itemPointerDownHandler","off","on","execute","config","_itemDXEventHandler","_itemFocusHandler","isDefaultPrevented","$closestItem","closest","$closestFocusable","_closestFocusable","setTimeout","_forcePointerDownFocus","parent","isDocument","_updateFocusState","$itemContainer","eventName","timeout","_getHoldTimeout","_itemHoldHandler","_shouldFireHoldEvent","hasActionSubscription","cancel","_itemContextMenuHandler","_shouldFireContextMenuEvent","_renderItems","$itemToReplace","_index$item","itemIndex","$itemFrame","_renderItemFrame","_setElementData","attr","_attachItemClickEvent","$itemContent","_getItemContent","renderContentPromise","_renderItemContent","container","contentClass","defaultTemplateName","done","_postprocessRenderItem","itemElement","itemContent","_executeItemRenderAction","removeClass","onClick","_itemEventHandlerByHandler","itemTemplateName","_getItemTemplateName","_getTemplate","_addItemContentClasses","$templateResult","_createItemByTemplate","hasClass","_renderItemContentByNode","$node","replaceWith","classes","join","_appendItemToContainer","appendTo","_itemOptions","displayValue","watchMethod","owner","fieldGetter","field","expr","getter","_getItemRenderAction","_itemRenderAction","excludeValidators","category","templateProperty","renderArgs","render","model","_emptyMessageContainer","hideNoData","_isDataSourceLoading","_$noData","toggleClass","dxEvent","handlerOptionName","actionArgs","actionConfig","_itemEventHandler","initiator","action","validatingTargetName","_itemEventHandlerImpl","handler","_createAction","_closestItemElement","_extendActionArgs","_getSummaryItemsWidth","includeMargin","_","_focusedItemId","itemsContainer","include"],"sources":["/Users/gaylemcclure/Dev/water-app/node_modules/devextreme/esm/ui/collection/ui.collection_widget.base.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/collection/ui.collection_widget.base.js)\r\n * Version: 21.2.7\r\n * Build date: Mon Apr 11 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterWidth\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport {\r\n    ensureDefined,\r\n    deferRenderer,\r\n    noop\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    findTemplates\r\n} from \"../../core/utils/template_manager\";\r\nimport {\r\n    getPublicElement\r\n} from \"../../core/element\";\r\nimport domAdapter from \"../../core/dom_adapter\";\r\nimport {\r\n    isPlainObject,\r\n    isFunction,\r\n    isDefined\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    when\r\n} from \"../../core/utils/deferred\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    inArray\r\n} from \"../../core/utils/array\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport Action from \"../../core/action\";\r\nimport Guid from \"../../core/guid\";\r\nimport Widget from \"../widget/ui.widget\";\r\nimport {\r\n    addNamespace,\r\n    isCommandKeyPressed\r\n} from \"../../events/utils/index\";\r\nimport pointerEvents from \"../../events/pointer\";\r\nimport DataHelperMixin from \"../../data_helper\";\r\nimport CollectionWidgetItem from \"./item\";\r\nimport {\r\n    focusable\r\n} from \"../widget/selectors\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport holdEvent from \"../../events/hold\";\r\nimport {\r\n    compileGetter\r\n} from \"../../core/utils/data\";\r\nimport {\r\n    name as clickEventName\r\n} from \"../../events/click\";\r\nimport {\r\n    name as contextMenuEventName\r\n} from \"../../events/contextmenu\";\r\nimport {\r\n    BindableTemplate\r\n} from \"../../core/templates/bindable_template\";\r\nvar COLLECTION_CLASS = \"dx-collection\";\r\nvar ITEM_CLASS = \"dx-item\";\r\nvar CONTENT_CLASS_POSTFIX = \"-content\";\r\nvar ITEM_CONTENT_PLACEHOLDER_CLASS = \"dx-item-content-placeholder\";\r\nvar ITEM_DATA_KEY = \"dxItemData\";\r\nvar ITEM_INDEX_KEY = \"dxItemIndex\";\r\nvar ITEM_TEMPLATE_ID_PREFIX = \"tmpl-\";\r\nvar ITEMS_OPTIONS_NAME = \"dxItem\";\r\nvar SELECTED_ITEM_CLASS = \"dx-item-selected\";\r\nvar ITEM_RESPONSE_WAIT_CLASS = \"dx-item-response-wait\";\r\nvar EMPTY_COLLECTION = \"dx-empty-collection\";\r\nvar TEMPLATE_WRAPPER_CLASS = \"dx-template-wrapper\";\r\nvar ITEM_PATH_REGEX = /^([^.]+\\[\\d+\\]\\.)+([\\w.]+)$/;\r\nvar ANONYMOUS_TEMPLATE_NAME = \"item\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_PAGE_UP = \"pageup\";\r\nvar FOCUS_PAGE_DOWN = \"pagedown\";\r\nvar FOCUS_LAST = \"last\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar CollectionWidget = Widget.inherit({\r\n    _activeStateUnit: \".\" + ITEM_CLASS,\r\n    _supportedKeys: function() {\r\n        var enter = function(e) {\r\n            var $itemElement = $(this.option(\"focusedElement\"));\r\n            if (!$itemElement.length) {\r\n                return\r\n            }\r\n            this._itemClickHandler(extend({}, e, {\r\n                target: $itemElement.get(0),\r\n                currentTarget: $itemElement.get(0)\r\n            }))\r\n        };\r\n        var move = function(location, e) {\r\n            if (!isCommandKeyPressed(e)) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                this._moveFocus(location, e)\r\n            }\r\n        };\r\n        return extend(this.callBase(), {\r\n            space: function(e) {\r\n                e.preventDefault();\r\n                enter.call(this, e)\r\n            },\r\n            enter: enter,\r\n            leftArrow: move.bind(this, FOCUS_LEFT),\r\n            rightArrow: move.bind(this, FOCUS_RIGHT),\r\n            upArrow: move.bind(this, FOCUS_UP),\r\n            downArrow: move.bind(this, FOCUS_DOWN),\r\n            pageUp: move.bind(this, FOCUS_UP),\r\n            pageDown: move.bind(this, FOCUS_DOWN),\r\n            home: move.bind(this, FOCUS_FIRST),\r\n            end: move.bind(this, FOCUS_LAST)\r\n        })\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), {\r\n            selectOnFocus: false,\r\n            loopItemFocus: true,\r\n            items: [],\r\n            itemTemplate: \"item\",\r\n            onItemRendered: null,\r\n            onItemClick: null,\r\n            onItemHold: null,\r\n            itemHoldTimeout: 750,\r\n            onItemContextMenu: null,\r\n            onFocusedItemChanged: null,\r\n            noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\r\n            dataSource: null,\r\n            _itemAttributes: {},\r\n            itemTemplateProperty: \"template\",\r\n            focusOnSelectedItem: true,\r\n            focusedElement: null,\r\n            displayExpr: void 0,\r\n            disabledExpr: function(data) {\r\n                return data ? data.disabled : void 0\r\n            },\r\n            visibleExpr: function(data) {\r\n                return data ? data.visible : void 0\r\n            }\r\n        })\r\n    },\r\n    _init: function() {\r\n        this._compileDisplayGetter();\r\n        this.callBase();\r\n        this._cleanRenderedItems();\r\n        this._refreshDataSource()\r\n    },\r\n    _compileDisplayGetter: function() {\r\n        var displayExpr = this.option(\"displayExpr\");\r\n        this._displayGetter = displayExpr ? compileGetter(this.option(\"displayExpr\")) : void 0\r\n    },\r\n    _initTemplates: function() {\r\n        this._initItemsFromMarkup();\r\n        this._initDefaultItemTemplate();\r\n        this.callBase()\r\n    },\r\n    _getAnonymousTemplateName: function() {\r\n        return ANONYMOUS_TEMPLATE_NAME\r\n    },\r\n    _initDefaultItemTemplate: function() {\r\n        var fieldsMap = this._getFieldsMap();\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new BindableTemplate(function($container, data) {\r\n                if (isPlainObject(data)) {\r\n                    this._prepareDefaultItemTemplate(data, $container)\r\n                } else {\r\n                    if (fieldsMap && isFunction(fieldsMap.text)) {\r\n                        data = fieldsMap.text(data)\r\n                    }\r\n                    $container.text(String(ensureDefined(data, \"\")))\r\n                }\r\n            }.bind(this), this._getBindableFields(), this.option(\"integrationOptions.watchMethod\"), fieldsMap)\r\n        })\r\n    },\r\n    _getBindableFields: function() {\r\n        return [\"text\", \"html\"]\r\n    },\r\n    _getFieldsMap: function() {\r\n        if (this._displayGetter) {\r\n            return {\r\n                text: this._displayGetter\r\n            }\r\n        }\r\n    },\r\n    _prepareDefaultItemTemplate: function(data, $container) {\r\n        if (isDefined(data.text)) {\r\n            $container.text(data.text)\r\n        }\r\n        if (isDefined(data.html)) {\r\n            $container.html(data.html)\r\n        }\r\n    },\r\n    _initItemsFromMarkup: function() {\r\n        var rawItems = findTemplates(this.$element(), ITEMS_OPTIONS_NAME);\r\n        if (!rawItems.length || this.option(\"items\").length) {\r\n            return\r\n        }\r\n        var items = rawItems.map(_ref => {\r\n            var {\r\n                element: element,\r\n                options: options\r\n            } = _ref;\r\n            var isTemplateRequired = /\\S/.test(element.innerHTML) && !options.template;\r\n            if (isTemplateRequired) {\r\n                options.template = this._prepareItemTemplate(element)\r\n            } else {\r\n                $(element).remove()\r\n            }\r\n            return options\r\n        });\r\n        this.option(\"items\", items)\r\n    },\r\n    _prepareItemTemplate: function(item) {\r\n        var templateId = ITEM_TEMPLATE_ID_PREFIX + new Guid;\r\n        var $template = $(item).detach().clone().removeAttr(\"data-options\").addClass(TEMPLATE_WRAPPER_CLASS);\r\n        this._saveTemplate(templateId, $template);\r\n        return templateId\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _cleanRenderedItems: function() {\r\n        this._renderedItemsCount = 0\r\n    },\r\n    _focusTarget: function() {\r\n        return this.$element()\r\n    },\r\n    _focusInHandler: function(e) {\r\n        this.callBase.apply(this, arguments);\r\n        if (-1 === inArray(e.target, this._focusTarget())) {\r\n            return\r\n        }\r\n        var $focusedElement = $(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            this._setFocusedItem($focusedElement)\r\n        } else {\r\n            var $activeItem = this._getActiveItem();\r\n            if ($activeItem.length) {\r\n                this.option(\"focusedElement\", getPublicElement($activeItem))\r\n            }\r\n        }\r\n    },\r\n    _focusOutHandler: function() {\r\n        this.callBase.apply(this, arguments);\r\n        var $target = $(this.option(\"focusedElement\"));\r\n        this._updateFocusedItemState($target, false)\r\n    },\r\n    _getActiveItem: function(last) {\r\n        var $focusedElement = $(this.option(\"focusedElement\"));\r\n        if ($focusedElement.length) {\r\n            return $focusedElement\r\n        }\r\n        var index = this.option(\"focusOnSelectedItem\") ? this.option(\"selectedIndex\") : 0;\r\n        var activeElements = this._getActiveElement();\r\n        var lastIndex = activeElements.length - 1;\r\n        if (index < 0) {\r\n            index = last ? lastIndex : 0\r\n        }\r\n        return activeElements.eq(index)\r\n    },\r\n    _moveFocus: function(location) {\r\n        var $items = this._getAvailableItems();\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_PAGE_UP:\r\n            case FOCUS_UP:\r\n                $newTarget = this._prevItem($items);\r\n                break;\r\n            case FOCUS_PAGE_DOWN:\r\n            case FOCUS_DOWN:\r\n                $newTarget = this._nextItem($items);\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._prevItem($items) : this._nextItem($items);\r\n                break;\r\n            case FOCUS_LEFT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._nextItem($items) : this._prevItem($items);\r\n                break;\r\n            case FOCUS_FIRST:\r\n                $newTarget = $items.first();\r\n                break;\r\n            case FOCUS_LAST:\r\n                $newTarget = $items.last();\r\n                break;\r\n            default:\r\n                return false\r\n        }\r\n        if (0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", getPublicElement($newTarget))\r\n        }\r\n    },\r\n    _getVisibleItems: function($itemElements) {\r\n        $itemElements = $itemElements || this._itemElements();\r\n        return $itemElements.filter(\":visible\")\r\n    },\r\n    _getAvailableItems: function($itemElements) {\r\n        return this._getVisibleItems($itemElements).not(\".dx-state-disabled\")\r\n    },\r\n    _prevItem: function($items) {\r\n        var $target = this._getActiveItem();\r\n        var targetIndex = $items.index($target);\r\n        var $last = $items.last();\r\n        var $item = $($items[targetIndex - 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $last\r\n        }\r\n        return $item\r\n    },\r\n    _nextItem: function($items) {\r\n        var $target = this._getActiveItem(true);\r\n        var targetIndex = $items.index($target);\r\n        var $first = $items.first();\r\n        var $item = $($items[targetIndex + 1]);\r\n        var loop = this.option(\"loopItemFocus\");\r\n        if (0 === $item.length && loop) {\r\n            $item = $first\r\n        }\r\n        return $item\r\n    },\r\n    _selectFocusedItem: function($target) {\r\n        this.selectItem($target)\r\n    },\r\n    _updateFocusedItemState: function(target, isFocused, needCleanItemId) {\r\n        var $target = $(target);\r\n        if ($target.length) {\r\n            this._refreshActiveDescendant();\r\n            this._refreshItemId($target, needCleanItemId);\r\n            this._toggleFocusClass(isFocused, $target)\r\n        }\r\n        this._updateParentActiveDescendant()\r\n    },\r\n    _refreshActiveDescendant: function($target) {\r\n        this.setAria(\"activedescendant\", isDefined(this.option(\"focusedElement\")) ? this.getFocusedItemId() : null, $target)\r\n    },\r\n    _refreshItemId: function($target, needCleanItemId) {\r\n        if (!needCleanItemId && this.option(\"focusedElement\")) {\r\n            this.setAria(\"id\", this.getFocusedItemId(), $target)\r\n        } else {\r\n            this.setAria(\"id\", null, $target)\r\n        }\r\n    },\r\n    _setFocusedItem: function($target) {\r\n        if (!$target || !$target.length) {\r\n            return\r\n        }\r\n        this._updateFocusedItemState($target, true);\r\n        this.onFocusedItemChanged(this.getFocusedItemId());\r\n        if (this.option(\"selectOnFocus\")) {\r\n            this._selectFocusedItem($target)\r\n        }\r\n    },\r\n    _findItemElementByItem: function(item) {\r\n        var result = $();\r\n        var that = this;\r\n        this.itemElements().each((function() {\r\n            var $item = $(this);\r\n            if ($item.data(that._itemDataKey()) === item) {\r\n                result = $item;\r\n                return false\r\n            }\r\n        }));\r\n        return result\r\n    },\r\n    _getIndexByItem: function(item) {\r\n        return this.option(\"items\").indexOf(item)\r\n    },\r\n    _itemOptionChanged: function(item, property, value, oldValue) {\r\n        var $item = this._findItemElementByItem(item);\r\n        if (!$item.length) {\r\n            return\r\n        }\r\n        if (!this.constructor.ItemClass.getInstance($item).setDataField(property, value)) {\r\n            this._refreshItem($item, item)\r\n        }\r\n        var isDisabling = \"disabled\" === property && value;\r\n        if (isDisabling) {\r\n            this._resetItemFocus($item)\r\n        }\r\n    },\r\n    _resetItemFocus($item) {\r\n        if ($item.is(this.option(\"focusedElement\"))) {\r\n            this.option(\"focusedElement\", null)\r\n        }\r\n    },\r\n    _refreshItem: function($item) {\r\n        var itemData = this._getItemData($item);\r\n        var index = $item.data(this._itemIndexKey());\r\n        this._renderItem(this._renderedItemsCount + index, itemData, null, $item)\r\n    },\r\n    _updateParentActiveDescendant: noop,\r\n    _optionChanged: function(args) {\r\n        if (\"items\" === args.name) {\r\n            var matches = args.fullName.match(ITEM_PATH_REGEX);\r\n            if (matches && matches.length) {\r\n                var property = matches[matches.length - 1];\r\n                var itemPath = args.fullName.replace(\".\" + property, \"\");\r\n                var item = this.option(itemPath);\r\n                this._itemOptionChanged(item, property, args.value, args.previousValue);\r\n                return\r\n            }\r\n        }\r\n        switch (args.name) {\r\n            case \"items\":\r\n            case \"_itemAttributes\":\r\n            case \"itemTemplateProperty\":\r\n            case \"useItemTextAsTitle\":\r\n                this._cleanRenderedItems();\r\n                this._invalidate();\r\n                break;\r\n            case \"dataSource\":\r\n                this._refreshDataSource();\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"noDataText\":\r\n                this._renderEmptyMessage();\r\n                break;\r\n            case \"itemTemplate\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onItemRendered\":\r\n                this._createItemRenderAction();\r\n                break;\r\n            case \"onItemClick\":\r\n                break;\r\n            case \"onItemHold\":\r\n            case \"itemHoldTimeout\":\r\n                this._attachHoldEvent();\r\n                break;\r\n            case \"onItemContextMenu\":\r\n                this._attachContextMenuEvent();\r\n                break;\r\n            case \"onFocusedItemChanged\":\r\n                this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n                break;\r\n            case \"selectOnFocus\":\r\n            case \"loopItemFocus\":\r\n            case \"focusOnSelectedItem\":\r\n                break;\r\n            case \"focusedElement\":\r\n                this._updateFocusedItemState(args.previousValue, false, true);\r\n                this._setFocusedItem($(args.value));\r\n                break;\r\n            case \"displayExpr\":\r\n                this._compileDisplayGetter();\r\n                this._initDefaultItemTemplate();\r\n                this._invalidate();\r\n                break;\r\n            case \"visibleExpr\":\r\n            case \"disabledExpr\":\r\n                this._invalidate();\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    },\r\n    _invalidate: function() {\r\n        this.option(\"focusedElement\", null);\r\n        return this.callBase.apply(this, arguments)\r\n    },\r\n    _loadNextPage: function() {\r\n        var dataSource = this._dataSource;\r\n        this._expectNextPageLoading();\r\n        dataSource.pageIndex(1 + dataSource.pageIndex());\r\n        return dataSource.load()\r\n    },\r\n    _expectNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = 0\r\n    },\r\n    _expectLastItemLoading: function() {\r\n        this._startIndexForAppendedItems = -1\r\n    },\r\n    _forgetNextPageLoading: function() {\r\n        this._startIndexForAppendedItems = null\r\n    },\r\n    _dataSourceChangedHandler: function(newItems) {\r\n        var items = this.option(\"items\");\r\n        if (this._initialized && items && this._shouldAppendItems()) {\r\n            this._renderedItemsCount = items.length;\r\n            if (!this._isLastPage() || -1 !== this._startIndexForAppendedItems) {\r\n                this.option().items = items.concat(newItems.slice(this._startIndexForAppendedItems))\r\n            }\r\n            this._forgetNextPageLoading();\r\n            this._refreshContent()\r\n        } else {\r\n            this.option(\"items\", newItems.slice())\r\n        }\r\n    },\r\n    _refreshContent: function() {\r\n        this._prepareContent();\r\n        this._renderContent()\r\n    },\r\n    _dataSourceLoadErrorHandler: function() {\r\n        this._forgetNextPageLoading();\r\n        this.option(\"items\", this.option(\"items\"))\r\n    },\r\n    _shouldAppendItems: function() {\r\n        return null != this._startIndexForAppendedItems && this._allowDynamicItemsAppend()\r\n    },\r\n    _allowDynamicItemsAppend: function() {\r\n        return false\r\n    },\r\n    _clean: function() {\r\n        this._cleanFocusState();\r\n        this._cleanItemContainer()\r\n    },\r\n    _cleanItemContainer: function() {\r\n        $(this._itemContainer()).empty()\r\n    },\r\n    _dispose: function() {\r\n        this.callBase();\r\n        clearTimeout(this._itemFocusTimeout)\r\n    },\r\n    _refresh: function() {\r\n        this._cleanRenderedItems();\r\n        this.callBase.apply(this, arguments)\r\n    },\r\n    _itemContainer: function() {\r\n        return this.$element()\r\n    },\r\n    _itemClass: function() {\r\n        return ITEM_CLASS\r\n    },\r\n    _itemContentClass: function() {\r\n        return this._itemClass() + CONTENT_CLASS_POSTFIX\r\n    },\r\n    _selectedItemClass: function() {\r\n        return SELECTED_ITEM_CLASS\r\n    },\r\n    _itemResponseWaitClass: function() {\r\n        return ITEM_RESPONSE_WAIT_CLASS\r\n    },\r\n    _itemSelector: function() {\r\n        return \".\" + this._itemClass()\r\n    },\r\n    _itemDataKey: function() {\r\n        return ITEM_DATA_KEY\r\n    },\r\n    _itemIndexKey: function() {\r\n        return ITEM_INDEX_KEY\r\n    },\r\n    _itemElements: function() {\r\n        return this._itemContainer().find(this._itemSelector())\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this.onFocusedItemChanged = this._createActionByOption(\"onFocusedItemChanged\");\r\n        this.$element().addClass(COLLECTION_CLASS);\r\n        this._prepareContent()\r\n    },\r\n    _prepareContent: deferRenderer((function() {\r\n        this._renderContentImpl()\r\n    })),\r\n    _renderContent: function() {\r\n        this._fireContentReadyAction()\r\n    },\r\n    _render: function() {\r\n        this.callBase();\r\n        this._attachClickEvent();\r\n        this._attachHoldEvent();\r\n        this._attachContextMenuEvent()\r\n    },\r\n    _attachClickEvent: function() {\r\n        var itemSelector = this._itemSelector();\r\n        var clickEventNamespace = addNamespace(clickEventName, this.NAME);\r\n        var pointerDownEventNamespace = addNamespace(pointerEvents.down, this.NAME);\r\n        var that = this;\r\n        var pointerDownAction = new Action((function(args) {\r\n            var event = args.event;\r\n            that._itemPointerDownHandler(event)\r\n        }));\r\n        eventsEngine.off(this._itemContainer(), clickEventNamespace, itemSelector);\r\n        eventsEngine.off(this._itemContainer(), pointerDownEventNamespace, itemSelector);\r\n        eventsEngine.on(this._itemContainer(), clickEventNamespace, itemSelector, function(e) {\r\n            this._itemClickHandler(e)\r\n        }.bind(this));\r\n        eventsEngine.on(this._itemContainer(), pointerDownEventNamespace, itemSelector, (function(e) {\r\n            pointerDownAction.execute({\r\n                element: $(e.target),\r\n                event: e\r\n            })\r\n        }))\r\n    },\r\n    _itemClickHandler: function(e, args, config) {\r\n        this._itemDXEventHandler(e, \"onItemClick\", args, config)\r\n    },\r\n    _itemPointerDownHandler: function(e) {\r\n        if (!this.option(\"focusStateEnabled\")) {\r\n            return\r\n        }\r\n        this._itemFocusHandler = function() {\r\n            clearTimeout(this._itemFocusTimeout);\r\n            this._itemFocusHandler = null;\r\n            if (e.isDefaultPrevented()) {\r\n                return\r\n            }\r\n            var $target = $(e.target);\r\n            var $closestItem = $target.closest(this._itemElements());\r\n            var $closestFocusable = this._closestFocusable($target);\r\n            if ($closestItem.length && $closestFocusable && -1 !== inArray($closestFocusable.get(0), this._focusTarget())) {\r\n                this.option(\"focusedElement\", getPublicElement($closestItem))\r\n            }\r\n        }.bind(this);\r\n        this._itemFocusTimeout = setTimeout(this._forcePointerDownFocus.bind(this))\r\n    },\r\n    _closestFocusable: function($target) {\r\n        if ($target.is(focusable)) {\r\n            return $target\r\n        } else {\r\n            $target = $target.parent();\r\n            while ($target.length && !domAdapter.isDocument($target.get(0))) {\r\n                if ($target.is(focusable)) {\r\n                    return $target\r\n                }\r\n                $target = $target.parent()\r\n            }\r\n        }\r\n    },\r\n    _forcePointerDownFocus: function() {\r\n        this._itemFocusHandler && this._itemFocusHandler()\r\n    },\r\n    _updateFocusState: function() {\r\n        this.callBase.apply(this, arguments);\r\n        this._forcePointerDownFocus()\r\n    },\r\n    _attachHoldEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = addNamespace(holdEvent.name, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, itemSelector);\r\n        eventsEngine.on($itemContainer, eventName, itemSelector, {\r\n            timeout: this._getHoldTimeout()\r\n        }, this._itemHoldHandler.bind(this))\r\n    },\r\n    _getHoldTimeout: function() {\r\n        return this.option(\"itemHoldTimeout\")\r\n    },\r\n    _shouldFireHoldEvent: function() {\r\n        return this.hasActionSubscription(\"onItemHold\")\r\n    },\r\n    _itemHoldHandler: function(e) {\r\n        if (this._shouldFireHoldEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemHold\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _attachContextMenuEvent: function() {\r\n        var $itemContainer = this._itemContainer();\r\n        var itemSelector = this._itemSelector();\r\n        var eventName = addNamespace(contextMenuEventName, this.NAME);\r\n        eventsEngine.off($itemContainer, eventName, itemSelector);\r\n        eventsEngine.on($itemContainer, eventName, itemSelector, this._itemContextMenuHandler.bind(this))\r\n    },\r\n    _shouldFireContextMenuEvent: function() {\r\n        return this.hasActionSubscription(\"onItemContextMenu\")\r\n    },\r\n    _itemContextMenuHandler: function(e) {\r\n        if (this._shouldFireContextMenuEvent()) {\r\n            this._itemDXEventHandler(e, \"onItemContextMenu\")\r\n        } else {\r\n            e.cancel = true\r\n        }\r\n    },\r\n    _renderContentImpl: function() {\r\n        var items = this.option(\"items\") || [];\r\n        if (this._renderedItemsCount) {\r\n            this._renderItems(items.slice(this._renderedItemsCount))\r\n        } else {\r\n            this._renderItems(items)\r\n        }\r\n    },\r\n    _renderItems: function(items) {\r\n        if (items.length) {\r\n            each(items, function(index, itemData) {\r\n                this._renderItem(this._renderedItemsCount + index, itemData)\r\n            }.bind(this))\r\n        }\r\n        this._renderEmptyMessage()\r\n    },\r\n    _renderItem: function(index, itemData, $container, $itemToReplace) {\r\n        var _index$item;\r\n        var itemIndex = null !== (_index$item = null === index || void 0 === index ? void 0 : index.item) && void 0 !== _index$item ? _index$item : index;\r\n        $container = $container || this._itemContainer();\r\n        var $itemFrame = this._renderItemFrame(itemIndex, itemData, $container, $itemToReplace);\r\n        this._setElementData($itemFrame, itemData, itemIndex);\r\n        $itemFrame.attr(this.option(\"_itemAttributes\"));\r\n        this._attachItemClickEvent(itemData, $itemFrame);\r\n        var $itemContent = this._getItemContent($itemFrame);\r\n        var renderContentPromise = this._renderItemContent({\r\n            index: itemIndex,\r\n            itemData: itemData,\r\n            container: getPublicElement($itemContent),\r\n            contentClass: this._itemContentClass(),\r\n            defaultTemplateName: this.option(\"itemTemplate\")\r\n        });\r\n        var that = this;\r\n        when(renderContentPromise).done((function($itemContent) {\r\n            that._postprocessRenderItem({\r\n                itemElement: $itemFrame,\r\n                itemContent: $itemContent,\r\n                itemData: itemData,\r\n                itemIndex: itemIndex\r\n            });\r\n            that._executeItemRenderAction(index, itemData, getPublicElement($itemFrame))\r\n        }));\r\n        return $itemFrame\r\n    },\r\n    _getItemContent: function($itemFrame) {\r\n        var $itemContent = $itemFrame.find(\".\" + ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        $itemContent.removeClass(ITEM_CONTENT_PLACEHOLDER_CLASS);\r\n        return $itemContent\r\n    },\r\n    _attachItemClickEvent: function(itemData, $itemElement) {\r\n        if (!itemData || !itemData.onClick) {\r\n            return\r\n        }\r\n        eventsEngine.on($itemElement, clickEventName, function(e) {\r\n            this._itemEventHandlerByHandler($itemElement, itemData.onClick, {\r\n                event: e\r\n            })\r\n        }.bind(this))\r\n    },\r\n    _renderItemContent: function(args) {\r\n        var itemTemplateName = this._getItemTemplateName(args);\r\n        var itemTemplate = this._getTemplate(itemTemplateName);\r\n        this._addItemContentClasses(args);\r\n        var $templateResult = $(this._createItemByTemplate(itemTemplate, args));\r\n        if (!$templateResult.hasClass(TEMPLATE_WRAPPER_CLASS)) {\r\n            return args.container\r\n        }\r\n        return this._renderItemContentByNode(args, $templateResult)\r\n    },\r\n    _renderItemContentByNode: function(args, $node) {\r\n        $(args.container).replaceWith($node);\r\n        args.container = getPublicElement($node);\r\n        this._addItemContentClasses(args);\r\n        return $node\r\n    },\r\n    _addItemContentClasses: function(args) {\r\n        var classes = [ITEM_CLASS + CONTENT_CLASS_POSTFIX, args.contentClass];\r\n        $(args.container).addClass(classes.join(\" \"))\r\n    },\r\n    _appendItemToContainer: function($container, $itemFrame, index) {\r\n        $itemFrame.appendTo($container)\r\n    },\r\n    _renderItemFrame: function(index, itemData, $container, $itemToReplace) {\r\n        var $itemFrame = $(\"<div>\");\r\n        new this.constructor.ItemClass($itemFrame, this._itemOptions(), itemData || {});\r\n        if ($itemToReplace && $itemToReplace.length) {\r\n            $itemToReplace.replaceWith($itemFrame)\r\n        } else {\r\n            this._appendItemToContainer.call(this, $container, $itemFrame, index)\r\n        }\r\n        if (this.option(\"useItemTextAsTitle\")) {\r\n            var displayValue = this._displayGetter ? this._displayGetter(itemData) : itemData;\r\n            $itemFrame.attr(\"title\", displayValue)\r\n        }\r\n        return $itemFrame\r\n    },\r\n    _itemOptions: function() {\r\n        var that = this;\r\n        return {\r\n            watchMethod: function() {\r\n                return that.option(\"integrationOptions.watchMethod\")\r\n            },\r\n            owner: that,\r\n            fieldGetter: function(field) {\r\n                var expr = that.option(field + \"Expr\");\r\n                var getter = compileGetter(expr);\r\n                return getter\r\n            }\r\n        }\r\n    },\r\n    _postprocessRenderItem: noop,\r\n    _executeItemRenderAction: function(index, itemData, itemElement) {\r\n        this._getItemRenderAction()({\r\n            itemElement: itemElement,\r\n            itemIndex: index,\r\n            itemData: itemData\r\n        })\r\n    },\r\n    _setElementData: function(element, data, index) {\r\n        element.addClass([ITEM_CLASS, this._itemClass()].join(\" \")).data(this._itemDataKey(), data).data(this._itemIndexKey(), index)\r\n    },\r\n    _createItemRenderAction: function() {\r\n        return this._itemRenderAction = this._createActionByOption(\"onItemRendered\", {\r\n            element: this.element(),\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        })\r\n    },\r\n    _getItemRenderAction: function() {\r\n        return this._itemRenderAction || this._createItemRenderAction()\r\n    },\r\n    _getItemTemplateName: function(args) {\r\n        var data = args.itemData;\r\n        var templateProperty = args.templateProperty || this.option(\"itemTemplateProperty\");\r\n        var template = data && data[templateProperty];\r\n        return template || args.defaultTemplateName\r\n    },\r\n    _createItemByTemplate: function(itemTemplate, renderArgs) {\r\n        return itemTemplate.render({\r\n            model: renderArgs.itemData,\r\n            container: renderArgs.container,\r\n            index: renderArgs.index\r\n        })\r\n    },\r\n    _emptyMessageContainer: function() {\r\n        return this._itemContainer()\r\n    },\r\n    _renderEmptyMessage: function(items) {\r\n        items = items || this.option(\"items\");\r\n        var noDataText = this.option(\"noDataText\");\r\n        var hideNoData = !noDataText || items && items.length || this._isDataSourceLoading();\r\n        if (hideNoData && this._$noData) {\r\n            this._$noData.remove();\r\n            this._$noData = null;\r\n            this.setAria(\"label\", void 0)\r\n        }\r\n        if (!hideNoData) {\r\n            this._$noData = this._$noData || $(\"<div>\").addClass(\"dx-empty-message\");\r\n            this._$noData.appendTo(this._emptyMessageContainer()).html(noDataText);\r\n            this.setAria(\"label\", noDataText)\r\n        }\r\n        this.$element().toggleClass(EMPTY_COLLECTION, !hideNoData)\r\n    },\r\n    _itemDXEventHandler: function(dxEvent, handlerOptionName, actionArgs, actionConfig) {\r\n        this._itemEventHandler(dxEvent.target, handlerOptionName, extend(actionArgs, {\r\n            event: dxEvent\r\n        }), actionConfig)\r\n    },\r\n    _itemEventHandler: function(initiator, handlerOptionName, actionArgs, actionConfig) {\r\n        var action = this._createActionByOption(handlerOptionName, extend({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerByHandler: function(initiator, handler, actionArgs, actionConfig) {\r\n        var action = this._createAction(handler, extend({\r\n            validatingTargetName: \"itemElement\"\r\n        }, actionConfig));\r\n        return this._itemEventHandlerImpl(initiator, action, actionArgs)\r\n    },\r\n    _itemEventHandlerImpl: function(initiator, action, actionArgs) {\r\n        var $itemElement = this._closestItemElement($(initiator));\r\n        var args = extend({}, actionArgs);\r\n        return action(extend(actionArgs, this._extendActionArgs($itemElement), args))\r\n    },\r\n    _extendActionArgs: function($itemElement) {\r\n        return {\r\n            itemElement: getPublicElement($itemElement),\r\n            itemIndex: this._itemElements().index($itemElement),\r\n            itemData: this._getItemData($itemElement)\r\n        }\r\n    },\r\n    _closestItemElement: function($element) {\r\n        return $($element).closest(this._itemSelector())\r\n    },\r\n    _getItemData: function(itemElement) {\r\n        return $(itemElement).data(this._itemDataKey())\r\n    },\r\n    _getSummaryItemsWidth: function(items, includeMargin) {\r\n        var result = 0;\r\n        if (items) {\r\n            each(items, (function(_, item) {\r\n                result += getOuterWidth(item, includeMargin || false)\r\n            }))\r\n        }\r\n        return result\r\n    },\r\n    getFocusedItemId: function() {\r\n        if (!this._focusedItemId) {\r\n            this._focusedItemId = \"dx-\" + new Guid\r\n        }\r\n        return this._focusedItemId\r\n    },\r\n    itemElements: function() {\r\n        return this._itemElements()\r\n    },\r\n    itemsContainer: function() {\r\n        return this._itemContainer()\r\n    }\r\n}).include(DataHelperMixin);\r\nCollectionWidget.ItemClass = CollectionWidgetItem;\r\nexport default CollectionWidget;\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACIA,aADJ,QAEO,uBAFP;AAGA,OAAOC,CAAP,MAAc,qBAAd;AACA,OAAOC,YAAP,MAAyB,iCAAzB;AACA,SACIC,aADJ,EAEIC,aAFJ,EAGIC,IAHJ,QAIO,yBAJP;AAKA,SACIC,aADJ,QAEO,mCAFP;AAGA,SACIC,gBADJ,QAEO,oBAFP;AAGA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,SACIC,aADJ,EAEIC,UAFJ,EAGIC,SAHJ,QAIO,uBAJP;AAKA,SACIC,IADJ,QAEO,2BAFP;AAGA,SACIC,MADJ,QAEO,yBAFP;AAGA,SACIC,OADJ,QAEO,wBAFP;AAGA,SACIC,IADJ,QAEO,2BAFP;AAGA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,SACIC,YADJ,EAEIC,mBAFJ,QAGO,0BAHP;AAIA,OAAOC,aAAP,MAA0B,sBAA1B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,oBAAP,MAAiC,QAAjC;AACA,SACIC,SADJ,QAEO,qBAFP;AAGA,OAAOC,mBAAP,MAAgC,4BAAhC;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,SACIC,aADJ,QAEO,uBAFP;AAGA,SACIC,IAAI,IAAIC,cADZ,QAEO,oBAFP;AAGA,SACID,IAAI,IAAIE,oBADZ,QAEO,0BAFP;AAGA,SACIC,gBADJ,QAEO,wCAFP;AAGA,IAAIC,gBAAgB,GAAG,eAAvB;AACA,IAAIC,UAAU,GAAG,SAAjB;AACA,IAAIC,qBAAqB,GAAG,UAA5B;AACA,IAAIC,8BAA8B,GAAG,6BAArC;AACA,IAAIC,aAAa,GAAG,YAApB;AACA,IAAIC,cAAc,GAAG,aAArB;AACA,IAAIC,uBAAuB,GAAG,OAA9B;AACA,IAAIC,kBAAkB,GAAG,QAAzB;AACA,IAAIC,mBAAmB,GAAG,kBAA1B;AACA,IAAIC,wBAAwB,GAAG,uBAA/B;AACA,IAAIC,gBAAgB,GAAG,qBAAvB;AACA,IAAIC,sBAAsB,GAAG,qBAA7B;AACA,IAAIC,eAAe,GAAG,6BAAtB;AACA,IAAIC,uBAAuB,GAAG,MAA9B;AACA,IAAIC,QAAQ,GAAG,IAAf;AACA,IAAIC,UAAU,GAAG,MAAjB;AACA,IAAIC,UAAU,GAAG,MAAjB;AACA,IAAIC,WAAW,GAAG,OAAlB;AACA,IAAIC,aAAa,GAAG,QAApB;AACA,IAAIC,eAAe,GAAG,UAAtB;AACA,IAAIC,UAAU,GAAG,MAAjB;AACA,IAAIC,WAAW,GAAG,OAAlB;AACA,IAAIC,gBAAgB,GAAGpC,MAAM,CAACqC,OAAP,CAAe;EAClCC,gBAAgB,EAAE,MAAMvB,UADU;EAElCwB,cAAc,EAAE,YAAW;IACvB,IAAIC,KAAK,GAAG,UAASC,CAAT,EAAY;MACpB,IAAIC,YAAY,GAAG3D,CAAC,CAAC,KAAK4D,MAAL,CAAY,gBAAZ,CAAD,CAApB;;MACA,IAAI,CAACD,YAAY,CAACE,MAAlB,EAA0B;QACtB;MACH;;MACD,KAAKC,iBAAL,CAAuBlD,MAAM,CAAC,EAAD,EAAK8C,CAAL,EAAQ;QACjCK,MAAM,EAAEJ,YAAY,CAACK,GAAb,CAAiB,CAAjB,CADyB;QAEjCC,aAAa,EAAEN,YAAY,CAACK,GAAb,CAAiB,CAAjB;MAFkB,CAAR,CAA7B;IAIH,CATD;;IAUA,IAAIE,IAAI,GAAG,UAASC,QAAT,EAAmBT,CAAnB,EAAsB;MAC7B,IAAI,CAACvC,mBAAmB,CAACuC,CAAD,CAAxB,EAA6B;QACzBA,CAAC,CAACU,cAAF;QACAV,CAAC,CAACW,eAAF;;QACA,KAAKC,UAAL,CAAgBH,QAAhB,EAA0BT,CAA1B;MACH;IACJ,CAND;;IAOA,OAAO9C,MAAM,CAAC,KAAK2D,QAAL,EAAD,EAAkB;MAC3BC,KAAK,EAAE,UAASd,CAAT,EAAY;QACfA,CAAC,CAACU,cAAF;QACAX,KAAK,CAACgB,IAAN,CAAW,IAAX,EAAiBf,CAAjB;MACH,CAJ0B;MAK3BD,KAAK,EAAEA,KALoB;MAM3BiB,SAAS,EAAER,IAAI,CAACS,IAAL,CAAU,IAAV,EAAgB5B,UAAhB,CANgB;MAO3B6B,UAAU,EAAEV,IAAI,CAACS,IAAL,CAAU,IAAV,EAAgB3B,WAAhB,CAPe;MAQ3B6B,OAAO,EAAEX,IAAI,CAACS,IAAL,CAAU,IAAV,EAAgB9B,QAAhB,CARkB;MAS3BiC,SAAS,EAAEZ,IAAI,CAACS,IAAL,CAAU,IAAV,EAAgB7B,UAAhB,CATgB;MAU3BiC,MAAM,EAAEb,IAAI,CAACS,IAAL,CAAU,IAAV,EAAgB9B,QAAhB,CAVmB;MAW3BmC,QAAQ,EAAEd,IAAI,CAACS,IAAL,CAAU,IAAV,EAAgB7B,UAAhB,CAXiB;MAY3BmC,IAAI,EAAEf,IAAI,CAACS,IAAL,CAAU,IAAV,EAAgBvB,WAAhB,CAZqB;MAa3B8B,GAAG,EAAEhB,IAAI,CAACS,IAAL,CAAU,IAAV,EAAgBxB,UAAhB;IAbsB,CAAlB,CAAb;EAeH,CAnCiC;EAoClCgC,kBAAkB,EAAE,YAAW;IAC3B,OAAOvE,MAAM,CAAC,KAAK2D,QAAL,EAAD,EAAkB;MAC3Ba,aAAa,EAAE,KADY;MAE3BC,aAAa,EAAE,IAFY;MAG3BC,KAAK,EAAE,EAHoB;MAI3BC,YAAY,EAAE,MAJa;MAK3BC,cAAc,EAAE,IALW;MAM3BC,WAAW,EAAE,IANc;MAO3BC,UAAU,EAAE,IAPe;MAQ3BC,eAAe,EAAE,GARU;MAS3BC,iBAAiB,EAAE,IATQ;MAU3BC,oBAAoB,EAAE,IAVK;MAW3BC,UAAU,EAAEtE,mBAAmB,CAACuE,MAApB,CAA2B,+BAA3B,CAXe;MAY3BC,UAAU,EAAE,IAZe;MAa3BC,eAAe,EAAE,EAbU;MAc3BC,oBAAoB,EAAE,UAdK;MAe3BC,mBAAmB,EAAE,IAfM;MAgB3BC,cAAc,EAAE,IAhBW;MAiB3BC,WAAW,EAAE,KAAK,CAjBS;MAkB3BC,YAAY,EAAE,UAASC,IAAT,EAAe;QACzB,OAAOA,IAAI,GAAGA,IAAI,CAACC,QAAR,GAAmB,KAAK,CAAnC;MACH,CApB0B;MAqB3BC,WAAW,EAAE,UAASF,IAAT,EAAe;QACxB,OAAOA,IAAI,GAAGA,IAAI,CAACG,OAAR,GAAkB,KAAK,CAAlC;MACH;IAvB0B,CAAlB,CAAb;EAyBH,CA9DiC;EA+DlCC,KAAK,EAAE,YAAW;IACd,KAAKC,qBAAL;;IACA,KAAKrC,QAAL;;IACA,KAAKsC,mBAAL;;IACA,KAAKC,kBAAL;EACH,CApEiC;EAqElCF,qBAAqB,EAAE,YAAW;IAC9B,IAAIP,WAAW,GAAG,KAAKzC,MAAL,CAAY,aAAZ,CAAlB;IACA,KAAKmD,cAAL,GAAsBV,WAAW,GAAG3E,aAAa,CAAC,KAAKkC,MAAL,CAAY,aAAZ,CAAD,CAAhB,GAA+C,KAAK,CAArF;EACH,CAxEiC;EAyElCoD,cAAc,EAAE,YAAW;IACvB,KAAKC,oBAAL;;IACA,KAAKC,wBAAL;;IACA,KAAK3C,QAAL;EACH,CA7EiC;EA8ElC4C,yBAAyB,EAAE,YAAW;IAClC,OAAOvE,uBAAP;EACH,CAhFiC;EAiFlCsE,wBAAwB,EAAE,YAAW;IACjC,IAAIE,SAAS,GAAG,KAAKC,aAAL,EAAhB;;IACA,KAAKC,gBAAL,CAAsBC,mBAAtB,CAA0C;MACtCC,IAAI,EAAE,IAAI1F,gBAAJ,CAAqB,UAAS2F,UAAT,EAAqBlB,IAArB,EAA2B;QAClD,IAAI/F,aAAa,CAAC+F,IAAD,CAAjB,EAAyB;UACrB,KAAKmB,2BAAL,CAAiCnB,IAAjC,EAAuCkB,UAAvC;QACH,CAFD,MAEO;UACH,IAAIL,SAAS,IAAI3G,UAAU,CAAC2G,SAAS,CAACO,IAAX,CAA3B,EAA6C;YACzCpB,IAAI,GAAGa,SAAS,CAACO,IAAV,CAAepB,IAAf,CAAP;UACH;;UACDkB,UAAU,CAACE,IAAX,CAAgBC,MAAM,CAAC1H,aAAa,CAACqG,IAAD,EAAO,EAAP,CAAd,CAAtB;QACH;MACJ,CAT0B,CASzB5B,IATyB,CASpB,IAToB,CAArB,EASQ,KAAKkD,kBAAL,EATR,EASmC,KAAKjE,MAAL,CAAY,gCAAZ,CATnC,EASkFwD,SATlF;IADgC,CAA1C;EAYH,CA/FiC;EAgGlCS,kBAAkB,EAAE,YAAW;IAC3B,OAAO,CAAC,MAAD,EAAS,MAAT,CAAP;EACH,CAlGiC;EAmGlCR,aAAa,EAAE,YAAW;IACtB,IAAI,KAAKN,cAAT,EAAyB;MACrB,OAAO;QACHY,IAAI,EAAE,KAAKZ;MADR,CAAP;IAGH;EACJ,CAzGiC;EA0GlCW,2BAA2B,EAAE,UAASnB,IAAT,EAAekB,UAAf,EAA2B;IACpD,IAAI/G,SAAS,CAAC6F,IAAI,CAACoB,IAAN,CAAb,EAA0B;MACtBF,UAAU,CAACE,IAAX,CAAgBpB,IAAI,CAACoB,IAArB;IACH;;IACD,IAAIjH,SAAS,CAAC6F,IAAI,CAACuB,IAAN,CAAb,EAA0B;MACtBL,UAAU,CAACK,IAAX,CAAgBvB,IAAI,CAACuB,IAArB;IACH;EACJ,CAjHiC;EAkHlCb,oBAAoB,EAAE,YAAW;IAC7B,IAAIc,QAAQ,GAAG1H,aAAa,CAAC,KAAK2H,QAAL,EAAD,EAAkB1F,kBAAlB,CAA5B;;IACA,IAAI,CAACyF,QAAQ,CAAClE,MAAV,IAAoB,KAAKD,MAAL,CAAY,OAAZ,EAAqBC,MAA7C,EAAqD;MACjD;IACH;;IACD,IAAIyB,KAAK,GAAGyC,QAAQ,CAACE,GAAT,CAAaC,IAAI,IAAI;MAC7B,IAAI;QACAC,OAAO,EAAEA,OADT;QAEAC,OAAO,EAAEA;MAFT,IAGAF,IAHJ;MAIA,IAAIG,kBAAkB,GAAG,KAAKC,IAAL,CAAUH,OAAO,CAACI,SAAlB,KAAgC,CAACH,OAAO,CAACI,QAAlE;;MACA,IAAIH,kBAAJ,EAAwB;QACpBD,OAAO,CAACI,QAAR,GAAmB,KAAKC,oBAAL,CAA0BN,OAA1B,CAAnB;MACH,CAFD,MAEO;QACHnI,CAAC,CAACmI,OAAD,CAAD,CAAWO,MAAX;MACH;;MACD,OAAON,OAAP;IACH,CAZW,CAAZ;IAaA,KAAKxE,MAAL,CAAY,OAAZ,EAAqB0B,KAArB;EACH,CArIiC;EAsIlCmD,oBAAoB,EAAE,UAASjB,IAAT,EAAe;IACjC,IAAImB,UAAU,GAAGtG,uBAAuB,GAAG,IAAIrB,IAAJ,EAA3C;IACA,IAAI4H,SAAS,GAAG5I,CAAC,CAACwH,IAAD,CAAD,CAAQqB,MAAR,GAAiBC,KAAjB,GAAyBC,UAAzB,CAAoC,cAApC,EAAoDC,QAApD,CAA6DtG,sBAA7D,CAAhB;;IACA,KAAKuG,aAAL,CAAmBN,UAAnB,EAA+BC,SAA/B;;IACA,OAAOD,UAAP;EACH,CA3IiC;EA4IlCO,kBAAkB,EAAE,YAAW;IAC3B,OAAO;MACHC,QAAQ,EAAE;IADP,CAAP;EAGH,CAhJiC;EAiJlCtC,mBAAmB,EAAE,YAAW;IAC5B,KAAKuC,mBAAL,GAA2B,CAA3B;EACH,CAnJiC;EAoJlCC,YAAY,EAAE,YAAW;IACrB,OAAO,KAAKrB,QAAL,EAAP;EACH,CAtJiC;EAuJlCsB,eAAe,EAAE,UAAS5F,CAAT,EAAY;IACzB,KAAKa,QAAL,CAAcgF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;IACA,IAAI,CAAC,CAAD,KAAO3I,OAAO,CAAC6C,CAAC,CAACK,MAAH,EAAW,KAAKsF,YAAL,EAAX,CAAlB,EAAmD;MAC/C;IACH;;IACD,IAAII,eAAe,GAAGzJ,CAAC,CAAC,KAAK4D,MAAL,CAAY,gBAAZ,CAAD,CAAvB;;IACA,IAAI6F,eAAe,CAAC5F,MAApB,EAA4B;MACxB,KAAK6F,eAAL,CAAqBD,eAArB;IACH,CAFD,MAEO;MACH,IAAIE,WAAW,GAAG,KAAKC,cAAL,EAAlB;;MACA,IAAID,WAAW,CAAC9F,MAAhB,EAAwB;QACpB,KAAKD,MAAL,CAAY,gBAAZ,EAA8BtD,gBAAgB,CAACqJ,WAAD,CAA9C;MACH;IACJ;EACJ,CArKiC;EAsKlCE,gBAAgB,EAAE,YAAW;IACzB,KAAKtF,QAAL,CAAcgF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;IACA,IAAIM,OAAO,GAAG9J,CAAC,CAAC,KAAK4D,MAAL,CAAY,gBAAZ,CAAD,CAAf;;IACA,KAAKmG,uBAAL,CAA6BD,OAA7B,EAAsC,KAAtC;EACH,CA1KiC;EA2KlCF,cAAc,EAAE,UAASI,IAAT,EAAe;IAC3B,IAAIP,eAAe,GAAGzJ,CAAC,CAAC,KAAK4D,MAAL,CAAY,gBAAZ,CAAD,CAAvB;;IACA,IAAI6F,eAAe,CAAC5F,MAApB,EAA4B;MACxB,OAAO4F,eAAP;IACH;;IACD,IAAIQ,KAAK,GAAG,KAAKrG,MAAL,CAAY,qBAAZ,IAAqC,KAAKA,MAAL,CAAY,eAAZ,CAArC,GAAoE,CAAhF;;IACA,IAAIsG,cAAc,GAAG,KAAKC,iBAAL,EAArB;;IACA,IAAIC,SAAS,GAAGF,cAAc,CAACrG,MAAf,GAAwB,CAAxC;;IACA,IAAIoG,KAAK,GAAG,CAAZ,EAAe;MACXA,KAAK,GAAGD,IAAI,GAAGI,SAAH,GAAe,CAA3B;IACH;;IACD,OAAOF,cAAc,CAACG,EAAf,CAAkBJ,KAAlB,CAAP;EACH,CAvLiC;EAwLlC3F,UAAU,EAAE,UAASH,QAAT,EAAmB;IAC3B,IAAImG,MAAM,GAAG,KAAKC,kBAAL,EAAb;;IACA,IAAIC,UAAJ;;IACA,QAAQrG,QAAR;MACI,KAAKlB,aAAL;MACA,KAAKJ,QAAL;QACI2H,UAAU,GAAG,KAAKC,SAAL,CAAeH,MAAf,CAAb;QACA;;MACJ,KAAKpH,eAAL;MACA,KAAKJ,UAAL;QACI0H,UAAU,GAAG,KAAKE,SAAL,CAAeJ,MAAf,CAAb;QACA;;MACJ,KAAKtH,WAAL;QACIwH,UAAU,GAAG,KAAK5G,MAAL,CAAY,YAAZ,IAA4B,KAAK6G,SAAL,CAAeH,MAAf,CAA5B,GAAqD,KAAKI,SAAL,CAAeJ,MAAf,CAAlE;QACA;;MACJ,KAAKvH,UAAL;QACIyH,UAAU,GAAG,KAAK5G,MAAL,CAAY,YAAZ,IAA4B,KAAK8G,SAAL,CAAeJ,MAAf,CAA5B,GAAqD,KAAKG,SAAL,CAAeH,MAAf,CAAlE;QACA;;MACJ,KAAKlH,WAAL;QACIoH,UAAU,GAAGF,MAAM,CAACK,KAAP,EAAb;QACA;;MACJ,KAAKxH,UAAL;QACIqH,UAAU,GAAGF,MAAM,CAACN,IAAP,EAAb;QACA;;MACJ;QACI,OAAO,KAAP;IAtBR;;IAwBA,IAAI,MAAMQ,UAAU,CAAC3G,MAArB,EAA6B;MACzB,KAAKD,MAAL,CAAY,gBAAZ,EAA8BtD,gBAAgB,CAACkK,UAAD,CAA9C;IACH;EACJ,CAtNiC;EAuNlCI,gBAAgB,EAAE,UAASC,aAAT,EAAwB;IACtCA,aAAa,GAAGA,aAAa,IAAI,KAAKC,aAAL,EAAjC;IACA,OAAOD,aAAa,CAACE,MAAd,CAAqB,UAArB,CAAP;EACH,CA1NiC;EA2NlCR,kBAAkB,EAAE,UAASM,aAAT,EAAwB;IACxC,OAAO,KAAKD,gBAAL,CAAsBC,aAAtB,EAAqCG,GAArC,CAAyC,oBAAzC,CAAP;EACH,CA7NiC;EA8NlCP,SAAS,EAAE,UAASH,MAAT,EAAiB;IACxB,IAAIR,OAAO,GAAG,KAAKF,cAAL,EAAd;;IACA,IAAIqB,WAAW,GAAGX,MAAM,CAACL,KAAP,CAAaH,OAAb,CAAlB;IACA,IAAIoB,KAAK,GAAGZ,MAAM,CAACN,IAAP,EAAZ;IACA,IAAImB,KAAK,GAAGnL,CAAC,CAACsK,MAAM,CAACW,WAAW,GAAG,CAAf,CAAP,CAAb;IACA,IAAIG,IAAI,GAAG,KAAKxH,MAAL,CAAY,eAAZ,CAAX;;IACA,IAAI,MAAMuH,KAAK,CAACtH,MAAZ,IAAsBuH,IAA1B,EAAgC;MAC5BD,KAAK,GAAGD,KAAR;IACH;;IACD,OAAOC,KAAP;EACH,CAxOiC;EAyOlCT,SAAS,EAAE,UAASJ,MAAT,EAAiB;IACxB,IAAIR,OAAO,GAAG,KAAKF,cAAL,CAAoB,IAApB,CAAd;;IACA,IAAIqB,WAAW,GAAGX,MAAM,CAACL,KAAP,CAAaH,OAAb,CAAlB;IACA,IAAIuB,MAAM,GAAGf,MAAM,CAACK,KAAP,EAAb;IACA,IAAIQ,KAAK,GAAGnL,CAAC,CAACsK,MAAM,CAACW,WAAW,GAAG,CAAf,CAAP,CAAb;IACA,IAAIG,IAAI,GAAG,KAAKxH,MAAL,CAAY,eAAZ,CAAX;;IACA,IAAI,MAAMuH,KAAK,CAACtH,MAAZ,IAAsBuH,IAA1B,EAAgC;MAC5BD,KAAK,GAAGE,MAAR;IACH;;IACD,OAAOF,KAAP;EACH,CAnPiC;EAoPlCG,kBAAkB,EAAE,UAASxB,OAAT,EAAkB;IAClC,KAAKyB,UAAL,CAAgBzB,OAAhB;EACH,CAtPiC;EAuPlCC,uBAAuB,EAAE,UAAShG,MAAT,EAAiByH,SAAjB,EAA4BC,eAA5B,EAA6C;IAClE,IAAI3B,OAAO,GAAG9J,CAAC,CAAC+D,MAAD,CAAf;;IACA,IAAI+F,OAAO,CAACjG,MAAZ,EAAoB;MAChB,KAAK6H,wBAAL;;MACA,KAAKC,cAAL,CAAoB7B,OAApB,EAA6B2B,eAA7B;;MACA,KAAKG,iBAAL,CAAuBJ,SAAvB,EAAkC1B,OAAlC;IACH;;IACD,KAAK+B,6BAAL;EACH,CA/PiC;EAgQlCH,wBAAwB,EAAE,UAAS5B,OAAT,EAAkB;IACxC,KAAKgC,OAAL,CAAa,kBAAb,EAAiCpL,SAAS,CAAC,KAAKkD,MAAL,CAAY,gBAAZ,CAAD,CAAT,GAA2C,KAAKmI,gBAAL,EAA3C,GAAqE,IAAtG,EAA4GjC,OAA5G;EACH,CAlQiC;EAmQlC6B,cAAc,EAAE,UAAS7B,OAAT,EAAkB2B,eAAlB,EAAmC;IAC/C,IAAI,CAACA,eAAD,IAAoB,KAAK7H,MAAL,CAAY,gBAAZ,CAAxB,EAAuD;MACnD,KAAKkI,OAAL,CAAa,IAAb,EAAmB,KAAKC,gBAAL,EAAnB,EAA4CjC,OAA5C;IACH,CAFD,MAEO;MACH,KAAKgC,OAAL,CAAa,IAAb,EAAmB,IAAnB,EAAyBhC,OAAzB;IACH;EACJ,CAzQiC;EA0QlCJ,eAAe,EAAE,UAASI,OAAT,EAAkB;IAC/B,IAAI,CAACA,OAAD,IAAY,CAACA,OAAO,CAACjG,MAAzB,EAAiC;MAC7B;IACH;;IACD,KAAKkG,uBAAL,CAA6BD,OAA7B,EAAsC,IAAtC;;IACA,KAAKjE,oBAAL,CAA0B,KAAKkG,gBAAL,EAA1B;;IACA,IAAI,KAAKnI,MAAL,CAAY,eAAZ,CAAJ,EAAkC;MAC9B,KAAK0H,kBAAL,CAAwBxB,OAAxB;IACH;EACJ,CAnRiC;EAoRlCkC,sBAAsB,EAAE,UAASxE,IAAT,EAAe;IACnC,IAAIyE,MAAM,GAAGjM,CAAC,EAAd;IACA,IAAIkM,IAAI,GAAG,IAAX;IACA,KAAKC,YAAL,GAAoBrL,IAApB,CAA0B,YAAW;MACjC,IAAIqK,KAAK,GAAGnL,CAAC,CAAC,IAAD,CAAb;;MACA,IAAImL,KAAK,CAAC5E,IAAN,CAAW2F,IAAI,CAACE,YAAL,EAAX,MAAoC5E,IAAxC,EAA8C;QAC1CyE,MAAM,GAAGd,KAAT;QACA,OAAO,KAAP;MACH;IACJ,CAND;IAOA,OAAOc,MAAP;EACH,CA/RiC;EAgSlCI,eAAe,EAAE,UAAS7E,IAAT,EAAe;IAC5B,OAAO,KAAK5D,MAAL,CAAY,OAAZ,EAAqB0I,OAArB,CAA6B9E,IAA7B,CAAP;EACH,CAlSiC;EAmSlC+E,kBAAkB,EAAE,UAAS/E,IAAT,EAAegF,QAAf,EAAyBC,KAAzB,EAAgCC,QAAhC,EAA0C;IAC1D,IAAIvB,KAAK,GAAG,KAAKa,sBAAL,CAA4BxE,IAA5B,CAAZ;;IACA,IAAI,CAAC2D,KAAK,CAACtH,MAAX,EAAmB;MACf;IACH;;IACD,IAAI,CAAC,KAAK8I,WAAL,CAAiBC,SAAjB,CAA2BC,WAA3B,CAAuC1B,KAAvC,EAA8C2B,YAA9C,CAA2DN,QAA3D,EAAqEC,KAArE,CAAL,EAAkF;MAC9E,KAAKM,YAAL,CAAkB5B,KAAlB,EAAyB3D,IAAzB;IACH;;IACD,IAAIwF,WAAW,GAAG,eAAeR,QAAf,IAA2BC,KAA7C;;IACA,IAAIO,WAAJ,EAAiB;MACb,KAAKC,eAAL,CAAqB9B,KAArB;IACH;EACJ,CA/SiC;;EAgTlC8B,eAAe,CAAC9B,KAAD,EAAQ;IACnB,IAAIA,KAAK,CAAC+B,EAAN,CAAS,KAAKtJ,MAAL,CAAY,gBAAZ,CAAT,CAAJ,EAA6C;MACzC,KAAKA,MAAL,CAAY,gBAAZ,EAA8B,IAA9B;IACH;EACJ,CApTiC;;EAqTlCmJ,YAAY,EAAE,UAAS5B,KAAT,EAAgB;IAC1B,IAAIgC,QAAQ,GAAG,KAAKC,YAAL,CAAkBjC,KAAlB,CAAf;;IACA,IAAIlB,KAAK,GAAGkB,KAAK,CAAC5E,IAAN,CAAW,KAAK8G,aAAL,EAAX,CAAZ;;IACA,KAAKC,WAAL,CAAiB,KAAKlE,mBAAL,GAA2Ba,KAA5C,EAAmDkD,QAAnD,EAA6D,IAA7D,EAAmEhC,KAAnE;EACH,CAzTiC;EA0TlCU,6BAA6B,EAAEzL,IA1TG;EA2TlCmN,cAAc,EAAE,UAASC,IAAT,EAAe;IAC3B,IAAI,YAAYA,IAAI,CAAC7L,IAArB,EAA2B;MACvB,IAAI8L,OAAO,GAAGD,IAAI,CAACE,QAAL,CAAcC,KAAd,CAAoBhL,eAApB,CAAd;;MACA,IAAI8K,OAAO,IAAIA,OAAO,CAAC5J,MAAvB,EAA+B;QAC3B,IAAI2I,QAAQ,GAAGiB,OAAO,CAACA,OAAO,CAAC5J,MAAR,GAAiB,CAAlB,CAAtB;QACA,IAAI+J,QAAQ,GAAGJ,IAAI,CAACE,QAAL,CAAcG,OAAd,CAAsB,MAAMrB,QAA5B,EAAsC,EAAtC,CAAf;QACA,IAAIhF,IAAI,GAAG,KAAK5D,MAAL,CAAYgK,QAAZ,CAAX;;QACA,KAAKrB,kBAAL,CAAwB/E,IAAxB,EAA8BgF,QAA9B,EAAwCgB,IAAI,CAACf,KAA7C,EAAoDe,IAAI,CAACM,aAAzD;;QACA;MACH;IACJ;;IACD,QAAQN,IAAI,CAAC7L,IAAb;MACI,KAAK,OAAL;MACA,KAAK,iBAAL;MACA,KAAK,sBAAL;MACA,KAAK,oBAAL;QACI,KAAKkF,mBAAL;;QACA,KAAKkH,WAAL;;QACA;;MACJ,KAAK,YAAL;QACI,KAAKjH,kBAAL;;QACA,KAAKkH,mBAAL;;QACA;;MACJ,KAAK,YAAL;QACI,KAAKA,mBAAL;;QACA;;MACJ,KAAK,cAAL;QACI,KAAKD,WAAL;;QACA;;MACJ,KAAK,gBAAL;QACI,KAAKE,uBAAL;;QACA;;MACJ,KAAK,aAAL;QACI;;MACJ,KAAK,YAAL;MACA,KAAK,iBAAL;QACI,KAAKC,gBAAL;;QACA;;MACJ,KAAK,mBAAL;QACI,KAAKC,uBAAL;;QACA;;MACJ,KAAK,sBAAL;QACI,KAAKtI,oBAAL,GAA4B,KAAKuI,qBAAL,CAA2B,sBAA3B,CAA5B;QACA;;MACJ,KAAK,eAAL;MACA,KAAK,eAAL;MACA,KAAK,qBAAL;QACI;;MACJ,KAAK,gBAAL;QACI,KAAKrE,uBAAL,CAA6ByD,IAAI,CAACM,aAAlC,EAAiD,KAAjD,EAAwD,IAAxD;;QACA,KAAKpE,eAAL,CAAqB1J,CAAC,CAACwN,IAAI,CAACf,KAAN,CAAtB;;QACA;;MACJ,KAAK,aAAL;QACI,KAAK7F,qBAAL;;QACA,KAAKM,wBAAL;;QACA,KAAK6G,WAAL;;QACA;;MACJ,KAAK,aAAL;MACA,KAAK,cAAL;QACI,KAAKA,WAAL;;QACA;;MACJ;QACI,KAAKxJ,QAAL,CAAciJ,IAAd;IAnDR;EAqDH,CA3XiC;EA4XlCO,WAAW,EAAE,YAAW;IACpB,KAAKnK,MAAL,CAAY,gBAAZ,EAA8B,IAA9B;IACA,OAAO,KAAKW,QAAL,CAAcgF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B,CAAP;EACH,CA/XiC;EAgYlC6E,aAAa,EAAE,YAAW;IACtB,IAAIrI,UAAU,GAAG,KAAKsI,WAAtB;;IACA,KAAKC,sBAAL;;IACAvI,UAAU,CAACwI,SAAX,CAAqB,IAAIxI,UAAU,CAACwI,SAAX,EAAzB;IACA,OAAOxI,UAAU,CAACyI,IAAX,EAAP;EACH,CArYiC;EAsYlCF,sBAAsB,EAAE,YAAW;IAC/B,KAAKG,2BAAL,GAAmC,CAAnC;EACH,CAxYiC;EAyYlCC,sBAAsB,EAAE,YAAW;IAC/B,KAAKD,2BAAL,GAAmC,CAAC,CAApC;EACH,CA3YiC;EA4YlCE,sBAAsB,EAAE,YAAW;IAC/B,KAAKF,2BAAL,GAAmC,IAAnC;EACH,CA9YiC;EA+YlCG,yBAAyB,EAAE,UAASC,QAAT,EAAmB;IAC1C,IAAIxJ,KAAK,GAAG,KAAK1B,MAAL,CAAY,OAAZ,CAAZ;;IACA,IAAI,KAAKmL,YAAL,IAAqBzJ,KAArB,IAA8B,KAAK0J,kBAAL,EAAlC,EAA6D;MACzD,KAAK5F,mBAAL,GAA2B9D,KAAK,CAACzB,MAAjC;;MACA,IAAI,CAAC,KAAKoL,WAAL,EAAD,IAAuB,CAAC,CAAD,KAAO,KAAKP,2BAAvC,EAAoE;QAChE,KAAK9K,MAAL,GAAc0B,KAAd,GAAsBA,KAAK,CAAC4J,MAAN,CAAaJ,QAAQ,CAACK,KAAT,CAAe,KAAKT,2BAApB,CAAb,CAAtB;MACH;;MACD,KAAKE,sBAAL;;MACA,KAAKQ,eAAL;IACH,CAPD,MAOO;MACH,KAAKxL,MAAL,CAAY,OAAZ,EAAqBkL,QAAQ,CAACK,KAAT,EAArB;IACH;EACJ,CA3ZiC;EA4ZlCC,eAAe,EAAE,YAAW;IACxB,KAAKC,eAAL;;IACA,KAAKC,cAAL;EACH,CA/ZiC;EAgalCC,2BAA2B,EAAE,YAAW;IACpC,KAAKX,sBAAL;;IACA,KAAKhL,MAAL,CAAY,OAAZ,EAAqB,KAAKA,MAAL,CAAY,OAAZ,CAArB;EACH,CAnaiC;EAoalCoL,kBAAkB,EAAE,YAAW;IAC3B,OAAO,QAAQ,KAAKN,2BAAb,IAA4C,KAAKc,wBAAL,EAAnD;EACH,CAtaiC;EAualCA,wBAAwB,EAAE,YAAW;IACjC,OAAO,KAAP;EACH,CAzaiC;EA0alCC,MAAM,EAAE,YAAW;IACf,KAAKC,gBAAL;;IACA,KAAKC,mBAAL;EACH,CA7aiC;EA8alCA,mBAAmB,EAAE,YAAW;IAC5B3P,CAAC,CAAC,KAAK4P,cAAL,EAAD,CAAD,CAAyBC,KAAzB;EACH,CAhbiC;EAiblCC,QAAQ,EAAE,YAAW;IACjB,KAAKvL,QAAL;IACAwL,YAAY,CAAC,KAAKC,iBAAN,CAAZ;EACH,CApbiC;EAqblCC,QAAQ,EAAE,YAAW;IACjB,KAAKpJ,mBAAL;;IACA,KAAKtC,QAAL,CAAcgF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;EACH,CAxbiC;EAyblCoG,cAAc,EAAE,YAAW;IACvB,OAAO,KAAK5H,QAAL,EAAP;EACH,CA3biC;EA4blCkI,UAAU,EAAE,YAAW;IACnB,OAAOlO,UAAP;EACH,CA9biC;EA+blCmO,iBAAiB,EAAE,YAAW;IAC1B,OAAO,KAAKD,UAAL,KAAoBjO,qBAA3B;EACH,CAjciC;EAkclCmO,kBAAkB,EAAE,YAAW;IAC3B,OAAO7N,mBAAP;EACH,CApciC;EAqclC8N,sBAAsB,EAAE,YAAW;IAC/B,OAAO7N,wBAAP;EACH,CAvciC;EAwclC8N,aAAa,EAAE,YAAW;IACtB,OAAO,MAAM,KAAKJ,UAAL,EAAb;EACH,CA1ciC;EA2clC9D,YAAY,EAAE,YAAW;IACrB,OAAOjK,aAAP;EACH,CA7ciC;EA8clCkL,aAAa,EAAE,YAAW;IACtB,OAAOjL,cAAP;EACH,CAhdiC;EAidlC0I,aAAa,EAAE,YAAW;IACtB,OAAO,KAAK8E,cAAL,GAAsBW,IAAtB,CAA2B,KAAKD,aAAL,EAA3B,CAAP;EACH,CAndiC;EAodlCE,WAAW,EAAE,YAAW;IACpB,KAAKjM,QAAL;IACA,KAAKsB,oBAAL,GAA4B,KAAKuI,qBAAL,CAA2B,sBAA3B,CAA5B;IACA,KAAKpG,QAAL,GAAgBgB,QAAhB,CAAyBjH,gBAAzB;;IACA,KAAKsN,eAAL;EACH,CAzdiC;EA0dlCA,eAAe,EAAElP,aAAa,CAAE,YAAW;IACvC,KAAKsQ,kBAAL;EACH,CAF6B,CA1dI;EA6dlCnB,cAAc,EAAE,YAAW;IACvB,KAAKoB,uBAAL;EACH,CA/diC;EAgelCC,OAAO,EAAE,YAAW;IAChB,KAAKpM,QAAL;;IACA,KAAKqM,iBAAL;;IACA,KAAK1C,gBAAL;;IACA,KAAKC,uBAAL;EACH,CAreiC;EAselCyC,iBAAiB,EAAE,YAAW;IAC1B,IAAIC,YAAY,GAAG,KAAKP,aAAL,EAAnB;;IACA,IAAIQ,mBAAmB,GAAG5P,YAAY,CAACU,cAAD,EAAiB,KAAKmP,IAAtB,CAAtC;IACA,IAAIC,yBAAyB,GAAG9P,YAAY,CAACE,aAAa,CAAC6P,IAAf,EAAqB,KAAKF,IAA1B,CAA5C;IACA,IAAI7E,IAAI,GAAG,IAAX;IACA,IAAIgF,iBAAiB,GAAG,IAAInQ,MAAJ,CAAY,UAASyM,IAAT,EAAe;MAC/C,IAAI2D,KAAK,GAAG3D,IAAI,CAAC2D,KAAjB;;MACAjF,IAAI,CAACkF,uBAAL,CAA6BD,KAA7B;IACH,CAHuB,CAAxB;IAIAlR,YAAY,CAACoR,GAAb,CAAiB,KAAKzB,cAAL,EAAjB,EAAwCkB,mBAAxC,EAA6DD,YAA7D;IACA5Q,YAAY,CAACoR,GAAb,CAAiB,KAAKzB,cAAL,EAAjB,EAAwCoB,yBAAxC,EAAmEH,YAAnE;IACA5Q,YAAY,CAACqR,EAAb,CAAgB,KAAK1B,cAAL,EAAhB,EAAuCkB,mBAAvC,EAA4DD,YAA5D,EAA0E,UAASnN,CAAT,EAAY;MAClF,KAAKI,iBAAL,CAAuBJ,CAAvB;IACH,CAFyE,CAExEiB,IAFwE,CAEnE,IAFmE,CAA1E;IAGA1E,YAAY,CAACqR,EAAb,CAAgB,KAAK1B,cAAL,EAAhB,EAAuCoB,yBAAvC,EAAkEH,YAAlE,EAAiF,UAASnN,CAAT,EAAY;MACzFwN,iBAAiB,CAACK,OAAlB,CAA0B;QACtBpJ,OAAO,EAAEnI,CAAC,CAAC0D,CAAC,CAACK,MAAH,CADY;QAEtBoN,KAAK,EAAEzN;MAFe,CAA1B;IAIH,CALD;EAMH,CA1fiC;EA2flCI,iBAAiB,EAAE,UAASJ,CAAT,EAAY8J,IAAZ,EAAkBgE,MAAlB,EAA0B;IACzC,KAAKC,mBAAL,CAAyB/N,CAAzB,EAA4B,aAA5B,EAA2C8J,IAA3C,EAAiDgE,MAAjD;EACH,CA7fiC;EA8flCJ,uBAAuB,EAAE,UAAS1N,CAAT,EAAY;IACjC,IAAI,CAAC,KAAKE,MAAL,CAAY,mBAAZ,CAAL,EAAuC;MACnC;IACH;;IACD,KAAK8N,iBAAL,GAAyB,YAAW;MAChC3B,YAAY,CAAC,KAAKC,iBAAN,CAAZ;MACA,KAAK0B,iBAAL,GAAyB,IAAzB;;MACA,IAAIhO,CAAC,CAACiO,kBAAF,EAAJ,EAA4B;QACxB;MACH;;MACD,IAAI7H,OAAO,GAAG9J,CAAC,CAAC0D,CAAC,CAACK,MAAH,CAAf;MACA,IAAI6N,YAAY,GAAG9H,OAAO,CAAC+H,OAAR,CAAgB,KAAK/G,aAAL,EAAhB,CAAnB;;MACA,IAAIgH,iBAAiB,GAAG,KAAKC,iBAAL,CAAuBjI,OAAvB,CAAxB;;MACA,IAAI8H,YAAY,CAAC/N,MAAb,IAAuBiO,iBAAvB,IAA4C,CAAC,CAAD,KAAOjR,OAAO,CAACiR,iBAAiB,CAAC9N,GAAlB,CAAsB,CAAtB,CAAD,EAA2B,KAAKqF,YAAL,EAA3B,CAA9D,EAA+G;QAC3G,KAAKzF,MAAL,CAAY,gBAAZ,EAA8BtD,gBAAgB,CAACsR,YAAD,CAA9C;MACH;IACJ,CAZwB,CAYvBjN,IAZuB,CAYlB,IAZkB,CAAzB;;IAaA,KAAKqL,iBAAL,GAAyBgC,UAAU,CAAC,KAAKC,sBAAL,CAA4BtN,IAA5B,CAAiC,IAAjC,CAAD,CAAnC;EACH,CAhhBiC;EAihBlCoN,iBAAiB,EAAE,UAASjI,OAAT,EAAkB;IACjC,IAAIA,OAAO,CAACoD,EAAR,CAAW3L,SAAX,CAAJ,EAA2B;MACvB,OAAOuI,OAAP;IACH,CAFD,MAEO;MACHA,OAAO,GAAGA,OAAO,CAACoI,MAAR,EAAV;;MACA,OAAOpI,OAAO,CAACjG,MAAR,IAAkB,CAACtD,UAAU,CAAC4R,UAAX,CAAsBrI,OAAO,CAAC9F,GAAR,CAAY,CAAZ,CAAtB,CAA1B,EAAiE;QAC7D,IAAI8F,OAAO,CAACoD,EAAR,CAAW3L,SAAX,CAAJ,EAA2B;UACvB,OAAOuI,OAAP;QACH;;QACDA,OAAO,GAAGA,OAAO,CAACoI,MAAR,EAAV;MACH;IACJ;EACJ,CA7hBiC;EA8hBlCD,sBAAsB,EAAE,YAAW;IAC/B,KAAKP,iBAAL,IAA0B,KAAKA,iBAAL,EAA1B;EACH,CAhiBiC;EAiiBlCU,iBAAiB,EAAE,YAAW;IAC1B,KAAK7N,QAAL,CAAcgF,KAAd,CAAoB,IAApB,EAA0BC,SAA1B;;IACA,KAAKyI,sBAAL;EACH,CApiBiC;EAqiBlC/D,gBAAgB,EAAE,YAAW;IACzB,IAAImE,cAAc,GAAG,KAAKzC,cAAL,EAArB;;IACA,IAAIiB,YAAY,GAAG,KAAKP,aAAL,EAAnB;;IACA,IAAIgC,SAAS,GAAGpR,YAAY,CAACO,SAAS,CAACE,IAAX,EAAiB,KAAKoP,IAAtB,CAA5B;IACA9Q,YAAY,CAACoR,GAAb,CAAiBgB,cAAjB,EAAiCC,SAAjC,EAA4CzB,YAA5C;IACA5Q,YAAY,CAACqR,EAAb,CAAgBe,cAAhB,EAAgCC,SAAhC,EAA2CzB,YAA3C,EAAyD;MACrD0B,OAAO,EAAE,KAAKC,eAAL;IAD4C,CAAzD,EAEG,KAAKC,gBAAL,CAAsB9N,IAAtB,CAA2B,IAA3B,CAFH;EAGH,CA7iBiC;EA8iBlC6N,eAAe,EAAE,YAAW;IACxB,OAAO,KAAK5O,MAAL,CAAY,iBAAZ,CAAP;EACH,CAhjBiC;EAijBlC8O,oBAAoB,EAAE,YAAW;IAC7B,OAAO,KAAKC,qBAAL,CAA2B,YAA3B,CAAP;EACH,CAnjBiC;EAojBlCF,gBAAgB,EAAE,UAAS/O,CAAT,EAAY;IAC1B,IAAI,KAAKgP,oBAAL,EAAJ,EAAiC;MAC7B,KAAKjB,mBAAL,CAAyB/N,CAAzB,EAA4B,YAA5B;IACH,CAFD,MAEO;MACHA,CAAC,CAACkP,MAAF,GAAW,IAAX;IACH;EACJ,CA1jBiC;EA2jBlCzE,uBAAuB,EAAE,YAAW;IAChC,IAAIkE,cAAc,GAAG,KAAKzC,cAAL,EAArB;;IACA,IAAIiB,YAAY,GAAG,KAAKP,aAAL,EAAnB;;IACA,IAAIgC,SAAS,GAAGpR,YAAY,CAACW,oBAAD,EAAuB,KAAKkP,IAA5B,CAA5B;IACA9Q,YAAY,CAACoR,GAAb,CAAiBgB,cAAjB,EAAiCC,SAAjC,EAA4CzB,YAA5C;IACA5Q,YAAY,CAACqR,EAAb,CAAgBe,cAAhB,EAAgCC,SAAhC,EAA2CzB,YAA3C,EAAyD,KAAKgC,uBAAL,CAA6BlO,IAA7B,CAAkC,IAAlC,CAAzD;EACH,CAjkBiC;EAkkBlCmO,2BAA2B,EAAE,YAAW;IACpC,OAAO,KAAKH,qBAAL,CAA2B,mBAA3B,CAAP;EACH,CApkBiC;EAqkBlCE,uBAAuB,EAAE,UAASnP,CAAT,EAAY;IACjC,IAAI,KAAKoP,2BAAL,EAAJ,EAAwC;MACpC,KAAKrB,mBAAL,CAAyB/N,CAAzB,EAA4B,mBAA5B;IACH,CAFD,MAEO;MACHA,CAAC,CAACkP,MAAF,GAAW,IAAX;IACH;EACJ,CA3kBiC;EA4kBlCnC,kBAAkB,EAAE,YAAW;IAC3B,IAAInL,KAAK,GAAG,KAAK1B,MAAL,CAAY,OAAZ,KAAwB,EAApC;;IACA,IAAI,KAAKwF,mBAAT,EAA8B;MAC1B,KAAK2J,YAAL,CAAkBzN,KAAK,CAAC6J,KAAN,CAAY,KAAK/F,mBAAjB,CAAlB;IACH,CAFD,MAEO;MACH,KAAK2J,YAAL,CAAkBzN,KAAlB;IACH;EACJ,CAnlBiC;EAolBlCyN,YAAY,EAAE,UAASzN,KAAT,EAAgB;IAC1B,IAAIA,KAAK,CAACzB,MAAV,EAAkB;MACd/C,IAAI,CAACwE,KAAD,EAAQ,UAAS2E,KAAT,EAAgBkD,QAAhB,EAA0B;QAClC,KAAKG,WAAL,CAAiB,KAAKlE,mBAAL,GAA2Ba,KAA5C,EAAmDkD,QAAnD;MACH,CAFW,CAEVxI,IAFU,CAEL,IAFK,CAAR,CAAJ;IAGH;;IACD,KAAKqJ,mBAAL;EACH,CA3lBiC;EA4lBlCV,WAAW,EAAE,UAASrD,KAAT,EAAgBkD,QAAhB,EAA0B1F,UAA1B,EAAsCuL,cAAtC,EAAsD;IAC/D,IAAIC,WAAJ;;IACA,IAAIC,SAAS,GAAG,UAAUD,WAAW,GAAG,SAAShJ,KAAT,IAAkB,KAAK,CAAL,KAAWA,KAA7B,GAAqC,KAAK,CAA1C,GAA8CA,KAAK,CAACzC,IAA5E,KAAqF,KAAK,CAAL,KAAWyL,WAAhG,GAA8GA,WAA9G,GAA4HhJ,KAA5I;IACAxC,UAAU,GAAGA,UAAU,IAAI,KAAKmI,cAAL,EAA3B;;IACA,IAAIuD,UAAU,GAAG,KAAKC,gBAAL,CAAsBF,SAAtB,EAAiC/F,QAAjC,EAA2C1F,UAA3C,EAAuDuL,cAAvD,CAAjB;;IACA,KAAKK,eAAL,CAAqBF,UAArB,EAAiChG,QAAjC,EAA2C+F,SAA3C;;IACAC,UAAU,CAACG,IAAX,CAAgB,KAAK1P,MAAL,CAAY,iBAAZ,CAAhB;;IACA,KAAK2P,qBAAL,CAA2BpG,QAA3B,EAAqCgG,UAArC;;IACA,IAAIK,YAAY,GAAG,KAAKC,eAAL,CAAqBN,UAArB,CAAnB;;IACA,IAAIO,oBAAoB,GAAG,KAAKC,kBAAL,CAAwB;MAC/C1J,KAAK,EAAEiJ,SADwC;MAE/C/F,QAAQ,EAAEA,QAFqC;MAG/CyG,SAAS,EAAEtT,gBAAgB,CAACkT,YAAD,CAHoB;MAI/CK,YAAY,EAAE,KAAK1D,iBAAL,EAJiC;MAK/C2D,mBAAmB,EAAE,KAAKlQ,MAAL,CAAY,cAAZ;IAL0B,CAAxB,CAA3B;;IAOA,IAAIsI,IAAI,GAAG,IAAX;IACAvL,IAAI,CAAC+S,oBAAD,CAAJ,CAA2BK,IAA3B,CAAiC,UAASP,YAAT,EAAuB;MACpDtH,IAAI,CAAC8H,sBAAL,CAA4B;QACxBC,WAAW,EAAEd,UADW;QAExBe,WAAW,EAAEV,YAFW;QAGxBrG,QAAQ,EAAEA,QAHc;QAIxB+F,SAAS,EAAEA;MAJa,CAA5B;;MAMAhH,IAAI,CAACiI,wBAAL,CAA8BlK,KAA9B,EAAqCkD,QAArC,EAA+C7M,gBAAgB,CAAC6S,UAAD,CAA/D;IACH,CARD;IASA,OAAOA,UAAP;EACH,CAvnBiC;EAwnBlCM,eAAe,EAAE,UAASN,UAAT,EAAqB;IAClC,IAAIK,YAAY,GAAGL,UAAU,CAAC5C,IAAX,CAAgB,MAAMrO,8BAAtB,CAAnB;IACAsR,YAAY,CAACY,WAAb,CAAyBlS,8BAAzB;IACA,OAAOsR,YAAP;EACH,CA5nBiC;EA6nBlCD,qBAAqB,EAAE,UAASpG,QAAT,EAAmBxJ,YAAnB,EAAiC;IACpD,IAAI,CAACwJ,QAAD,IAAa,CAACA,QAAQ,CAACkH,OAA3B,EAAoC;MAChC;IACH;;IACDpU,YAAY,CAACqR,EAAb,CAAgB3N,YAAhB,EAA8B/B,cAA9B,EAA8C,UAAS8B,CAAT,EAAY;MACtD,KAAK4Q,0BAAL,CAAgC3Q,YAAhC,EAA8CwJ,QAAQ,CAACkH,OAAvD,EAAgE;QAC5DlD,KAAK,EAAEzN;MADqD,CAAhE;IAGH,CAJ6C,CAI5CiB,IAJ4C,CAIvC,IAJuC,CAA9C;EAKH,CAtoBiC;EAuoBlCgP,kBAAkB,EAAE,UAASnG,IAAT,EAAe;IAC/B,IAAI+G,gBAAgB,GAAG,KAAKC,oBAAL,CAA0BhH,IAA1B,CAAvB;;IACA,IAAIjI,YAAY,GAAG,KAAKkP,YAAL,CAAkBF,gBAAlB,CAAnB;;IACA,KAAKG,sBAAL,CAA4BlH,IAA5B;;IACA,IAAImH,eAAe,GAAG3U,CAAC,CAAC,KAAK4U,qBAAL,CAA2BrP,YAA3B,EAAyCiI,IAAzC,CAAD,CAAvB;;IACA,IAAI,CAACmH,eAAe,CAACE,QAAhB,CAAyBnS,sBAAzB,CAAL,EAAuD;MACnD,OAAO8K,IAAI,CAACoG,SAAZ;IACH;;IACD,OAAO,KAAKkB,wBAAL,CAA8BtH,IAA9B,EAAoCmH,eAApC,CAAP;EACH,CAhpBiC;EAipBlCG,wBAAwB,EAAE,UAAStH,IAAT,EAAeuH,KAAf,EAAsB;IAC5C/U,CAAC,CAACwN,IAAI,CAACoG,SAAN,CAAD,CAAkBoB,WAAlB,CAA8BD,KAA9B;IACAvH,IAAI,CAACoG,SAAL,GAAiBtT,gBAAgB,CAACyU,KAAD,CAAjC;;IACA,KAAKL,sBAAL,CAA4BlH,IAA5B;;IACA,OAAOuH,KAAP;EACH,CAtpBiC;EAupBlCL,sBAAsB,EAAE,UAASlH,IAAT,EAAe;IACnC,IAAIyH,OAAO,GAAG,CAACjT,UAAU,GAAGC,qBAAd,EAAqCuL,IAAI,CAACqG,YAA1C,CAAd;IACA7T,CAAC,CAACwN,IAAI,CAACoG,SAAN,CAAD,CAAkB5K,QAAlB,CAA2BiM,OAAO,CAACC,IAAR,CAAa,GAAb,CAA3B;EACH,CA1pBiC;EA2pBlCC,sBAAsB,EAAE,UAAS1N,UAAT,EAAqB0L,UAArB,EAAiClJ,KAAjC,EAAwC;IAC5DkJ,UAAU,CAACiC,QAAX,CAAoB3N,UAApB;EACH,CA7pBiC;EA8pBlC2L,gBAAgB,EAAE,UAASnJ,KAAT,EAAgBkD,QAAhB,EAA0B1F,UAA1B,EAAsCuL,cAAtC,EAAsD;IACpE,IAAIG,UAAU,GAAGnT,CAAC,CAAC,OAAD,CAAlB;IACA,IAAI,KAAK2M,WAAL,CAAiBC,SAArB,CAA+BuG,UAA/B,EAA2C,KAAKkC,YAAL,EAA3C,EAAgElI,QAAQ,IAAI,EAA5E;;IACA,IAAI6F,cAAc,IAAIA,cAAc,CAACnP,MAArC,EAA6C;MACzCmP,cAAc,CAACgC,WAAf,CAA2B7B,UAA3B;IACH,CAFD,MAEO;MACH,KAAKgC,sBAAL,CAA4B1Q,IAA5B,CAAiC,IAAjC,EAAuCgD,UAAvC,EAAmD0L,UAAnD,EAA+DlJ,KAA/D;IACH;;IACD,IAAI,KAAKrG,MAAL,CAAY,oBAAZ,CAAJ,EAAuC;MACnC,IAAI0R,YAAY,GAAG,KAAKvO,cAAL,GAAsB,KAAKA,cAAL,CAAoBoG,QAApB,CAAtB,GAAsDA,QAAzE;MACAgG,UAAU,CAACG,IAAX,CAAgB,OAAhB,EAAyBgC,YAAzB;IACH;;IACD,OAAOnC,UAAP;EACH,CA3qBiC;EA4qBlCkC,YAAY,EAAE,YAAW;IACrB,IAAInJ,IAAI,GAAG,IAAX;IACA,OAAO;MACHqJ,WAAW,EAAE,YAAW;QACpB,OAAOrJ,IAAI,CAACtI,MAAL,CAAY,gCAAZ,CAAP;MACH,CAHE;MAIH4R,KAAK,EAAEtJ,IAJJ;MAKHuJ,WAAW,EAAE,UAASC,KAAT,EAAgB;QACzB,IAAIC,IAAI,GAAGzJ,IAAI,CAACtI,MAAL,CAAY8R,KAAK,GAAG,MAApB,CAAX;QACA,IAAIE,MAAM,GAAGlU,aAAa,CAACiU,IAAD,CAA1B;QACA,OAAOC,MAAP;MACH;IATE,CAAP;EAWH,CAzrBiC;EA0rBlC5B,sBAAsB,EAAE5T,IA1rBU;EA2rBlC+T,wBAAwB,EAAE,UAASlK,KAAT,EAAgBkD,QAAhB,EAA0B8G,WAA1B,EAAuC;IAC7D,KAAK4B,oBAAL,GAA4B;MACxB5B,WAAW,EAAEA,WADW;MAExBf,SAAS,EAAEjJ,KAFa;MAGxBkD,QAAQ,EAAEA;IAHc,CAA5B;EAKH,CAjsBiC;EAksBlCkG,eAAe,EAAE,UAASlL,OAAT,EAAkB5B,IAAlB,EAAwB0D,KAAxB,EAA+B;IAC5C9B,OAAO,CAACa,QAAR,CAAiB,CAAChH,UAAD,EAAa,KAAKkO,UAAL,EAAb,EAAgCgF,IAAhC,CAAqC,GAArC,CAAjB,EAA4D3O,IAA5D,CAAiE,KAAK6F,YAAL,EAAjE,EAAsF7F,IAAtF,EAA4FA,IAA5F,CAAiG,KAAK8G,aAAL,EAAjG,EAAuHpD,KAAvH;EACH,CApsBiC;EAqsBlCgE,uBAAuB,EAAE,YAAW;IAChC,OAAO,KAAK6H,iBAAL,GAAyB,KAAK1H,qBAAL,CAA2B,gBAA3B,EAA6C;MACzEjG,OAAO,EAAE,KAAKA,OAAL,EADgE;MAEzE4N,iBAAiB,EAAE,CAAC,UAAD,EAAa,UAAb,CAFsD;MAGzEC,QAAQ,EAAE;IAH+D,CAA7C,CAAhC;EAKH,CA3sBiC;EA4sBlCH,oBAAoB,EAAE,YAAW;IAC7B,OAAO,KAAKC,iBAAL,IAA0B,KAAK7H,uBAAL,EAAjC;EACH,CA9sBiC;EA+sBlCuG,oBAAoB,EAAE,UAAShH,IAAT,EAAe;IACjC,IAAIjH,IAAI,GAAGiH,IAAI,CAACL,QAAhB;IACA,IAAI8I,gBAAgB,GAAGzI,IAAI,CAACyI,gBAAL,IAAyB,KAAKrS,MAAL,CAAY,sBAAZ,CAAhD;IACA,IAAI4E,QAAQ,GAAGjC,IAAI,IAAIA,IAAI,CAAC0P,gBAAD,CAA3B;IACA,OAAOzN,QAAQ,IAAIgF,IAAI,CAACsG,mBAAxB;EACH,CAptBiC;EAqtBlCc,qBAAqB,EAAE,UAASrP,YAAT,EAAuB2Q,UAAvB,EAAmC;IACtD,OAAO3Q,YAAY,CAAC4Q,MAAb,CAAoB;MACvBC,KAAK,EAAEF,UAAU,CAAC/I,QADK;MAEvByG,SAAS,EAAEsC,UAAU,CAACtC,SAFC;MAGvB3J,KAAK,EAAEiM,UAAU,CAACjM;IAHK,CAApB,CAAP;EAKH,CA3tBiC;EA4tBlCoM,sBAAsB,EAAE,YAAW;IAC/B,OAAO,KAAKzG,cAAL,EAAP;EACH,CA9tBiC;EA+tBlC5B,mBAAmB,EAAE,UAAS1I,KAAT,EAAgB;IACjCA,KAAK,GAAGA,KAAK,IAAI,KAAK1B,MAAL,CAAY,OAAZ,CAAjB;IACA,IAAIkC,UAAU,GAAG,KAAKlC,MAAL,CAAY,YAAZ,CAAjB;;IACA,IAAI0S,UAAU,GAAG,CAACxQ,UAAD,IAAeR,KAAK,IAAIA,KAAK,CAACzB,MAA9B,IAAwC,KAAK0S,oBAAL,EAAzD;;IACA,IAAID,UAAU,IAAI,KAAKE,QAAvB,EAAiC;MAC7B,KAAKA,QAAL,CAAc9N,MAAd;;MACA,KAAK8N,QAAL,GAAgB,IAAhB;MACA,KAAK1K,OAAL,CAAa,OAAb,EAAsB,KAAK,CAA3B;IACH;;IACD,IAAI,CAACwK,UAAL,EAAiB;MACb,KAAKE,QAAL,GAAgB,KAAKA,QAAL,IAAiBxW,CAAC,CAAC,OAAD,CAAD,CAAWgJ,QAAX,CAAoB,kBAApB,CAAjC;;MACA,KAAKwN,QAAL,CAAcpB,QAAd,CAAuB,KAAKiB,sBAAL,EAAvB,EAAsDvO,IAAtD,CAA2DhC,UAA3D;;MACA,KAAKgG,OAAL,CAAa,OAAb,EAAsBhG,UAAtB;IACH;;IACD,KAAKkC,QAAL,GAAgByO,WAAhB,CAA4BhU,gBAA5B,EAA8C,CAAC6T,UAA/C;EACH,CA9uBiC;EA+uBlC7E,mBAAmB,EAAE,UAASiF,OAAT,EAAkBC,iBAAlB,EAAqCC,UAArC,EAAiDC,YAAjD,EAA+D;IAChF,KAAKC,iBAAL,CAAuBJ,OAAO,CAAC3S,MAA/B,EAAuC4S,iBAAvC,EAA0D/V,MAAM,CAACgW,UAAD,EAAa;MACzEzF,KAAK,EAAEuF;IADkE,CAAb,CAAhE,EAEIG,YAFJ;EAGH,CAnvBiC;EAovBlCC,iBAAiB,EAAE,UAASC,SAAT,EAAoBJ,iBAApB,EAAuCC,UAAvC,EAAmDC,YAAnD,EAAiE;IAChF,IAAIG,MAAM,GAAG,KAAK5I,qBAAL,CAA2BuI,iBAA3B,EAA8C/V,MAAM,CAAC;MAC9DqW,oBAAoB,EAAE;IADwC,CAAD,EAE9DJ,YAF8D,CAApD,CAAb;;IAGA,OAAO,KAAKK,qBAAL,CAA2BH,SAA3B,EAAsCC,MAAtC,EAA8CJ,UAA9C,CAAP;EACH,CAzvBiC;EA0vBlCtC,0BAA0B,EAAE,UAASyC,SAAT,EAAoBI,OAApB,EAA6BP,UAA7B,EAAyCC,YAAzC,EAAuD;IAC/E,IAAIG,MAAM,GAAG,KAAKI,aAAL,CAAmBD,OAAnB,EAA4BvW,MAAM,CAAC;MAC5CqW,oBAAoB,EAAE;IADsB,CAAD,EAE5CJ,YAF4C,CAAlC,CAAb;;IAGA,OAAO,KAAKK,qBAAL,CAA2BH,SAA3B,EAAsCC,MAAtC,EAA8CJ,UAA9C,CAAP;EACH,CA/vBiC;EAgwBlCM,qBAAqB,EAAE,UAASH,SAAT,EAAoBC,MAApB,EAA4BJ,UAA5B,EAAwC;IAC3D,IAAIjT,YAAY,GAAG,KAAK0T,mBAAL,CAAyBrX,CAAC,CAAC+W,SAAD,CAA1B,CAAnB;;IACA,IAAIvJ,IAAI,GAAG5M,MAAM,CAAC,EAAD,EAAKgW,UAAL,CAAjB;IACA,OAAOI,MAAM,CAACpW,MAAM,CAACgW,UAAD,EAAa,KAAKU,iBAAL,CAAuB3T,YAAvB,CAAb,EAAmD6J,IAAnD,CAAP,CAAb;EACH,CApwBiC;EAqwBlC8J,iBAAiB,EAAE,UAAS3T,YAAT,EAAuB;IACtC,OAAO;MACHsQ,WAAW,EAAE3T,gBAAgB,CAACqD,YAAD,CAD1B;MAEHuP,SAAS,EAAE,KAAKpI,aAAL,GAAqBb,KAArB,CAA2BtG,YAA3B,CAFR;MAGHwJ,QAAQ,EAAE,KAAKC,YAAL,CAAkBzJ,YAAlB;IAHP,CAAP;EAKH,CA3wBiC;EA4wBlC0T,mBAAmB,EAAE,UAASrP,QAAT,EAAmB;IACpC,OAAOhI,CAAC,CAACgI,QAAD,CAAD,CAAY6J,OAAZ,CAAoB,KAAKvB,aAAL,EAApB,CAAP;EACH,CA9wBiC;EA+wBlClD,YAAY,EAAE,UAAS6G,WAAT,EAAsB;IAChC,OAAOjU,CAAC,CAACiU,WAAD,CAAD,CAAe1N,IAAf,CAAoB,KAAK6F,YAAL,EAApB,CAAP;EACH,CAjxBiC;EAkxBlCmL,qBAAqB,EAAE,UAASjS,KAAT,EAAgBkS,aAAhB,EAA+B;IAClD,IAAIvL,MAAM,GAAG,CAAb;;IACA,IAAI3G,KAAJ,EAAW;MACPxE,IAAI,CAACwE,KAAD,EAAS,UAASmS,CAAT,EAAYjQ,IAAZ,EAAkB;QAC3ByE,MAAM,IAAIlM,aAAa,CAACyH,IAAD,EAAOgQ,aAAa,IAAI,KAAxB,CAAvB;MACH,CAFG,CAAJ;IAGH;;IACD,OAAOvL,MAAP;EACH,CA1xBiC;EA2xBlCF,gBAAgB,EAAE,YAAW;IACzB,IAAI,CAAC,KAAK2L,cAAV,EAA0B;MACtB,KAAKA,cAAL,GAAsB,QAAQ,IAAI1W,IAAJ,EAA9B;IACH;;IACD,OAAO,KAAK0W,cAAZ;EACH,CAhyBiC;EAiyBlCvL,YAAY,EAAE,YAAW;IACrB,OAAO,KAAKrB,aAAL,EAAP;EACH,CAnyBiC;EAoyBlC6M,cAAc,EAAE,YAAW;IACvB,OAAO,KAAK/H,cAAL,EAAP;EACH;AAtyBiC,CAAf,EAuyBpBgI,OAvyBoB,CAuyBZvW,eAvyBY,CAAvB;AAwyBAgC,gBAAgB,CAACuJ,SAAjB,GAA6BtL,oBAA7B;AACA,eAAe+B,gBAAf"},"metadata":{},"sourceType":"module"}