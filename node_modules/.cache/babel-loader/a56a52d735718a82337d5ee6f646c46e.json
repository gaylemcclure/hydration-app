{"ast":null,"code":"/**\r\n * DevExtreme (esm/ui/drop_down_editor/ui.drop_down_list.js)\r\n * Version: 21.2.7\r\n * Build date: Mon Apr 11 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\nimport { getOuterHeight } from \"../../core/utils/size\";\nimport $ from \"../../core/renderer\";\nimport { getWindow } from \"../../core/utils/window\";\nvar window = getWindow();\nimport eventsEngine from \"../../events/core/events_engine\";\nimport Guid from \"../../core/guid\";\nimport registerComponent from \"../../core/component_registrator\";\nimport { noop, ensureDefined, grep } from \"../../core/utils/common\";\nimport { isWindow, isDefined, isObject } from \"../../core/utils/type\";\nimport { extend } from \"../../core/utils/extend\";\nimport { inArray } from \"../../core/utils/array\";\nimport DropDownEditor from \"./ui.drop_down_editor\";\nimport List from \"../list_light\";\nimport errors from \"../widget/ui.errors\";\nimport { addNamespace } from \"../../events/utils/index\";\nimport devices from \"../../core/devices\";\nimport dataQuery from \"../../data/query\";\nimport { each } from \"../../core/utils/iterator\";\nimport DataExpressionMixin from \"../editor/ui.data_expression\";\nimport messageLocalization from \"../../localization/message\";\nimport { ChildDefaultTemplate } from \"../../core/templates/child_default_template\";\nimport { Deferred } from \"../../core/utils/deferred\";\nimport DataConverterMixin from \"../shared/grouped_data_converter_mixin\";\nvar LIST_ITEM_SELECTOR = \".dx-list-item\";\nvar LIST_ITEM_DATA_KEY = \"dxListItemData\";\nvar DROPDOWNLIST_POPUP_WRAPPER_CLASS = \"dx-dropdownlist-popup-wrapper\";\nvar SKIP_GESTURE_EVENT_CLASS = \"dx-skip-gesture-event\";\nvar SEARCH_EVENT = \"input\";\nvar SEARCH_MODES = [\"startswith\", \"contains\", \"endwith\", \"notcontains\"];\nvar useCompositionEvents = \"android\" !== devices.real().platform;\nvar DropDownList = DropDownEditor.inherit({\n  _supportedKeys: function () {\n    var parent = this.callBase();\n    return extend({}, parent, {\n      tab: function (e) {\n        if (this._allowSelectItemByTab()) {\n          this._saveValueChangeEvent(e);\n\n          var $focusedItem = $(this._list.option(\"focusedElement\"));\n          $focusedItem.length && this._setSelectedElement($focusedItem);\n        }\n\n        parent.tab.apply(this, arguments);\n      },\n      space: noop,\n      home: noop,\n      end: noop\n    });\n  },\n  _allowSelectItemByTab: function () {\n    return this.option(\"opened\") && \"instantly\" === this.option(\"applyValueMode\");\n  },\n  _setSelectedElement: function ($element) {\n    var value = this._valueGetter(this._list._getItemData($element));\n\n    this._setValue(value);\n  },\n  _setValue: function (value) {\n    this.option(\"value\", value);\n  },\n  _getDefaultOptions: function () {\n    return extend(this.callBase(), extend(DataExpressionMixin._dataExpressionDefaultOptions(), {\n      displayValue: void 0,\n      searchEnabled: false,\n      searchMode: \"contains\",\n      searchTimeout: 500,\n      minSearchLength: 0,\n      searchExpr: null,\n      valueChangeEvent: \"input change keyup\",\n      selectedItem: null,\n      noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\n      onSelectionChanged: null,\n      onItemClick: noop,\n      showDataBeforeSearch: false,\n      grouped: false,\n      groupTemplate: \"group\",\n      popupPosition: {\n        my: \"left top\",\n        at: \"left bottom\",\n        offset: {\n          h: 0,\n          v: 0\n        },\n        collision: \"flip\"\n      },\n      wrapItemText: false,\n      useItemTextAsTitle: false\n    }));\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: {\n        platform: \"ios\"\n      },\n      options: {\n        popupPosition: {\n          offset: {\n            v: -1\n          }\n        }\n      }\n    }, {\n      device: {\n        platform: \"generic\"\n      },\n      options: {\n        buttonsLocation: \"bottom center\"\n      }\n    }]);\n  },\n  _setOptionsByReference: function () {\n    this.callBase();\n    extend(this._optionsByReference, {\n      value: true,\n      selectedItem: true,\n      displayValue: true\n    });\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initDataExpressions();\n\n    this._initActions();\n\n    this._setListDataSource();\n\n    this._validateSearchMode();\n\n    this._clearSelectedItem();\n\n    this._initItems();\n  },\n  _setListFocusedElementOptionChange: function () {\n    this._list._updateParentActiveDescendant = this._updateActiveDescendant.bind(this);\n  },\n  _initItems: function () {\n    var items = this.option().items;\n\n    if (items && !items.length && this._dataSource) {\n      this.option().items = this._dataSource.items();\n    }\n  },\n  _initActions: function () {\n    this._initContentReadyAction();\n\n    this._initSelectionChangedAction();\n\n    this._initItemClickAction();\n  },\n  _initContentReadyAction: function () {\n    this._contentReadyAction = this._createActionByOption(\"onContentReady\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initSelectionChangedAction: function () {\n    this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n  },\n  _initItemClickAction: function () {\n    this._itemClickAction = this._createActionByOption(\"onItemClick\");\n  },\n  _initTemplates: function () {\n    this.callBase();\n\n    this._templateManager.addDefaultTemplates({\n      item: new ChildDefaultTemplate(\"item\")\n    });\n  },\n  _isEditable: function () {\n    return this.callBase() || this.option(\"searchEnabled\");\n  },\n  _saveFocusOnWidget: function (e) {\n    if (this._list && this._list.initialOption(\"focusStateEnabled\")) {\n      this._focusInput();\n    }\n  },\n  _fitIntoRange: function (value, start, end) {\n    if (value > end) {\n      return start;\n    }\n\n    if (value < start) {\n      return end;\n    }\n\n    return value;\n  },\n  _items: function () {\n    var items = this._getPlainItems(!this._list && this._dataSource.items());\n\n    var availableItems = new dataQuery(items).filter(\"disabled\", \"<>\", true).toArray();\n    return availableItems;\n  },\n  _calcNextItem: function (step) {\n    var items = this._items();\n\n    var nextIndex = this._fitIntoRange(this._getSelectedIndex() + step, 0, items.length - 1);\n\n    return items[nextIndex];\n  },\n  _getSelectedIndex: function () {\n    var items = this._items();\n\n    var selectedItem = this.option(\"selectedItem\");\n    var result = -1;\n    each(items, function (index, item) {\n      if (this._isValueEquals(item, selectedItem)) {\n        result = index;\n        return false;\n      }\n    }.bind(this));\n    return result;\n  },\n  _createPopup: function () {\n    this.callBase();\n\n    this._updateCustomBoundaryContainer();\n\n    this._popup.$wrapper().addClass(this._popupWrapperClass());\n\n    var $popupContent = this._popup.$content();\n\n    eventsEngine.off($popupContent, \"mouseup\");\n    eventsEngine.on($popupContent, \"mouseup\", this._saveFocusOnWidget.bind(this));\n    var that = this;\n\n    this._popup.on({\n      shown: function () {\n        that.$element().addClass(SKIP_GESTURE_EVENT_CLASS);\n      },\n      hidden: function () {\n        that.$element().removeClass(SKIP_GESTURE_EVENT_CLASS);\n      }\n    });\n  },\n  _updateCustomBoundaryContainer: function () {\n    var customContainer = this.option(\"dropDownOptions.container\");\n    var $container = customContainer && $(customContainer);\n\n    if ($container && $container.length && !isWindow($container.get(0))) {\n      var $containerWithParents = [].slice.call($container.parents());\n      $containerWithParents.unshift($container.get(0));\n      each($containerWithParents, function (i, parent) {\n        if (parent === $(\"body\").get(0)) {\n          return false;\n        } else if (\"hidden\" === window.getComputedStyle(parent).overflowY) {\n          this._$customBoundaryContainer = $(parent);\n          return false;\n        }\n      }.bind(this));\n    }\n  },\n  _popupWrapperClass: function () {\n    return DROPDOWNLIST_POPUP_WRAPPER_CLASS;\n  },\n  _renderInputValue: function () {\n    var value = this._getCurrentValue();\n\n    this._rejectValueLoading();\n\n    return this._loadInputValue(value, this._setSelectedItem.bind(this)).always(this.callBase.bind(this, value));\n  },\n  _loadInputValue: function (value, callback) {\n    return this._loadItem(value).always(callback);\n  },\n  _getItemFromPlain: function (value, cache) {\n    var plainItems;\n    var selectedItem;\n\n    if (cache && \"object\" !== typeof value) {\n      if (!cache.itemByValue) {\n        cache.itemByValue = {};\n        plainItems = this._getPlainItems();\n        plainItems.forEach(function (item) {\n          cache.itemByValue[this._valueGetter(item)] = item;\n        }, this);\n      }\n\n      selectedItem = cache.itemByValue[value];\n    }\n\n    if (!selectedItem) {\n      plainItems = this._getPlainItems();\n      selectedItem = grep(plainItems, function (item) {\n        return this._isValueEquals(this._valueGetter(item), value);\n      }.bind(this))[0];\n    }\n\n    return selectedItem;\n  },\n  _loadItem: function (value, cache) {\n    var selectedItem = this._getItemFromPlain(value, cache);\n\n    return void 0 !== selectedItem ? new Deferred().resolve(selectedItem).promise() : this._loadValue(value);\n  },\n  _getPlainItems: function (items) {\n    var plainItems = [];\n    items = items || this.option(\"items\") || this._dataSource.items() || [];\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i] && items[i].items) {\n        plainItems = plainItems.concat(items[i].items);\n      } else {\n        plainItems.push(items[i]);\n      }\n    }\n\n    return plainItems;\n  },\n\n  _updateActiveDescendant() {\n    var _this$_list;\n\n    var opened = this.option(\"opened\");\n    var listFocusedItemId = null === (_this$_list = this._list) || void 0 === _this$_list ? void 0 : _this$_list.getFocusedItemId();\n    var isElementOnDom = $(\"#\".concat(listFocusedItemId)).length > 0;\n    var activedescendant = opened && isElementOnDom && listFocusedItemId;\n    this.setAria({\n      activedescendant: activedescendant || null\n    });\n  },\n\n  _setSelectedItem: function (item) {\n    var displayValue = this._displayValue(item);\n\n    this.option(\"selectedItem\", ensureDefined(item, null));\n    this.option(\"displayValue\", displayValue);\n  },\n  _displayValue: function (item) {\n    return this._displayGetter(item);\n  },\n  _refreshSelected: function () {\n    var cache = {};\n\n    this._listItemElements().each(function (_, itemElement) {\n      var $itemElement = $(itemElement);\n\n      var itemValue = this._valueGetter($itemElement.data(LIST_ITEM_DATA_KEY));\n\n      var isItemSelected = this._isSelectedValue(itemValue, cache);\n\n      if (isItemSelected) {\n        this._list.selectItem($itemElement);\n      } else {\n        this._list.unselectItem($itemElement);\n      }\n    }.bind(this));\n  },\n  _popupShownHandler: function () {\n    this.callBase();\n\n    this._setFocusPolicy();\n  },\n  _setFocusPolicy: function () {\n    if (!this.option(\"focusStateEnabled\") || !this._list) {\n      return;\n    }\n\n    this._list.option(\"focusedElement\", null);\n  },\n  _isSelectedValue: function (value) {\n    return this._isValueEquals(value, this.option(\"value\"));\n  },\n  _validateSearchMode: function () {\n    var searchMode = this.option(\"searchMode\");\n    var normalizedSearchMode = searchMode.toLowerCase();\n\n    if (inArray(normalizedSearchMode, SEARCH_MODES) < 0) {\n      throw errors.Error(\"E1019\", searchMode);\n    }\n  },\n  _clearSelectedItem: function () {\n    this.option(\"selectedItem\", null);\n  },\n  _processDataSourceChanging: function () {\n    this._setListDataSource();\n\n    this._renderInputValue().fail(function () {\n      if (this._isCustomValueAllowed()) {\n        return;\n      }\n\n      this._clearSelectedItem();\n    }.bind(this));\n  },\n  _isCustomValueAllowed: function () {\n    return this.option(\"displayCustomValue\");\n  },\n  reset: function () {\n    this.callBase();\n\n    this._clearFilter();\n\n    this._clearSelectedItem();\n  },\n  _listItemElements: function () {\n    return this._$list ? this._$list.find(LIST_ITEM_SELECTOR) : $();\n  },\n  _popupConfig: function () {\n    return extend(this.callBase(), {\n      templatesRenderAsynchronously: false,\n      autoResizeEnabled: false,\n      maxHeight: this._getMaxHeight.bind(this)\n    });\n  },\n  _renderPopupContent: function () {\n    this.callBase();\n\n    this._renderList();\n  },\n\n  _getKeyboardListeners() {\n    var canListHaveFocus = this._canListHaveFocus();\n\n    return this.callBase().concat([!canListHaveFocus && this._list]);\n  },\n\n  _setAriaTargetForList: function () {\n    this._list._getAriaTarget = this._getAriaTarget.bind(this);\n  },\n  _renderList: function () {\n    this._listId = \"dx-\" + new Guid()._value;\n    var $list = this._$list = $(\"<div>\").attr(\"id\", this._listId).appendTo(this._popup.$content());\n    this._list = this._createComponent($list, List, this._listConfig());\n\n    this._refreshList();\n\n    this._setAriaTargetForList();\n\n    this._list.option(\"_listAttributes\", {\n      role: \"combobox\"\n    });\n\n    this._renderPreventBlurOnListClick();\n\n    this._setListFocusedElementOptionChange();\n  },\n  _renderPreventBlurOnListClick: function () {\n    var eventName = addNamespace(\"mousedown\", \"dxDropDownList\");\n    eventsEngine.off(this._$list, eventName);\n    eventsEngine.on(this._$list, eventName, e => e.preventDefault());\n  },\n  _renderOpenedState: function () {\n    this.callBase();\n    this._list && this._updateActiveDescendant();\n    this.setAria({\n      controls: this._list && this._listId,\n      owns: this._popup && this._popupContentId\n    });\n  },\n  _setDefaultAria: function () {\n    this.setAria({\n      haspopup: \"listbox\",\n      autocomplete: \"list\"\n    });\n  },\n  _refreshList: function () {\n    if (this._list && this._shouldRefreshDataSource()) {\n      this._setListDataSource();\n    }\n  },\n  _shouldRefreshDataSource: function () {\n    var dataSourceProvided = !!this._list.option(\"dataSource\");\n    return dataSourceProvided !== this._needPassDataSourceToList();\n  },\n  _isDesktopDevice: function () {\n    return \"desktop\" === devices.real().deviceType;\n  },\n  _listConfig: function () {\n    var options = {\n      selectionMode: \"single\",\n      _templates: this.option(\"_templates\"),\n      templateProvider: this.option(\"templateProvider\"),\n      noDataText: this.option(\"noDataText\"),\n      grouped: this.option(\"grouped\"),\n      wrapItemText: this.option(\"wrapItemText\"),\n      useItemTextAsTitle: this.option(\"useItemTextAsTitle\"),\n      onContentReady: this._listContentReadyHandler.bind(this),\n      itemTemplate: this.option(\"itemTemplate\"),\n      indicateLoading: false,\n      keyExpr: this._getCollectionKeyExpr(),\n      displayExpr: this._displayGetterExpr(),\n      groupTemplate: this.option(\"groupTemplate\"),\n      onItemClick: this._listItemClickAction.bind(this),\n      dataSource: this._getDataSource(),\n      _revertPageOnEmptyLoad: true,\n      hoverStateEnabled: this._isDesktopDevice() ? this.option(\"hoverStateEnabled\") : false,\n      focusStateEnabled: this._isDesktopDevice() ? this.option(\"focusStateEnabled\") : false\n    };\n\n    if (!this._canListHaveFocus()) {\n      options.tabIndex = null;\n    }\n\n    return options;\n  },\n  _canListHaveFocus: () => false,\n  _getDataSource: function () {\n    return this._needPassDataSourceToList() ? this._dataSource : null;\n  },\n  _dataSourceOptions: function () {\n    return {\n      paginate: false\n    };\n  },\n  _getGroupedOption: function () {\n    return this.option(\"grouped\");\n  },\n  _dataSourceFromUrlLoadMode: function () {\n    return \"raw\";\n  },\n  _listContentReadyHandler: function () {\n    this._list = this._list || this._$list.dxList(\"instance\");\n\n    if (!this.option(\"deferRendering\")) {\n      this._refreshSelected();\n    }\n\n    this._dimensionChanged();\n\n    this._contentReadyAction();\n  },\n  _setListOption: function (optionName, value) {\n    this._setWidgetOption(\"_list\", arguments);\n  },\n  _listItemClickAction: function (e) {\n    this._listItemClickHandler(e);\n\n    this._itemClickAction(e);\n  },\n  _listItemClickHandler: noop,\n  _setListDataSource: function () {\n    if (!this._list) {\n      return;\n    }\n\n    this._setListOption(\"dataSource\", this._getDataSource());\n\n    if (!this._needPassDataSourceToList()) {\n      this._setListOption(\"items\", []);\n    }\n  },\n  _needPassDataSourceToList: function () {\n    return this.option(\"showDataBeforeSearch\") || this._isMinSearchLengthExceeded();\n  },\n  _isMinSearchLengthExceeded: function () {\n    return this._searchValue().toString().length >= this.option(\"minSearchLength\");\n  },\n  _needClearFilter: function () {\n    return this._canKeepDataSource() ? false : this._needPassDataSourceToList();\n  },\n  _canKeepDataSource: function () {\n    var _this$_dataSource;\n\n    var isMinSearchLengthExceeded = this._isMinSearchLengthExceeded();\n\n    return (null === (_this$_dataSource = this._dataSource) || void 0 === _this$_dataSource ? void 0 : _this$_dataSource.isLoaded()) && this.option(\"showDataBeforeSearch\") && this.option(\"minSearchLength\") && !isMinSearchLengthExceeded && !this._isLastMinSearchLengthExceeded;\n  },\n  _searchValue: function () {\n    return this._input().val() || \"\";\n  },\n  _getSearchEvent: function () {\n    return addNamespace(SEARCH_EVENT, this.NAME + \"Search\");\n  },\n  _getCompositionStartEvent: function () {\n    return addNamespace(\"compositionstart\", this.NAME + \"CompositionStart\");\n  },\n  _getCompositionEndEvent: function () {\n    return addNamespace(\"compositionend\", this.NAME + \"CompositionEnd\");\n  },\n  _getSetFocusPolicyEvent: function () {\n    return addNamespace(\"input\", this.NAME + \"FocusPolicy\");\n  },\n  _renderEvents: function () {\n    this.callBase();\n    eventsEngine.on(this._input(), this._getSetFocusPolicyEvent(), () => {\n      this._setFocusPolicy();\n    });\n\n    if (this._shouldRenderSearchEvent()) {\n      eventsEngine.on(this._input(), this._getSearchEvent(), e => {\n        this._searchHandler(e);\n      });\n\n      if (useCompositionEvents) {\n        eventsEngine.on(this._input(), this._getCompositionStartEvent(), () => {\n          this._isTextCompositionInProgress(true);\n        });\n        eventsEngine.on(this._input(), this._getCompositionEndEvent(), e => {\n          this._isTextCompositionInProgress(void 0);\n\n          this._searchHandler(e, this._searchValue());\n        });\n      }\n    }\n  },\n  _shouldRenderSearchEvent: function () {\n    return this.option(\"searchEnabled\");\n  },\n  _refreshEvents: function () {\n    eventsEngine.off(this._input(), this._getSearchEvent());\n    eventsEngine.off(this._input(), this._getSetFocusPolicyEvent());\n\n    if (useCompositionEvents) {\n      eventsEngine.off(this._input(), this._getCompositionStartEvent());\n      eventsEngine.off(this._input(), this._getCompositionEndEvent());\n    }\n\n    this.callBase();\n  },\n  _isTextCompositionInProgress: function (value) {\n    if (arguments.length) {\n      this._isTextComposition = value;\n    } else {\n      return this._isTextComposition;\n    }\n  },\n  _searchHandler: function (e, searchValue) {\n    if (this._isTextCompositionInProgress()) {\n      return;\n    }\n\n    if (!this._isMinSearchLengthExceeded()) {\n      this._searchCanceled();\n\n      return;\n    }\n\n    var searchTimeout = this.option(\"searchTimeout\");\n\n    if (searchTimeout) {\n      this._clearSearchTimer();\n\n      this._searchTimer = setTimeout(() => {\n        this._searchDataSource(searchValue);\n      }, searchTimeout);\n    } else {\n      this._searchDataSource(searchValue);\n    }\n  },\n  _searchCanceled: function () {\n    this._clearSearchTimer();\n\n    if (this._needClearFilter()) {\n      this._filterDataSource(null);\n    }\n\n    this._refreshList();\n  },\n  _searchDataSource: function () {\n    var searchValue = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._searchValue();\n\n    this._filterDataSource(searchValue);\n  },\n  _filterDataSource: function (searchValue) {\n    this._clearSearchTimer();\n\n    var dataSource = this._dataSource;\n\n    if (dataSource) {\n      dataSource.searchExpr(this.option(\"searchExpr\") || this._displayGetterExpr());\n      dataSource.searchOperation(this.option(\"searchMode\"));\n      dataSource.searchValue(searchValue);\n      dataSource.load().done(this._dataSourceFiltered.bind(this, searchValue));\n    }\n  },\n  _clearFilter: function () {\n    var dataSource = this._dataSource;\n    dataSource && dataSource.searchValue() && dataSource.searchValue(null);\n  },\n  _dataSourceFiltered: function () {\n    this._isLastMinSearchLengthExceeded = this._isMinSearchLengthExceeded();\n\n    this._refreshList();\n\n    this._refreshPopupVisibility();\n  },\n  _shouldOpenPopup: function () {\n    return this._hasItemsToShow();\n  },\n  _refreshPopupVisibility: function () {\n    if (this.option(\"readOnly\") || !this._searchValue()) {\n      return;\n    }\n\n    var shouldOpenPopup = this._shouldOpenPopup();\n\n    if (shouldOpenPopup && !this._isFocused()) {\n      return;\n    }\n\n    this.option(\"opened\", shouldOpenPopup);\n\n    if (shouldOpenPopup) {\n      this._dimensionChanged();\n    }\n  },\n  _dataSourceChangedHandler: function (newItems) {\n    if (0 === this._dataSource.pageIndex()) {\n      this.option().items = newItems;\n    } else {\n      this.option().items = this.option().items.concat(newItems);\n    }\n  },\n  _hasItemsToShow: function () {\n    var resultItems = this._dataSource && this._dataSource.items() || [];\n    var resultAmount = resultItems.length;\n\n    var isMinSearchLengthExceeded = this._needPassDataSourceToList();\n\n    return !!(isMinSearchLengthExceeded && resultAmount);\n  },\n  _clearSearchTimer: function () {\n    clearTimeout(this._searchTimer);\n    delete this._searchTimer;\n  },\n  _popupShowingHandler: function () {\n    this._dimensionChanged();\n  },\n  _dimensionChanged: function () {\n    this.callBase(arguments);\n    this._popup && this._updatePopupDimensions();\n  },\n  _needPopupRepaint: function () {\n    if (!this._dataSource) {\n      return false;\n    }\n\n    var currentPageIndex = this._dataSource.pageIndex();\n\n    var needRepaint = isDefined(this._pageIndex) && currentPageIndex <= this._pageIndex;\n\n    this._pageIndex = currentPageIndex;\n    return needRepaint;\n  },\n  _updatePopupDimensions: function () {\n    if (this._needPopupRepaint()) {\n      this._popup.repaint();\n    }\n\n    this._list && this._list.updateDimensions();\n  },\n  _getMaxHeight: function () {\n    var $element = this.$element();\n    var $customBoundaryContainer = this._$customBoundaryContainer;\n    var offsetTop = $element.offset().top - ($customBoundaryContainer ? $customBoundaryContainer.offset().top : 0);\n    var windowHeight = getOuterHeight(window);\n    var containerHeight = $customBoundaryContainer ? Math.min(getOuterHeight($customBoundaryContainer), windowHeight) : windowHeight;\n    var maxHeight = Math.max(offsetTop, containerHeight - offsetTop - getOuterHeight($element));\n    return Math.min(.5 * containerHeight, maxHeight);\n  },\n  _clean: function () {\n    if (this._list) {\n      delete this._list;\n    }\n\n    delete this._isLastMinSearchLengthExceeded;\n    this.callBase();\n  },\n  _dispose: function () {\n    this._clearSearchTimer();\n\n    this.callBase();\n  },\n  _setCollectionWidgetOption: function () {\n    this._setListOption.apply(this, arguments);\n  },\n  _setSubmitValue: function () {\n    var value = this.option(\"value\");\n    var submitValue = this._shouldUseDisplayValue(value) ? this._displayGetter(value) : value;\n\n    this._getSubmitElement().val(submitValue);\n  },\n  _shouldUseDisplayValue: function (value) {\n    return \"this\" === this.option(\"valueExpr\") && isObject(value);\n  },\n  _optionChanged: function (args) {\n    this._dataExpressionOptionChanged(args);\n\n    switch (args.name) {\n      case \"hoverStateEnabled\":\n      case \"focusStateEnabled\":\n        this._isDesktopDevice() && this._setListOption(args.name, args.value);\n        this.callBase(args);\n        break;\n\n      case \"items\":\n        if (!this.option(\"dataSource\")) {\n          this._processDataSourceChanging();\n        }\n\n        break;\n\n      case \"dataSource\":\n        this._processDataSourceChanging();\n\n        break;\n\n      case \"valueExpr\":\n        this._renderValue();\n\n        this._setListOption(\"keyExpr\", this._getCollectionKeyExpr());\n\n        break;\n\n      case \"displayExpr\":\n        this._renderValue();\n\n        this._setListOption(\"displayExpr\", this._displayGetterExpr());\n\n        break;\n\n      case \"searchMode\":\n        this._validateSearchMode();\n\n        break;\n\n      case \"minSearchLength\":\n        this._refreshList();\n\n        break;\n\n      case \"searchEnabled\":\n      case \"showDataBeforeSearch\":\n      case \"searchExpr\":\n        this._invalidate();\n\n        break;\n\n      case \"onContentReady\":\n        this._initContentReadyAction();\n\n        break;\n\n      case \"onSelectionChanged\":\n        this._initSelectionChangedAction();\n\n        break;\n\n      case \"onItemClick\":\n        this._initItemClickAction();\n\n        break;\n\n      case \"grouped\":\n      case \"groupTemplate\":\n      case \"wrapItemText\":\n      case \"noDataText\":\n      case \"useItemTextAsTitle\":\n        this._setListOption(args.name);\n\n        break;\n\n      case \"displayValue\":\n        this.option(\"text\", args.value);\n        break;\n\n      case \"itemTemplate\":\n      case \"searchTimeout\":\n        break;\n\n      case \"selectedItem\":\n        if (args.previousValue !== args.value) {\n          this._selectionChangedAction({\n            selectedItem: args.value\n          });\n        }\n\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n}).include(DataExpressionMixin, DataConverterMixin);\nregisterComponent(\"dxDropDownList\", DropDownList);\nexport default DropDownList;","map":{"version":3,"names":["getOuterHeight","$","getWindow","window","eventsEngine","Guid","registerComponent","noop","ensureDefined","grep","isWindow","isDefined","isObject","extend","inArray","DropDownEditor","List","errors","addNamespace","devices","dataQuery","each","DataExpressionMixin","messageLocalization","ChildDefaultTemplate","Deferred","DataConverterMixin","LIST_ITEM_SELECTOR","LIST_ITEM_DATA_KEY","DROPDOWNLIST_POPUP_WRAPPER_CLASS","SKIP_GESTURE_EVENT_CLASS","SEARCH_EVENT","SEARCH_MODES","useCompositionEvents","real","platform","DropDownList","inherit","_supportedKeys","parent","callBase","tab","e","_allowSelectItemByTab","_saveValueChangeEvent","$focusedItem","_list","option","length","_setSelectedElement","apply","arguments","space","home","end","$element","value","_valueGetter","_getItemData","_setValue","_getDefaultOptions","_dataExpressionDefaultOptions","displayValue","searchEnabled","searchMode","searchTimeout","minSearchLength","searchExpr","valueChangeEvent","selectedItem","noDataText","format","onSelectionChanged","onItemClick","showDataBeforeSearch","grouped","groupTemplate","popupPosition","my","at","offset","h","v","collision","wrapItemText","useItemTextAsTitle","_defaultOptionsRules","concat","device","options","buttonsLocation","_setOptionsByReference","_optionsByReference","_init","_initDataExpressions","_initActions","_setListDataSource","_validateSearchMode","_clearSelectedItem","_initItems","_setListFocusedElementOptionChange","_updateParentActiveDescendant","_updateActiveDescendant","bind","items","_dataSource","_initContentReadyAction","_initSelectionChangedAction","_initItemClickAction","_contentReadyAction","_createActionByOption","excludeValidators","_selectionChangedAction","_itemClickAction","_initTemplates","_templateManager","addDefaultTemplates","item","_isEditable","_saveFocusOnWidget","initialOption","_focusInput","_fitIntoRange","start","_items","_getPlainItems","availableItems","filter","toArray","_calcNextItem","step","nextIndex","_getSelectedIndex","result","index","_isValueEquals","_createPopup","_updateCustomBoundaryContainer","_popup","$wrapper","addClass","_popupWrapperClass","$popupContent","$content","off","on","that","shown","hidden","removeClass","customContainer","$container","get","$containerWithParents","slice","call","parents","unshift","i","getComputedStyle","overflowY","_$customBoundaryContainer","_renderInputValue","_getCurrentValue","_rejectValueLoading","_loadInputValue","_setSelectedItem","always","callback","_loadItem","_getItemFromPlain","cache","plainItems","itemByValue","forEach","resolve","promise","_loadValue","push","_this$_list","opened","listFocusedItemId","getFocusedItemId","isElementOnDom","activedescendant","setAria","_displayValue","_displayGetter","_refreshSelected","_listItemElements","_","itemElement","$itemElement","itemValue","data","isItemSelected","_isSelectedValue","selectItem","unselectItem","_popupShownHandler","_setFocusPolicy","normalizedSearchMode","toLowerCase","Error","_processDataSourceChanging","fail","_isCustomValueAllowed","reset","_clearFilter","_$list","find","_popupConfig","templatesRenderAsynchronously","autoResizeEnabled","maxHeight","_getMaxHeight","_renderPopupContent","_renderList","_getKeyboardListeners","canListHaveFocus","_canListHaveFocus","_setAriaTargetForList","_getAriaTarget","_listId","_value","$list","attr","appendTo","_createComponent","_listConfig","_refreshList","role","_renderPreventBlurOnListClick","eventName","preventDefault","_renderOpenedState","controls","owns","_popupContentId","_setDefaultAria","haspopup","autocomplete","_shouldRefreshDataSource","dataSourceProvided","_needPassDataSourceToList","_isDesktopDevice","deviceType","selectionMode","_templates","templateProvider","onContentReady","_listContentReadyHandler","itemTemplate","indicateLoading","keyExpr","_getCollectionKeyExpr","displayExpr","_displayGetterExpr","_listItemClickAction","dataSource","_getDataSource","_revertPageOnEmptyLoad","hoverStateEnabled","focusStateEnabled","tabIndex","_dataSourceOptions","paginate","_getGroupedOption","_dataSourceFromUrlLoadMode","dxList","_dimensionChanged","_setListOption","optionName","_setWidgetOption","_listItemClickHandler","_isMinSearchLengthExceeded","_searchValue","toString","_needClearFilter","_canKeepDataSource","_this$_dataSource","isMinSearchLengthExceeded","isLoaded","_isLastMinSearchLengthExceeded","_input","val","_getSearchEvent","NAME","_getCompositionStartEvent","_getCompositionEndEvent","_getSetFocusPolicyEvent","_renderEvents","_shouldRenderSearchEvent","_searchHandler","_isTextCompositionInProgress","_refreshEvents","_isTextComposition","searchValue","_searchCanceled","_clearSearchTimer","_searchTimer","setTimeout","_searchDataSource","_filterDataSource","searchOperation","load","done","_dataSourceFiltered","_refreshPopupVisibility","_shouldOpenPopup","_hasItemsToShow","shouldOpenPopup","_isFocused","_dataSourceChangedHandler","newItems","pageIndex","resultItems","resultAmount","clearTimeout","_popupShowingHandler","_updatePopupDimensions","_needPopupRepaint","currentPageIndex","needRepaint","_pageIndex","repaint","updateDimensions","$customBoundaryContainer","offsetTop","top","windowHeight","containerHeight","Math","min","max","_clean","_dispose","_setCollectionWidgetOption","_setSubmitValue","submitValue","_shouldUseDisplayValue","_getSubmitElement","_optionChanged","args","_dataExpressionOptionChanged","name","_renderValue","_invalidate","previousValue","include"],"sources":["/Users/gaylemcclure/Dev/water-app/node_modules/devextreme/esm/ui/drop_down_editor/ui.drop_down_list.js"],"sourcesContent":["/**\r\n * DevExtreme (esm/ui/drop_down_editor/ui.drop_down_list.js)\r\n * Version: 21.2.7\r\n * Build date: Mon Apr 11 2022\r\n *\r\n * Copyright (c) 2012 - 2022 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\nimport {\r\n    getOuterHeight\r\n} from \"../../core/utils/size\";\r\nimport $ from \"../../core/renderer\";\r\nimport {\r\n    getWindow\r\n} from \"../../core/utils/window\";\r\nvar window = getWindow();\r\nimport eventsEngine from \"../../events/core/events_engine\";\r\nimport Guid from \"../../core/guid\";\r\nimport registerComponent from \"../../core/component_registrator\";\r\nimport {\r\n    noop,\r\n    ensureDefined,\r\n    grep\r\n} from \"../../core/utils/common\";\r\nimport {\r\n    isWindow,\r\n    isDefined,\r\n    isObject\r\n} from \"../../core/utils/type\";\r\nimport {\r\n    extend\r\n} from \"../../core/utils/extend\";\r\nimport {\r\n    inArray\r\n} from \"../../core/utils/array\";\r\nimport DropDownEditor from \"./ui.drop_down_editor\";\r\nimport List from \"../list_light\";\r\nimport errors from \"../widget/ui.errors\";\r\nimport {\r\n    addNamespace\r\n} from \"../../events/utils/index\";\r\nimport devices from \"../../core/devices\";\r\nimport dataQuery from \"../../data/query\";\r\nimport {\r\n    each\r\n} from \"../../core/utils/iterator\";\r\nimport DataExpressionMixin from \"../editor/ui.data_expression\";\r\nimport messageLocalization from \"../../localization/message\";\r\nimport {\r\n    ChildDefaultTemplate\r\n} from \"../../core/templates/child_default_template\";\r\nimport {\r\n    Deferred\r\n} from \"../../core/utils/deferred\";\r\nimport DataConverterMixin from \"../shared/grouped_data_converter_mixin\";\r\nvar LIST_ITEM_SELECTOR = \".dx-list-item\";\r\nvar LIST_ITEM_DATA_KEY = \"dxListItemData\";\r\nvar DROPDOWNLIST_POPUP_WRAPPER_CLASS = \"dx-dropdownlist-popup-wrapper\";\r\nvar SKIP_GESTURE_EVENT_CLASS = \"dx-skip-gesture-event\";\r\nvar SEARCH_EVENT = \"input\";\r\nvar SEARCH_MODES = [\"startswith\", \"contains\", \"endwith\", \"notcontains\"];\r\nvar useCompositionEvents = \"android\" !== devices.real().platform;\r\nvar DropDownList = DropDownEditor.inherit({\r\n    _supportedKeys: function() {\r\n        var parent = this.callBase();\r\n        return extend({}, parent, {\r\n            tab: function(e) {\r\n                if (this._allowSelectItemByTab()) {\r\n                    this._saveValueChangeEvent(e);\r\n                    var $focusedItem = $(this._list.option(\"focusedElement\"));\r\n                    $focusedItem.length && this._setSelectedElement($focusedItem)\r\n                }\r\n                parent.tab.apply(this, arguments)\r\n            },\r\n            space: noop,\r\n            home: noop,\r\n            end: noop\r\n        })\r\n    },\r\n    _allowSelectItemByTab: function() {\r\n        return this.option(\"opened\") && \"instantly\" === this.option(\"applyValueMode\")\r\n    },\r\n    _setSelectedElement: function($element) {\r\n        var value = this._valueGetter(this._list._getItemData($element));\r\n        this._setValue(value)\r\n    },\r\n    _setValue: function(value) {\r\n        this.option(\"value\", value)\r\n    },\r\n    _getDefaultOptions: function() {\r\n        return extend(this.callBase(), extend(DataExpressionMixin._dataExpressionDefaultOptions(), {\r\n            displayValue: void 0,\r\n            searchEnabled: false,\r\n            searchMode: \"contains\",\r\n            searchTimeout: 500,\r\n            minSearchLength: 0,\r\n            searchExpr: null,\r\n            valueChangeEvent: \"input change keyup\",\r\n            selectedItem: null,\r\n            noDataText: messageLocalization.format(\"dxCollectionWidget-noDataText\"),\r\n            onSelectionChanged: null,\r\n            onItemClick: noop,\r\n            showDataBeforeSearch: false,\r\n            grouped: false,\r\n            groupTemplate: \"group\",\r\n            popupPosition: {\r\n                my: \"left top\",\r\n                at: \"left bottom\",\r\n                offset: {\r\n                    h: 0,\r\n                    v: 0\r\n                },\r\n                collision: \"flip\"\r\n            },\r\n            wrapItemText: false,\r\n            useItemTextAsTitle: false\r\n        }))\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: {\r\n                platform: \"ios\"\r\n            },\r\n            options: {\r\n                popupPosition: {\r\n                    offset: {\r\n                        v: -1\r\n                    }\r\n                }\r\n            }\r\n        }, {\r\n            device: {\r\n                platform: \"generic\"\r\n            },\r\n            options: {\r\n                buttonsLocation: \"bottom center\"\r\n            }\r\n        }])\r\n    },\r\n    _setOptionsByReference: function() {\r\n        this.callBase();\r\n        extend(this._optionsByReference, {\r\n            value: true,\r\n            selectedItem: true,\r\n            displayValue: true\r\n        })\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initDataExpressions();\r\n        this._initActions();\r\n        this._setListDataSource();\r\n        this._validateSearchMode();\r\n        this._clearSelectedItem();\r\n        this._initItems()\r\n    },\r\n    _setListFocusedElementOptionChange: function() {\r\n        this._list._updateParentActiveDescendant = this._updateActiveDescendant.bind(this)\r\n    },\r\n    _initItems: function() {\r\n        var items = this.option().items;\r\n        if (items && !items.length && this._dataSource) {\r\n            this.option().items = this._dataSource.items()\r\n        }\r\n    },\r\n    _initActions: function() {\r\n        this._initContentReadyAction();\r\n        this._initSelectionChangedAction();\r\n        this._initItemClickAction()\r\n    },\r\n    _initContentReadyAction: function() {\r\n        this._contentReadyAction = this._createActionByOption(\"onContentReady\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _initSelectionChangedAction: function() {\r\n        this._selectionChangedAction = this._createActionByOption(\"onSelectionChanged\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        })\r\n    },\r\n    _initItemClickAction: function() {\r\n        this._itemClickAction = this._createActionByOption(\"onItemClick\")\r\n    },\r\n    _initTemplates: function() {\r\n        this.callBase();\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new ChildDefaultTemplate(\"item\")\r\n        })\r\n    },\r\n    _isEditable: function() {\r\n        return this.callBase() || this.option(\"searchEnabled\")\r\n    },\r\n    _saveFocusOnWidget: function(e) {\r\n        if (this._list && this._list.initialOption(\"focusStateEnabled\")) {\r\n            this._focusInput()\r\n        }\r\n    },\r\n    _fitIntoRange: function(value, start, end) {\r\n        if (value > end) {\r\n            return start\r\n        }\r\n        if (value < start) {\r\n            return end\r\n        }\r\n        return value\r\n    },\r\n    _items: function() {\r\n        var items = this._getPlainItems(!this._list && this._dataSource.items());\r\n        var availableItems = new dataQuery(items).filter(\"disabled\", \"<>\", true).toArray();\r\n        return availableItems\r\n    },\r\n    _calcNextItem: function(step) {\r\n        var items = this._items();\r\n        var nextIndex = this._fitIntoRange(this._getSelectedIndex() + step, 0, items.length - 1);\r\n        return items[nextIndex]\r\n    },\r\n    _getSelectedIndex: function() {\r\n        var items = this._items();\r\n        var selectedItem = this.option(\"selectedItem\");\r\n        var result = -1;\r\n        each(items, function(index, item) {\r\n            if (this._isValueEquals(item, selectedItem)) {\r\n                result = index;\r\n                return false\r\n            }\r\n        }.bind(this));\r\n        return result\r\n    },\r\n    _createPopup: function() {\r\n        this.callBase();\r\n        this._updateCustomBoundaryContainer();\r\n        this._popup.$wrapper().addClass(this._popupWrapperClass());\r\n        var $popupContent = this._popup.$content();\r\n        eventsEngine.off($popupContent, \"mouseup\");\r\n        eventsEngine.on($popupContent, \"mouseup\", this._saveFocusOnWidget.bind(this));\r\n        var that = this;\r\n        this._popup.on({\r\n            shown: function() {\r\n                that.$element().addClass(SKIP_GESTURE_EVENT_CLASS)\r\n            },\r\n            hidden: function() {\r\n                that.$element().removeClass(SKIP_GESTURE_EVENT_CLASS)\r\n            }\r\n        })\r\n    },\r\n    _updateCustomBoundaryContainer: function() {\r\n        var customContainer = this.option(\"dropDownOptions.container\");\r\n        var $container = customContainer && $(customContainer);\r\n        if ($container && $container.length && !isWindow($container.get(0))) {\r\n            var $containerWithParents = [].slice.call($container.parents());\r\n            $containerWithParents.unshift($container.get(0));\r\n            each($containerWithParents, function(i, parent) {\r\n                if (parent === $(\"body\").get(0)) {\r\n                    return false\r\n                } else if (\"hidden\" === window.getComputedStyle(parent).overflowY) {\r\n                    this._$customBoundaryContainer = $(parent);\r\n                    return false\r\n                }\r\n            }.bind(this))\r\n        }\r\n    },\r\n    _popupWrapperClass: function() {\r\n        return DROPDOWNLIST_POPUP_WRAPPER_CLASS\r\n    },\r\n    _renderInputValue: function() {\r\n        var value = this._getCurrentValue();\r\n        this._rejectValueLoading();\r\n        return this._loadInputValue(value, this._setSelectedItem.bind(this)).always(this.callBase.bind(this, value))\r\n    },\r\n    _loadInputValue: function(value, callback) {\r\n        return this._loadItem(value).always(callback)\r\n    },\r\n    _getItemFromPlain: function(value, cache) {\r\n        var plainItems;\r\n        var selectedItem;\r\n        if (cache && \"object\" !== typeof value) {\r\n            if (!cache.itemByValue) {\r\n                cache.itemByValue = {};\r\n                plainItems = this._getPlainItems();\r\n                plainItems.forEach((function(item) {\r\n                    cache.itemByValue[this._valueGetter(item)] = item\r\n                }), this)\r\n            }\r\n            selectedItem = cache.itemByValue[value]\r\n        }\r\n        if (!selectedItem) {\r\n            plainItems = this._getPlainItems();\r\n            selectedItem = grep(plainItems, function(item) {\r\n                return this._isValueEquals(this._valueGetter(item), value)\r\n            }.bind(this))[0]\r\n        }\r\n        return selectedItem\r\n    },\r\n    _loadItem: function(value, cache) {\r\n        var selectedItem = this._getItemFromPlain(value, cache);\r\n        return void 0 !== selectedItem ? (new Deferred).resolve(selectedItem).promise() : this._loadValue(value)\r\n    },\r\n    _getPlainItems: function(items) {\r\n        var plainItems = [];\r\n        items = items || this.option(\"items\") || this._dataSource.items() || [];\r\n        for (var i = 0; i < items.length; i++) {\r\n            if (items[i] && items[i].items) {\r\n                plainItems = plainItems.concat(items[i].items)\r\n            } else {\r\n                plainItems.push(items[i])\r\n            }\r\n        }\r\n        return plainItems\r\n    },\r\n    _updateActiveDescendant() {\r\n        var _this$_list;\r\n        var opened = this.option(\"opened\");\r\n        var listFocusedItemId = null === (_this$_list = this._list) || void 0 === _this$_list ? void 0 : _this$_list.getFocusedItemId();\r\n        var isElementOnDom = $(\"#\".concat(listFocusedItemId)).length > 0;\r\n        var activedescendant = opened && isElementOnDom && listFocusedItemId;\r\n        this.setAria({\r\n            activedescendant: activedescendant || null\r\n        })\r\n    },\r\n    _setSelectedItem: function(item) {\r\n        var displayValue = this._displayValue(item);\r\n        this.option(\"selectedItem\", ensureDefined(item, null));\r\n        this.option(\"displayValue\", displayValue)\r\n    },\r\n    _displayValue: function(item) {\r\n        return this._displayGetter(item)\r\n    },\r\n    _refreshSelected: function() {\r\n        var cache = {};\r\n        this._listItemElements().each(function(_, itemElement) {\r\n            var $itemElement = $(itemElement);\r\n            var itemValue = this._valueGetter($itemElement.data(LIST_ITEM_DATA_KEY));\r\n            var isItemSelected = this._isSelectedValue(itemValue, cache);\r\n            if (isItemSelected) {\r\n                this._list.selectItem($itemElement)\r\n            } else {\r\n                this._list.unselectItem($itemElement)\r\n            }\r\n        }.bind(this))\r\n    },\r\n    _popupShownHandler: function() {\r\n        this.callBase();\r\n        this._setFocusPolicy()\r\n    },\r\n    _setFocusPolicy: function() {\r\n        if (!this.option(\"focusStateEnabled\") || !this._list) {\r\n            return\r\n        }\r\n        this._list.option(\"focusedElement\", null)\r\n    },\r\n    _isSelectedValue: function(value) {\r\n        return this._isValueEquals(value, this.option(\"value\"))\r\n    },\r\n    _validateSearchMode: function() {\r\n        var searchMode = this.option(\"searchMode\");\r\n        var normalizedSearchMode = searchMode.toLowerCase();\r\n        if (inArray(normalizedSearchMode, SEARCH_MODES) < 0) {\r\n            throw errors.Error(\"E1019\", searchMode)\r\n        }\r\n    },\r\n    _clearSelectedItem: function() {\r\n        this.option(\"selectedItem\", null)\r\n    },\r\n    _processDataSourceChanging: function() {\r\n        this._setListDataSource();\r\n        this._renderInputValue().fail(function() {\r\n            if (this._isCustomValueAllowed()) {\r\n                return\r\n            }\r\n            this._clearSelectedItem()\r\n        }.bind(this))\r\n    },\r\n    _isCustomValueAllowed: function() {\r\n        return this.option(\"displayCustomValue\")\r\n    },\r\n    reset: function() {\r\n        this.callBase();\r\n        this._clearFilter();\r\n        this._clearSelectedItem()\r\n    },\r\n    _listItemElements: function() {\r\n        return this._$list ? this._$list.find(LIST_ITEM_SELECTOR) : $()\r\n    },\r\n    _popupConfig: function() {\r\n        return extend(this.callBase(), {\r\n            templatesRenderAsynchronously: false,\r\n            autoResizeEnabled: false,\r\n            maxHeight: this._getMaxHeight.bind(this)\r\n        })\r\n    },\r\n    _renderPopupContent: function() {\r\n        this.callBase();\r\n        this._renderList()\r\n    },\r\n    _getKeyboardListeners() {\r\n        var canListHaveFocus = this._canListHaveFocus();\r\n        return this.callBase().concat([!canListHaveFocus && this._list])\r\n    },\r\n    _setAriaTargetForList: function() {\r\n        this._list._getAriaTarget = this._getAriaTarget.bind(this)\r\n    },\r\n    _renderList: function() {\r\n        this._listId = \"dx-\" + (new Guid)._value;\r\n        var $list = this._$list = $(\"<div>\").attr(\"id\", this._listId).appendTo(this._popup.$content());\r\n        this._list = this._createComponent($list, List, this._listConfig());\r\n        this._refreshList();\r\n        this._setAriaTargetForList();\r\n        this._list.option(\"_listAttributes\", {\r\n            role: \"combobox\"\r\n        });\r\n        this._renderPreventBlurOnListClick();\r\n        this._setListFocusedElementOptionChange()\r\n    },\r\n    _renderPreventBlurOnListClick: function() {\r\n        var eventName = addNamespace(\"mousedown\", \"dxDropDownList\");\r\n        eventsEngine.off(this._$list, eventName);\r\n        eventsEngine.on(this._$list, eventName, e => e.preventDefault())\r\n    },\r\n    _renderOpenedState: function() {\r\n        this.callBase();\r\n        this._list && this._updateActiveDescendant();\r\n        this.setAria({\r\n            controls: this._list && this._listId,\r\n            owns: this._popup && this._popupContentId\r\n        })\r\n    },\r\n    _setDefaultAria: function() {\r\n        this.setAria({\r\n            haspopup: \"listbox\",\r\n            autocomplete: \"list\"\r\n        })\r\n    },\r\n    _refreshList: function() {\r\n        if (this._list && this._shouldRefreshDataSource()) {\r\n            this._setListDataSource()\r\n        }\r\n    },\r\n    _shouldRefreshDataSource: function() {\r\n        var dataSourceProvided = !!this._list.option(\"dataSource\");\r\n        return dataSourceProvided !== this._needPassDataSourceToList()\r\n    },\r\n    _isDesktopDevice: function() {\r\n        return \"desktop\" === devices.real().deviceType\r\n    },\r\n    _listConfig: function() {\r\n        var options = {\r\n            selectionMode: \"single\",\r\n            _templates: this.option(\"_templates\"),\r\n            templateProvider: this.option(\"templateProvider\"),\r\n            noDataText: this.option(\"noDataText\"),\r\n            grouped: this.option(\"grouped\"),\r\n            wrapItemText: this.option(\"wrapItemText\"),\r\n            useItemTextAsTitle: this.option(\"useItemTextAsTitle\"),\r\n            onContentReady: this._listContentReadyHandler.bind(this),\r\n            itemTemplate: this.option(\"itemTemplate\"),\r\n            indicateLoading: false,\r\n            keyExpr: this._getCollectionKeyExpr(),\r\n            displayExpr: this._displayGetterExpr(),\r\n            groupTemplate: this.option(\"groupTemplate\"),\r\n            onItemClick: this._listItemClickAction.bind(this),\r\n            dataSource: this._getDataSource(),\r\n            _revertPageOnEmptyLoad: true,\r\n            hoverStateEnabled: this._isDesktopDevice() ? this.option(\"hoverStateEnabled\") : false,\r\n            focusStateEnabled: this._isDesktopDevice() ? this.option(\"focusStateEnabled\") : false\r\n        };\r\n        if (!this._canListHaveFocus()) {\r\n            options.tabIndex = null\r\n        }\r\n        return options\r\n    },\r\n    _canListHaveFocus: () => false,\r\n    _getDataSource: function() {\r\n        return this._needPassDataSourceToList() ? this._dataSource : null\r\n    },\r\n    _dataSourceOptions: function() {\r\n        return {\r\n            paginate: false\r\n        }\r\n    },\r\n    _getGroupedOption: function() {\r\n        return this.option(\"grouped\")\r\n    },\r\n    _dataSourceFromUrlLoadMode: function() {\r\n        return \"raw\"\r\n    },\r\n    _listContentReadyHandler: function() {\r\n        this._list = this._list || this._$list.dxList(\"instance\");\r\n        if (!this.option(\"deferRendering\")) {\r\n            this._refreshSelected()\r\n        }\r\n        this._dimensionChanged();\r\n        this._contentReadyAction()\r\n    },\r\n    _setListOption: function(optionName, value) {\r\n        this._setWidgetOption(\"_list\", arguments)\r\n    },\r\n    _listItemClickAction: function(e) {\r\n        this._listItemClickHandler(e);\r\n        this._itemClickAction(e)\r\n    },\r\n    _listItemClickHandler: noop,\r\n    _setListDataSource: function() {\r\n        if (!this._list) {\r\n            return\r\n        }\r\n        this._setListOption(\"dataSource\", this._getDataSource());\r\n        if (!this._needPassDataSourceToList()) {\r\n            this._setListOption(\"items\", [])\r\n        }\r\n    },\r\n    _needPassDataSourceToList: function() {\r\n        return this.option(\"showDataBeforeSearch\") || this._isMinSearchLengthExceeded()\r\n    },\r\n    _isMinSearchLengthExceeded: function() {\r\n        return this._searchValue().toString().length >= this.option(\"minSearchLength\")\r\n    },\r\n    _needClearFilter: function() {\r\n        return this._canKeepDataSource() ? false : this._needPassDataSourceToList()\r\n    },\r\n    _canKeepDataSource: function() {\r\n        var _this$_dataSource;\r\n        var isMinSearchLengthExceeded = this._isMinSearchLengthExceeded();\r\n        return (null === (_this$_dataSource = this._dataSource) || void 0 === _this$_dataSource ? void 0 : _this$_dataSource.isLoaded()) && this.option(\"showDataBeforeSearch\") && this.option(\"minSearchLength\") && !isMinSearchLengthExceeded && !this._isLastMinSearchLengthExceeded\r\n    },\r\n    _searchValue: function() {\r\n        return this._input().val() || \"\"\r\n    },\r\n    _getSearchEvent: function() {\r\n        return addNamespace(SEARCH_EVENT, this.NAME + \"Search\")\r\n    },\r\n    _getCompositionStartEvent: function() {\r\n        return addNamespace(\"compositionstart\", this.NAME + \"CompositionStart\")\r\n    },\r\n    _getCompositionEndEvent: function() {\r\n        return addNamespace(\"compositionend\", this.NAME + \"CompositionEnd\")\r\n    },\r\n    _getSetFocusPolicyEvent: function() {\r\n        return addNamespace(\"input\", this.NAME + \"FocusPolicy\")\r\n    },\r\n    _renderEvents: function() {\r\n        this.callBase();\r\n        eventsEngine.on(this._input(), this._getSetFocusPolicyEvent(), () => {\r\n            this._setFocusPolicy()\r\n        });\r\n        if (this._shouldRenderSearchEvent()) {\r\n            eventsEngine.on(this._input(), this._getSearchEvent(), e => {\r\n                this._searchHandler(e)\r\n            });\r\n            if (useCompositionEvents) {\r\n                eventsEngine.on(this._input(), this._getCompositionStartEvent(), () => {\r\n                    this._isTextCompositionInProgress(true)\r\n                });\r\n                eventsEngine.on(this._input(), this._getCompositionEndEvent(), e => {\r\n                    this._isTextCompositionInProgress(void 0);\r\n                    this._searchHandler(e, this._searchValue())\r\n                })\r\n            }\r\n        }\r\n    },\r\n    _shouldRenderSearchEvent: function() {\r\n        return this.option(\"searchEnabled\")\r\n    },\r\n    _refreshEvents: function() {\r\n        eventsEngine.off(this._input(), this._getSearchEvent());\r\n        eventsEngine.off(this._input(), this._getSetFocusPolicyEvent());\r\n        if (useCompositionEvents) {\r\n            eventsEngine.off(this._input(), this._getCompositionStartEvent());\r\n            eventsEngine.off(this._input(), this._getCompositionEndEvent())\r\n        }\r\n        this.callBase()\r\n    },\r\n    _isTextCompositionInProgress: function(value) {\r\n        if (arguments.length) {\r\n            this._isTextComposition = value\r\n        } else {\r\n            return this._isTextComposition\r\n        }\r\n    },\r\n    _searchHandler: function(e, searchValue) {\r\n        if (this._isTextCompositionInProgress()) {\r\n            return\r\n        }\r\n        if (!this._isMinSearchLengthExceeded()) {\r\n            this._searchCanceled();\r\n            return\r\n        }\r\n        var searchTimeout = this.option(\"searchTimeout\");\r\n        if (searchTimeout) {\r\n            this._clearSearchTimer();\r\n            this._searchTimer = setTimeout(() => {\r\n                this._searchDataSource(searchValue)\r\n            }, searchTimeout)\r\n        } else {\r\n            this._searchDataSource(searchValue)\r\n        }\r\n    },\r\n    _searchCanceled: function() {\r\n        this._clearSearchTimer();\r\n        if (this._needClearFilter()) {\r\n            this._filterDataSource(null)\r\n        }\r\n        this._refreshList()\r\n    },\r\n    _searchDataSource: function() {\r\n        var searchValue = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this._searchValue();\r\n        this._filterDataSource(searchValue)\r\n    },\r\n    _filterDataSource: function(searchValue) {\r\n        this._clearSearchTimer();\r\n        var dataSource = this._dataSource;\r\n        if (dataSource) {\r\n            dataSource.searchExpr(this.option(\"searchExpr\") || this._displayGetterExpr());\r\n            dataSource.searchOperation(this.option(\"searchMode\"));\r\n            dataSource.searchValue(searchValue);\r\n            dataSource.load().done(this._dataSourceFiltered.bind(this, searchValue))\r\n        }\r\n    },\r\n    _clearFilter: function() {\r\n        var dataSource = this._dataSource;\r\n        dataSource && dataSource.searchValue() && dataSource.searchValue(null)\r\n    },\r\n    _dataSourceFiltered: function() {\r\n        this._isLastMinSearchLengthExceeded = this._isMinSearchLengthExceeded();\r\n        this._refreshList();\r\n        this._refreshPopupVisibility()\r\n    },\r\n    _shouldOpenPopup: function() {\r\n        return this._hasItemsToShow()\r\n    },\r\n    _refreshPopupVisibility: function() {\r\n        if (this.option(\"readOnly\") || !this._searchValue()) {\r\n            return\r\n        }\r\n        var shouldOpenPopup = this._shouldOpenPopup();\r\n        if (shouldOpenPopup && !this._isFocused()) {\r\n            return\r\n        }\r\n        this.option(\"opened\", shouldOpenPopup);\r\n        if (shouldOpenPopup) {\r\n            this._dimensionChanged()\r\n        }\r\n    },\r\n    _dataSourceChangedHandler: function(newItems) {\r\n        if (0 === this._dataSource.pageIndex()) {\r\n            this.option().items = newItems\r\n        } else {\r\n            this.option().items = this.option().items.concat(newItems)\r\n        }\r\n    },\r\n    _hasItemsToShow: function() {\r\n        var resultItems = this._dataSource && this._dataSource.items() || [];\r\n        var resultAmount = resultItems.length;\r\n        var isMinSearchLengthExceeded = this._needPassDataSourceToList();\r\n        return !!(isMinSearchLengthExceeded && resultAmount)\r\n    },\r\n    _clearSearchTimer: function() {\r\n        clearTimeout(this._searchTimer);\r\n        delete this._searchTimer\r\n    },\r\n    _popupShowingHandler: function() {\r\n        this._dimensionChanged()\r\n    },\r\n    _dimensionChanged: function() {\r\n        this.callBase(arguments);\r\n        this._popup && this._updatePopupDimensions()\r\n    },\r\n    _needPopupRepaint: function() {\r\n        if (!this._dataSource) {\r\n            return false\r\n        }\r\n        var currentPageIndex = this._dataSource.pageIndex();\r\n        var needRepaint = isDefined(this._pageIndex) && currentPageIndex <= this._pageIndex;\r\n        this._pageIndex = currentPageIndex;\r\n        return needRepaint\r\n    },\r\n    _updatePopupDimensions: function() {\r\n        if (this._needPopupRepaint()) {\r\n            this._popup.repaint()\r\n        }\r\n        this._list && this._list.updateDimensions()\r\n    },\r\n    _getMaxHeight: function() {\r\n        var $element = this.$element();\r\n        var $customBoundaryContainer = this._$customBoundaryContainer;\r\n        var offsetTop = $element.offset().top - ($customBoundaryContainer ? $customBoundaryContainer.offset().top : 0);\r\n        var windowHeight = getOuterHeight(window);\r\n        var containerHeight = $customBoundaryContainer ? Math.min(getOuterHeight($customBoundaryContainer), windowHeight) : windowHeight;\r\n        var maxHeight = Math.max(offsetTop, containerHeight - offsetTop - getOuterHeight($element));\r\n        return Math.min(.5 * containerHeight, maxHeight)\r\n    },\r\n    _clean: function() {\r\n        if (this._list) {\r\n            delete this._list\r\n        }\r\n        delete this._isLastMinSearchLengthExceeded;\r\n        this.callBase()\r\n    },\r\n    _dispose: function() {\r\n        this._clearSearchTimer();\r\n        this.callBase()\r\n    },\r\n    _setCollectionWidgetOption: function() {\r\n        this._setListOption.apply(this, arguments)\r\n    },\r\n    _setSubmitValue: function() {\r\n        var value = this.option(\"value\");\r\n        var submitValue = this._shouldUseDisplayValue(value) ? this._displayGetter(value) : value;\r\n        this._getSubmitElement().val(submitValue)\r\n    },\r\n    _shouldUseDisplayValue: function(value) {\r\n        return \"this\" === this.option(\"valueExpr\") && isObject(value)\r\n    },\r\n    _optionChanged: function(args) {\r\n        this._dataExpressionOptionChanged(args);\r\n        switch (args.name) {\r\n            case \"hoverStateEnabled\":\r\n            case \"focusStateEnabled\":\r\n                this._isDesktopDevice() && this._setListOption(args.name, args.value);\r\n                this.callBase(args);\r\n                break;\r\n            case \"items\":\r\n                if (!this.option(\"dataSource\")) {\r\n                    this._processDataSourceChanging()\r\n                }\r\n                break;\r\n            case \"dataSource\":\r\n                this._processDataSourceChanging();\r\n                break;\r\n            case \"valueExpr\":\r\n                this._renderValue();\r\n                this._setListOption(\"keyExpr\", this._getCollectionKeyExpr());\r\n                break;\r\n            case \"displayExpr\":\r\n                this._renderValue();\r\n                this._setListOption(\"displayExpr\", this._displayGetterExpr());\r\n                break;\r\n            case \"searchMode\":\r\n                this._validateSearchMode();\r\n                break;\r\n            case \"minSearchLength\":\r\n                this._refreshList();\r\n                break;\r\n            case \"searchEnabled\":\r\n            case \"showDataBeforeSearch\":\r\n            case \"searchExpr\":\r\n                this._invalidate();\r\n                break;\r\n            case \"onContentReady\":\r\n                this._initContentReadyAction();\r\n                break;\r\n            case \"onSelectionChanged\":\r\n                this._initSelectionChangedAction();\r\n                break;\r\n            case \"onItemClick\":\r\n                this._initItemClickAction();\r\n                break;\r\n            case \"grouped\":\r\n            case \"groupTemplate\":\r\n            case \"wrapItemText\":\r\n            case \"noDataText\":\r\n            case \"useItemTextAsTitle\":\r\n                this._setListOption(args.name);\r\n                break;\r\n            case \"displayValue\":\r\n                this.option(\"text\", args.value);\r\n                break;\r\n            case \"itemTemplate\":\r\n            case \"searchTimeout\":\r\n                break;\r\n            case \"selectedItem\":\r\n                if (args.previousValue !== args.value) {\r\n                    this._selectionChangedAction({\r\n                        selectedItem: args.value\r\n                    })\r\n                }\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n}).include(DataExpressionMixin, DataConverterMixin);\r\nregisterComponent(\"dxDropDownList\", DropDownList);\r\nexport default DropDownList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}